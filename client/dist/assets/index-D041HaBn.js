var wA=Object.defineProperty;var TA=(t,e,n)=>e in t?wA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var zh=(t,e,n)=>TA(t,typeof e!="symbol"?e+"":e,n);function xA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ul(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dE={exports:{}},Cd={},hE={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fl=Symbol.for("react.element"),EA=Symbol.for("react.portal"),IA=Symbol.for("react.fragment"),SA=Symbol.for("react.strict_mode"),bA=Symbol.for("react.profiler"),PA=Symbol.for("react.provider"),CA=Symbol.for("react.context"),AA=Symbol.for("react.forward_ref"),kA=Symbol.for("react.suspense"),RA=Symbol.for("react.memo"),NA=Symbol.for("react.lazy"),H_=Symbol.iterator;function DA(t){return t===null||typeof t!="object"?null:(t=H_&&t[H_]||t["@@iterator"],typeof t=="function"?t:null)}var fE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pE=Object.assign,mE={};function Oo(t,e,n){this.props=t,this.context=e,this.refs=mE,this.updater=n||fE}Oo.prototype.isReactComponent={};Oo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Oo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gE(){}gE.prototype=Oo.prototype;function Tg(t,e,n){this.props=t,this.context=e,this.refs=mE,this.updater=n||fE}var xg=Tg.prototype=new gE;xg.constructor=Tg;pE(xg,Oo.prototype);xg.isPureReactComponent=!0;var G_=Array.isArray,yE=Object.prototype.hasOwnProperty,Eg={current:null},vE={key:!0,ref:!0,__self:!0,__source:!0};function _E(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)yE.call(e,r)&&!vE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Fl,type:t,key:s,ref:o,props:i,_owner:Eg.current}}function MA(t,e){return{$$typeof:Fl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ig(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fl}function VA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var K_=/\/+/g;function $h(t,e){return typeof t=="object"&&t!==null&&t.key!=null?VA(""+t.key):e.toString(36)}function nc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Fl:case EA:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+$h(o,0):r,G_(i)?(n="",t!=null&&(n=t.replace(K_,"$&/")+"/"),nc(i,e,n,"",function(u){return u})):i!=null&&(Ig(i)&&(i=MA(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(K_,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",G_(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+$h(s,a);o+=nc(s,e,n,l,i)}else if(l=DA(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+$h(s,a++),o+=nc(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pu(t,e,n){if(t==null)return t;var r=[],i=0;return nc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function OA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jt={current:null},rc={transition:null},LA={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:rc,ReactCurrentOwner:Eg};function wE(){throw Error("act(...) is not supported in production builds of React.")}le.Children={map:Pu,forEach:function(t,e,n){Pu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pu(t,function(){e++}),e},toArray:function(t){return Pu(t,function(e){return e})||[]},only:function(t){if(!Ig(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Oo;le.Fragment=IA;le.Profiler=bA;le.PureComponent=Tg;le.StrictMode=SA;le.Suspense=kA;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LA;le.act=wE;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=pE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Eg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)yE.call(e,l)&&!vE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Fl,type:t.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:CA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PA,_context:t},t.Consumer=t};le.createElement=_E;le.createFactory=function(t){var e=_E.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:AA,render:t}};le.isValidElement=Ig;le.lazy=function(t){return{$$typeof:NA,_payload:{_status:-1,_result:t},_init:OA}};le.memo=function(t,e){return{$$typeof:RA,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=rc.transition;rc.transition={};try{t()}finally{rc.transition=e}};le.unstable_act=wE;le.useCallback=function(t,e){return jt.current.useCallback(t,e)};le.useContext=function(t){return jt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return jt.current.useDeferredValue(t)};le.useEffect=function(t,e){return jt.current.useEffect(t,e)};le.useId=function(){return jt.current.useId()};le.useImperativeHandle=function(t,e,n){return jt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return jt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return jt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return jt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return jt.current.useReducer(t,e,n)};le.useRef=function(t){return jt.current.useRef(t)};le.useState=function(t){return jt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return jt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return jt.current.useTransition()};le.version="18.3.1";hE.exports=le;var V=hE.exports;const Ad=Ul(V),jA=xA({__proto__:null,default:Ad},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UA=V,FA=Symbol.for("react.element"),BA=Symbol.for("react.fragment"),zA=Object.prototype.hasOwnProperty,$A=UA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WA={key:!0,ref:!0,__self:!0,__source:!0};function TE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)zA.call(e,r)&&!WA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:FA,type:t,key:s,ref:o,props:i,_owner:$A.current}}Cd.Fragment=BA;Cd.jsx=TE;Cd.jsxs=TE;dE.exports=Cd;var m=dE.exports,ep={},xE={exports:{}},un={},EE={exports:{}},IE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,z){var $=F.length;F.push(z);e:for(;0<$;){var Q=$-1>>>1,ie=F[Q];if(0<i(ie,z))F[Q]=z,F[$]=ie,$=Q;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var z=F[0],$=F.pop();if($!==z){F[0]=$;e:for(var Q=0,ie=F.length,We=ie>>>1;Q<We;){var Qe=2*(Q+1)-1,Bt=F[Qe],Xe=Qe+1,ot=F[Xe];if(0>i(Bt,$))Xe<ie&&0>i(ot,Bt)?(F[Q]=ot,F[Xe]=$,Q=Xe):(F[Q]=Bt,F[Qe]=$,Q=Qe);else if(Xe<ie&&0>i(ot,$))F[Q]=ot,F[Xe]=$,Q=Xe;else break e}}return z}function i(F,z){var $=F.sortIndex-z.sortIndex;return $!==0?$:F.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,y=!1,T=!1,b=!1,I=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(F){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=F)r(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(u)}}function E(F){if(b=!1,v(F),!T)if(n(l)!==null)T=!0,Z(k);else{var z=n(u);z!==null&&re(E,z.startTime-F)}}function k(F,z){T=!1,b&&(b=!1,w(x),x=-1),y=!0;var $=f;try{for(v(z),h=n(l);h!==null&&(!(h.expirationTime>z)||F&&!N());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,f=h.priorityLevel;var ie=Q(h.expirationTime<=z);z=t.unstable_now(),typeof ie=="function"?h.callback=ie:h===n(l)&&r(l),v(z)}else r(l);h=n(l)}if(h!==null)var We=!0;else{var Qe=n(u);Qe!==null&&re(E,Qe.startTime-z),We=!1}return We}finally{h=null,f=$,y=!1}}var M=!1,S=null,x=-1,C=5,R=-1;function N(){return!(t.unstable_now()-R<C)}function D(){if(S!==null){var F=t.unstable_now();R=F;var z=!0;try{z=S(!0,F)}finally{z?A():(M=!1,S=null)}}else M=!1}var A;if(typeof g=="function")A=function(){g(D)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Y=G.port2;G.port1.onmessage=D,A=function(){Y.postMessage(null)}}else A=function(){I(D,0)};function Z(F){S=F,M||(M=!0,A())}function re(F,z){x=I(function(){F(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){T||y||(T=!0,Z(k))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var $=f;f=z;try{return F()}finally{f=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,z){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var $=f;f=F;try{return z()}finally{f=$}},t.unstable_scheduleCallback=function(F,z,$){var Q=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Q+$:Q):$=Q,F){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=$+ie,F={id:d++,callback:z,priorityLevel:F,startTime:$,expirationTime:ie,sortIndex:-1},$>Q?(F.sortIndex=$,e(u,F),n(l)===null&&F===n(u)&&(b?(w(x),x=-1):b=!0,re(E,$-Q))):(F.sortIndex=ie,e(l,F),T||y||(T=!0,Z(k))),F},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(F){var z=f;return function(){var $=f;f=z;try{return F.apply(this,arguments)}finally{f=$}}}})(IE);EE.exports=IE;var qA=EE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HA=V,an=qA;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var SE=new Set,ol={};function Ts(t,e){vo(t,e),vo(t+"Capture",e)}function vo(t,e){for(ol[t]=e,t=0;t<e.length;t++)SE.add(e[t])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tp=Object.prototype.hasOwnProperty,GA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y_={},Q_={};function KA(t){return tp.call(Q_,t)?!0:tp.call(Y_,t)?!1:GA.test(t)?Q_[t]=!0:(Y_[t]=!0,!1)}function YA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QA(t,e,n,r){if(e===null||typeof e>"u"||YA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ut(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ft[t]=new Ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ft[e]=new Ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ft[t]=new Ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ft[t]=new Ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ft[t]=new Ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ft[t]=new Ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ft[t]=new Ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ft[t]=new Ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ft[t]=new Ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sg=/[\-:]([a-z])/g;function bg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sg,bg);ft[e]=new Ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sg,bg);ft[e]=new Ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sg,bg);ft[e]=new Ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ft[t]=new Ut(t,1,!1,t.toLowerCase(),null,!1,!1)});ft.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ft[t]=new Ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function Pg(t,e,n,r){var i=ft.hasOwnProperty(e)?ft[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QA(e,n,i,r)&&(n=null),r||i===null?KA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Cr=HA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cu=Symbol.for("react.element"),zs=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),Cg=Symbol.for("react.strict_mode"),np=Symbol.for("react.profiler"),bE=Symbol.for("react.provider"),PE=Symbol.for("react.context"),Ag=Symbol.for("react.forward_ref"),rp=Symbol.for("react.suspense"),ip=Symbol.for("react.suspense_list"),kg=Symbol.for("react.memo"),zr=Symbol.for("react.lazy"),CE=Symbol.for("react.offscreen"),X_=Symbol.iterator;function ha(t){return t===null||typeof t!="object"?null:(t=X_&&t[X_]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Wh;function Pa(t){if(Wh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wh=e&&e[1]||""}return`
`+Wh+t}var qh=!1;function Hh(t,e){if(!t||qh)return"";qh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{qh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Pa(t):""}function XA(t){switch(t.tag){case 5:return Pa(t.type);case 16:return Pa("Lazy");case 13:return Pa("Suspense");case 19:return Pa("SuspenseList");case 0:case 2:case 15:return t=Hh(t.type,!1),t;case 11:return t=Hh(t.type.render,!1),t;case 1:return t=Hh(t.type,!0),t;default:return""}}function sp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $s:return"Fragment";case zs:return"Portal";case np:return"Profiler";case Cg:return"StrictMode";case rp:return"Suspense";case ip:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case PE:return(t.displayName||"Context")+".Consumer";case bE:return(t._context.displayName||"Context")+".Provider";case Ag:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kg:return e=t.displayName||null,e!==null?e:sp(t.type)||"Memo";case zr:e=t._payload,t=t._init;try{return sp(t(e))}catch{}}return null}function JA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sp(e);case 8:return e===Cg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function mi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function AE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ZA(t){var e=AE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Au(t){t._valueTracker||(t._valueTracker=ZA(t))}function kE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=AE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Pc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function op(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function J_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=mi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RE(t,e){e=e.checked,e!=null&&Pg(t,"checked",e,!1)}function ap(t,e){RE(t,e);var n=mi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lp(t,e.type,n):e.hasOwnProperty("defaultValue")&&lp(t,e.type,mi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Z_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function lp(t,e,n){(e!=="number"||Pc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ca=Array.isArray;function oo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function up(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ew(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Ca(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:mi(n)}}function NE(t,e){var n=mi(e.value),r=mi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function DE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?DE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ku,ME=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ku=ku||document.createElement("div"),ku.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ku.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function al(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ja={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ek=["Webkit","ms","Moz","O"];Object.keys(ja).forEach(function(t){ek.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ja[e]=ja[t]})});function VE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ja.hasOwnProperty(t)&&ja[t]?(""+e).trim():e+"px"}function OE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=VE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var tk=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dp(t,e){if(e){if(tk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function hp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fp=null;function Rg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pp=null,ao=null,lo=null;function nw(t){if(t=$l(t)){if(typeof pp!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Md(e),pp(t.stateNode,t.type,e))}}function LE(t){ao?lo?lo.push(t):lo=[t]:ao=t}function jE(){if(ao){var t=ao,e=lo;if(lo=ao=null,nw(t),e)for(t=0;t<e.length;t++)nw(e[t])}}function UE(t,e){return t(e)}function FE(){}var Gh=!1;function BE(t,e,n){if(Gh)return t(e,n);Gh=!0;try{return UE(t,e,n)}finally{Gh=!1,(ao!==null||lo!==null)&&(FE(),jE())}}function ll(t,e){var n=t.stateNode;if(n===null)return null;var r=Md(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var mp=!1;if(wr)try{var fa={};Object.defineProperty(fa,"passive",{get:function(){mp=!0}}),window.addEventListener("test",fa,fa),window.removeEventListener("test",fa,fa)}catch{mp=!1}function nk(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Ua=!1,Cc=null,Ac=!1,gp=null,rk={onError:function(t){Ua=!0,Cc=t}};function ik(t,e,n,r,i,s,o,a,l){Ua=!1,Cc=null,nk.apply(rk,arguments)}function sk(t,e,n,r,i,s,o,a,l){if(ik.apply(this,arguments),Ua){if(Ua){var u=Cc;Ua=!1,Cc=null}else throw Error(B(198));Ac||(Ac=!0,gp=u)}}function xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rw(t){if(xs(t)!==t)throw Error(B(188))}function ok(t){var e=t.alternate;if(!e){if(e=xs(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return rw(i),t;if(s===r)return rw(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function $E(t){return t=ok(t),t!==null?WE(t):null}function WE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=WE(t);if(e!==null)return e;t=t.sibling}return null}var qE=an.unstable_scheduleCallback,iw=an.unstable_cancelCallback,ak=an.unstable_shouldYield,lk=an.unstable_requestPaint,Be=an.unstable_now,uk=an.unstable_getCurrentPriorityLevel,Ng=an.unstable_ImmediatePriority,HE=an.unstable_UserBlockingPriority,kc=an.unstable_NormalPriority,ck=an.unstable_LowPriority,GE=an.unstable_IdlePriority,kd=null,qn=null;function dk(t){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(kd,t,void 0,(t.current.flags&128)===128)}catch{}}var kn=Math.clz32?Math.clz32:pk,hk=Math.log,fk=Math.LN2;function pk(t){return t>>>=0,t===0?32:31-(hk(t)/fk|0)|0}var Ru=64,Nu=4194304;function Aa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Aa(a):(s&=o,s!==0&&(r=Aa(s)))}else o=n&~i,o!==0?r=Aa(o):s!==0&&(r=Aa(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-kn(e),i=1<<n,r|=t[n],e&=~i;return r}function mk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-kn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=mk(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function yp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KE(){var t=Ru;return Ru<<=1,!(Ru&4194240)&&(Ru=64),t}function Kh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Bl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kn(e),t[e]=n}function yk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-kn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Dg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-kn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ye=0;function YE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var QE,Mg,XE,JE,ZE,vp=!1,Du=[],ti=null,ni=null,ri=null,ul=new Map,cl=new Map,qr=[],vk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sw(t,e){switch(t){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":ni=null;break;case"mouseover":case"mouseout":ri=null;break;case"pointerover":case"pointerout":ul.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cl.delete(e.pointerId)}}function pa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=$l(e),e!==null&&Mg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function _k(t,e,n,r,i){switch(e){case"focusin":return ti=pa(ti,t,e,n,r,i),!0;case"dragenter":return ni=pa(ni,t,e,n,r,i),!0;case"mouseover":return ri=pa(ri,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ul.set(s,pa(ul.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,cl.set(s,pa(cl.get(s)||null,t,e,n,r,i)),!0}return!1}function e1(t){var e=Qi(t.target);if(e!==null){var n=xs(e);if(n!==null){if(e=n.tag,e===13){if(e=zE(n),e!==null){t.blockedOn=e,ZE(t.priority,function(){XE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ic(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=_p(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);fp=r,n.target.dispatchEvent(r),fp=null}else return e=$l(n),e!==null&&Mg(e),t.blockedOn=n,!1;e.shift()}return!0}function ow(t,e,n){ic(t)&&n.delete(e)}function wk(){vp=!1,ti!==null&&ic(ti)&&(ti=null),ni!==null&&ic(ni)&&(ni=null),ri!==null&&ic(ri)&&(ri=null),ul.forEach(ow),cl.forEach(ow)}function ma(t,e){t.blockedOn===e&&(t.blockedOn=null,vp||(vp=!0,an.unstable_scheduleCallback(an.unstable_NormalPriority,wk)))}function dl(t){function e(i){return ma(i,t)}if(0<Du.length){ma(Du[0],t);for(var n=1;n<Du.length;n++){var r=Du[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ti!==null&&ma(ti,t),ni!==null&&ma(ni,t),ri!==null&&ma(ri,t),ul.forEach(e),cl.forEach(e),n=0;n<qr.length;n++)r=qr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qr.length&&(n=qr[0],n.blockedOn===null);)e1(n),n.blockedOn===null&&qr.shift()}var uo=Cr.ReactCurrentBatchConfig,Nc=!0;function Tk(t,e,n,r){var i=ye,s=uo.transition;uo.transition=null;try{ye=1,Vg(t,e,n,r)}finally{ye=i,uo.transition=s}}function xk(t,e,n,r){var i=ye,s=uo.transition;uo.transition=null;try{ye=4,Vg(t,e,n,r)}finally{ye=i,uo.transition=s}}function Vg(t,e,n,r){if(Nc){var i=_p(t,e,n,r);if(i===null)sf(t,e,r,Dc,n),sw(t,r);else if(_k(i,t,e,n,r))r.stopPropagation();else if(sw(t,r),e&4&&-1<vk.indexOf(t)){for(;i!==null;){var s=$l(i);if(s!==null&&QE(s),s=_p(t,e,n,r),s===null&&sf(t,e,r,Dc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else sf(t,e,r,null,n)}}var Dc=null;function _p(t,e,n,r){if(Dc=null,t=Rg(r),t=Qi(t),t!==null)if(e=xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Dc=t,null}function t1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uk()){case Ng:return 1;case HE:return 4;case kc:case ck:return 16;case GE:return 536870912;default:return 16}default:return 16}}var Xr=null,Og=null,sc=null;function n1(){if(sc)return sc;var t,e=Og,n=e.length,r,i="value"in Xr?Xr.value:Xr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return sc=i.slice(t,1<r?1-r:void 0)}function oc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mu(){return!0}function aw(){return!1}function cn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Mu:aw,this.isPropagationStopped=aw,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mu)},persist:function(){},isPersistent:Mu}),e}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lg=cn(Lo),zl=De({},Lo,{view:0,detail:0}),Ek=cn(zl),Yh,Qh,ga,Rd=De({},zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ga&&(ga&&t.type==="mousemove"?(Yh=t.screenX-ga.screenX,Qh=t.screenY-ga.screenY):Qh=Yh=0,ga=t),Yh)},movementY:function(t){return"movementY"in t?t.movementY:Qh}}),lw=cn(Rd),Ik=De({},Rd,{dataTransfer:0}),Sk=cn(Ik),bk=De({},zl,{relatedTarget:0}),Xh=cn(bk),Pk=De({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),Ck=cn(Pk),Ak=De({},Lo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kk=cn(Ak),Rk=De({},Lo,{data:0}),uw=cn(Rk),Nk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mk[t])?!!e[t]:!1}function jg(){return Vk}var Ok=De({},zl,{key:function(t){if(t.key){var e=Nk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=oc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Dk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jg,charCode:function(t){return t.type==="keypress"?oc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?oc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Lk=cn(Ok),jk=De({},Rd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cw=cn(jk),Uk=De({},zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jg}),Fk=cn(Uk),Bk=De({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),zk=cn(Bk),$k=De({},Rd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Wk=cn($k),qk=[9,13,27,32],Ug=wr&&"CompositionEvent"in window,Fa=null;wr&&"documentMode"in document&&(Fa=document.documentMode);var Hk=wr&&"TextEvent"in window&&!Fa,r1=wr&&(!Ug||Fa&&8<Fa&&11>=Fa),dw=" ",hw=!1;function i1(t,e){switch(t){case"keyup":return qk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ws=!1;function Gk(t,e){switch(t){case"compositionend":return s1(e);case"keypress":return e.which!==32?null:(hw=!0,dw);case"textInput":return t=e.data,t===dw&&hw?null:t;default:return null}}function Kk(t,e){if(Ws)return t==="compositionend"||!Ug&&i1(t,e)?(t=n1(),sc=Og=Xr=null,Ws=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return r1&&e.locale!=="ko"?null:e.data;default:return null}}var Yk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Yk[t.type]:e==="textarea"}function o1(t,e,n,r){LE(r),e=Mc(e,"onChange"),0<e.length&&(n=new Lg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ba=null,hl=null;function Qk(t){y1(t,0)}function Nd(t){var e=Gs(t);if(kE(e))return t}function Xk(t,e){if(t==="change")return e}var a1=!1;if(wr){var Jh;if(wr){var Zh="oninput"in document;if(!Zh){var pw=document.createElement("div");pw.setAttribute("oninput","return;"),Zh=typeof pw.oninput=="function"}Jh=Zh}else Jh=!1;a1=Jh&&(!document.documentMode||9<document.documentMode)}function mw(){Ba&&(Ba.detachEvent("onpropertychange",l1),hl=Ba=null)}function l1(t){if(t.propertyName==="value"&&Nd(hl)){var e=[];o1(e,hl,t,Rg(t)),BE(Qk,e)}}function Jk(t,e,n){t==="focusin"?(mw(),Ba=e,hl=n,Ba.attachEvent("onpropertychange",l1)):t==="focusout"&&mw()}function Zk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nd(hl)}function eR(t,e){if(t==="click")return Nd(e)}function tR(t,e){if(t==="input"||t==="change")return Nd(e)}function nR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nn=typeof Object.is=="function"?Object.is:nR;function fl(t,e){if(Nn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!tp.call(e,i)||!Nn(t[i],e[i]))return!1}return!0}function gw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yw(t,e){var n=gw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gw(n)}}function u1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?u1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function c1(){for(var t=window,e=Pc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Pc(t.document)}return e}function Fg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rR(t){var e=c1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&u1(n.ownerDocument.documentElement,n)){if(r!==null&&Fg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=yw(n,s);var o=yw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iR=wr&&"documentMode"in document&&11>=document.documentMode,qs=null,wp=null,za=null,Tp=!1;function vw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tp||qs==null||qs!==Pc(r)||(r=qs,"selectionStart"in r&&Fg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),za&&fl(za,r)||(za=r,r=Mc(wp,"onSelect"),0<r.length&&(e=new Lg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qs)))}function Vu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Hs={animationend:Vu("Animation","AnimationEnd"),animationiteration:Vu("Animation","AnimationIteration"),animationstart:Vu("Animation","AnimationStart"),transitionend:Vu("Transition","TransitionEnd")},ef={},d1={};wr&&(d1=document.createElement("div").style,"AnimationEvent"in window||(delete Hs.animationend.animation,delete Hs.animationiteration.animation,delete Hs.animationstart.animation),"TransitionEvent"in window||delete Hs.transitionend.transition);function Dd(t){if(ef[t])return ef[t];if(!Hs[t])return t;var e=Hs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in d1)return ef[t]=e[n];return t}var h1=Dd("animationend"),f1=Dd("animationiteration"),p1=Dd("animationstart"),m1=Dd("transitionend"),g1=new Map,_w="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bi(t,e){g1.set(t,e),Ts(e,[t])}for(var tf=0;tf<_w.length;tf++){var nf=_w[tf],sR=nf.toLowerCase(),oR=nf[0].toUpperCase()+nf.slice(1);bi(sR,"on"+oR)}bi(h1,"onAnimationEnd");bi(f1,"onAnimationIteration");bi(p1,"onAnimationStart");bi("dblclick","onDoubleClick");bi("focusin","onFocus");bi("focusout","onBlur");bi(m1,"onTransitionEnd");vo("onMouseEnter",["mouseout","mouseover"]);vo("onMouseLeave",["mouseout","mouseover"]);vo("onPointerEnter",["pointerout","pointerover"]);vo("onPointerLeave",["pointerout","pointerover"]);Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aR=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function ww(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sk(r,e,void 0,t),t.currentTarget=null}function y1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;ww(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;ww(i,a,u),s=l}}}if(Ac)throw t=gp,Ac=!1,gp=null,t}function Ie(t,e){var n=e[bp];n===void 0&&(n=e[bp]=new Set);var r=t+"__bubble";n.has(r)||(v1(e,t,2,!1),n.add(r))}function rf(t,e,n){var r=0;e&&(r|=4),v1(n,t,r,e)}var Ou="_reactListening"+Math.random().toString(36).slice(2);function pl(t){if(!t[Ou]){t[Ou]=!0,SE.forEach(function(n){n!=="selectionchange"&&(aR.has(n)||rf(n,!1,t),rf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ou]||(e[Ou]=!0,rf("selectionchange",!1,e))}}function v1(t,e,n,r){switch(t1(e)){case 1:var i=Tk;break;case 4:i=xk;break;default:i=Vg}n=i.bind(null,e,n,t),i=void 0,!mp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function sf(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Qi(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}BE(function(){var u=s,d=Rg(n),h=[];e:{var f=g1.get(t);if(f!==void 0){var y=Lg,T=t;switch(t){case"keypress":if(oc(n)===0)break e;case"keydown":case"keyup":y=Lk;break;case"focusin":T="focus",y=Xh;break;case"focusout":T="blur",y=Xh;break;case"beforeblur":case"afterblur":y=Xh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=lw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Sk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Fk;break;case h1:case f1:case p1:y=Ck;break;case m1:y=zk;break;case"scroll":y=Ek;break;case"wheel":y=Wk;break;case"copy":case"cut":case"paste":y=kk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=cw}var b=(e&4)!==0,I=!b&&t==="scroll",w=b?f!==null?f+"Capture":null:f;b=[];for(var g=u,v;g!==null;){v=g;var E=v.stateNode;if(v.tag===5&&E!==null&&(v=E,w!==null&&(E=ll(g,w),E!=null&&b.push(ml(g,E,v)))),I)break;g=g.return}0<b.length&&(f=new y(f,T,null,n,d),h.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==fp&&(T=n.relatedTarget||n.fromElement)&&(Qi(T)||T[Tr]))break e;if((y||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,y?(T=n.relatedTarget||n.toElement,y=u,T=T?Qi(T):null,T!==null&&(I=xs(T),T!==I||T.tag!==5&&T.tag!==6)&&(T=null)):(y=null,T=u),y!==T)){if(b=lw,E="onMouseLeave",w="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(b=cw,E="onPointerLeave",w="onPointerEnter",g="pointer"),I=y==null?f:Gs(y),v=T==null?f:Gs(T),f=new b(E,g+"leave",y,n,d),f.target=I,f.relatedTarget=v,E=null,Qi(d)===u&&(b=new b(w,g+"enter",T,n,d),b.target=v,b.relatedTarget=I,E=b),I=E,y&&T)t:{for(b=y,w=T,g=0,v=b;v;v=Ms(v))g++;for(v=0,E=w;E;E=Ms(E))v++;for(;0<g-v;)b=Ms(b),g--;for(;0<v-g;)w=Ms(w),v--;for(;g--;){if(b===w||w!==null&&b===w.alternate)break t;b=Ms(b),w=Ms(w)}b=null}else b=null;y!==null&&Tw(h,f,y,b,!1),T!==null&&I!==null&&Tw(h,I,T,b,!0)}}e:{if(f=u?Gs(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var k=Xk;else if(fw(f))if(a1)k=tR;else{k=Zk;var M=Jk}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=eR);if(k&&(k=k(t,u))){o1(h,k,n,d);break e}M&&M(t,f,u),t==="focusout"&&(M=f._wrapperState)&&M.controlled&&f.type==="number"&&lp(f,"number",f.value)}switch(M=u?Gs(u):window,t){case"focusin":(fw(M)||M.contentEditable==="true")&&(qs=M,wp=u,za=null);break;case"focusout":za=wp=qs=null;break;case"mousedown":Tp=!0;break;case"contextmenu":case"mouseup":case"dragend":Tp=!1,vw(h,n,d);break;case"selectionchange":if(iR)break;case"keydown":case"keyup":vw(h,n,d)}var S;if(Ug)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ws?i1(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(r1&&n.locale!=="ko"&&(Ws||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ws&&(S=n1()):(Xr=d,Og="value"in Xr?Xr.value:Xr.textContent,Ws=!0)),M=Mc(u,x),0<M.length&&(x=new uw(x,t,null,n,d),h.push({event:x,listeners:M}),S?x.data=S:(S=s1(n),S!==null&&(x.data=S)))),(S=Hk?Gk(t,n):Kk(t,n))&&(u=Mc(u,"onBeforeInput"),0<u.length&&(d=new uw("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=S))}y1(h,e)})}function ml(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ll(t,n),s!=null&&r.unshift(ml(t,s,i)),s=ll(t,e),s!=null&&r.push(ml(t,s,i))),t=t.return}return r}function Ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ll(n,s),l!=null&&o.unshift(ml(n,l,a))):i||(l=ll(n,s),l!=null&&o.push(ml(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var lR=/\r\n?/g,uR=/\u0000|\uFFFD/g;function xw(t){return(typeof t=="string"?t:""+t).replace(lR,`
`).replace(uR,"")}function Lu(t,e,n){if(e=xw(e),xw(t)!==e&&n)throw Error(B(425))}function Vc(){}var xp=null,Ep=null;function Ip(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sp=typeof setTimeout=="function"?setTimeout:void 0,cR=typeof clearTimeout=="function"?clearTimeout:void 0,Ew=typeof Promise=="function"?Promise:void 0,dR=typeof queueMicrotask=="function"?queueMicrotask:typeof Ew<"u"?function(t){return Ew.resolve(null).then(t).catch(hR)}:Sp;function hR(t){setTimeout(function(){throw t})}function of(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),dl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);dl(e)}function ii(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Iw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var jo=Math.random().toString(36).slice(2),Wn="__reactFiber$"+jo,gl="__reactProps$"+jo,Tr="__reactContainer$"+jo,bp="__reactEvents$"+jo,fR="__reactListeners$"+jo,pR="__reactHandles$"+jo;function Qi(t){var e=t[Wn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tr]||n[Wn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Iw(t);t!==null;){if(n=t[Wn])return n;t=Iw(t)}return e}t=n,n=t.parentNode}return null}function $l(t){return t=t[Wn]||t[Tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Md(t){return t[gl]||null}var Pp=[],Ks=-1;function Pi(t){return{current:t}}function be(t){0>Ks||(t.current=Pp[Ks],Pp[Ks]=null,Ks--)}function Te(t,e){Ks++,Pp[Ks]=t.current,t.current=e}var gi={},Pt=Pi(gi),Kt=Pi(!1),ls=gi;function _o(t,e){var n=t.type.contextTypes;if(!n)return gi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Yt(t){return t=t.childContextTypes,t!=null}function Oc(){be(Kt),be(Pt)}function Sw(t,e,n){if(Pt.current!==gi)throw Error(B(168));Te(Pt,e),Te(Kt,n)}function _1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,JA(t)||"Unknown",i));return De({},n,r)}function Lc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||gi,ls=Pt.current,Te(Pt,t),Te(Kt,Kt.current),!0}function bw(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=_1(t,e,ls),r.__reactInternalMemoizedMergedChildContext=t,be(Kt),be(Pt),Te(Pt,t)):be(Kt),Te(Kt,n)}var lr=null,Vd=!1,af=!1;function w1(t){lr===null?lr=[t]:lr.push(t)}function mR(t){Vd=!0,w1(t)}function Ci(){if(!af&&lr!==null){af=!0;var t=0,e=ye;try{var n=lr;for(ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}lr=null,Vd=!1}catch(i){throw lr!==null&&(lr=lr.slice(t+1)),qE(Ng,Ci),i}finally{ye=e,af=!1}}return null}var Ys=[],Qs=0,jc=null,Uc=0,gn=[],yn=0,us=null,ur=1,cr="";function qi(t,e){Ys[Qs++]=Uc,Ys[Qs++]=jc,jc=t,Uc=e}function T1(t,e,n){gn[yn++]=ur,gn[yn++]=cr,gn[yn++]=us,us=t;var r=ur;t=cr;var i=32-kn(r)-1;r&=~(1<<i),n+=1;var s=32-kn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ur=1<<32-kn(e)+i|n<<i|r,cr=s+t}else ur=1<<s|n<<i|r,cr=t}function Bg(t){t.return!==null&&(qi(t,1),T1(t,1,0))}function zg(t){for(;t===jc;)jc=Ys[--Qs],Ys[Qs]=null,Uc=Ys[--Qs],Ys[Qs]=null;for(;t===us;)us=gn[--yn],gn[yn]=null,cr=gn[--yn],gn[yn]=null,ur=gn[--yn],gn[yn]=null}var on=null,rn=null,Ce=!1,Cn=null;function x1(t,e){var n=_n(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,on=t,rn=ii(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,on=t,rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=us!==null?{id:ur,overflow:cr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=_n(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,on=t,rn=null,!0):!1;default:return!1}}function Cp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ap(t){if(Ce){var e=rn;if(e){var n=e;if(!Pw(t,e)){if(Cp(t))throw Error(B(418));e=ii(n.nextSibling);var r=on;e&&Pw(t,e)?x1(r,n):(t.flags=t.flags&-4097|2,Ce=!1,on=t)}}else{if(Cp(t))throw Error(B(418));t.flags=t.flags&-4097|2,Ce=!1,on=t}}}function Cw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;on=t}function ju(t){if(t!==on)return!1;if(!Ce)return Cw(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ip(t.type,t.memoizedProps)),e&&(e=rn)){if(Cp(t))throw E1(),Error(B(418));for(;e;)x1(t,e),e=ii(e.nextSibling)}if(Cw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rn=ii(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rn=null}}else rn=on?ii(t.stateNode.nextSibling):null;return!0}function E1(){for(var t=rn;t;)t=ii(t.nextSibling)}function wo(){rn=on=null,Ce=!1}function $g(t){Cn===null?Cn=[t]:Cn.push(t)}var gR=Cr.ReactCurrentBatchConfig;function ya(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Uu(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Aw(t){var e=t._init;return e(t._payload)}function I1(t){function e(w,g){if(t){var v=w.deletions;v===null?(w.deletions=[g],w.flags|=16):v.push(g)}}function n(w,g){if(!t)return null;for(;g!==null;)e(w,g),g=g.sibling;return null}function r(w,g){for(w=new Map;g!==null;)g.key!==null?w.set(g.key,g):w.set(g.index,g),g=g.sibling;return w}function i(w,g){return w=li(w,g),w.index=0,w.sibling=null,w}function s(w,g,v){return w.index=v,t?(v=w.alternate,v!==null?(v=v.index,v<g?(w.flags|=2,g):v):(w.flags|=2,g)):(w.flags|=1048576,g)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,g,v,E){return g===null||g.tag!==6?(g=pf(v,w.mode,E),g.return=w,g):(g=i(g,v),g.return=w,g)}function l(w,g,v,E){var k=v.type;return k===$s?d(w,g,v.props.children,E,v.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===zr&&Aw(k)===g.type)?(E=i(g,v.props),E.ref=ya(w,g,v),E.return=w,E):(E=fc(v.type,v.key,v.props,null,w.mode,E),E.ref=ya(w,g,v),E.return=w,E)}function u(w,g,v,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=mf(v,w.mode,E),g.return=w,g):(g=i(g,v.children||[]),g.return=w,g)}function d(w,g,v,E,k){return g===null||g.tag!==7?(g=rs(v,w.mode,E,k),g.return=w,g):(g=i(g,v),g.return=w,g)}function h(w,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=pf(""+g,w.mode,v),g.return=w,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Cu:return v=fc(g.type,g.key,g.props,null,w.mode,v),v.ref=ya(w,null,g),v.return=w,v;case zs:return g=mf(g,w.mode,v),g.return=w,g;case zr:var E=g._init;return h(w,E(g._payload),v)}if(Ca(g)||ha(g))return g=rs(g,w.mode,v,null),g.return=w,g;Uu(w,g)}return null}function f(w,g,v,E){var k=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:a(w,g,""+v,E);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Cu:return v.key===k?l(w,g,v,E):null;case zs:return v.key===k?u(w,g,v,E):null;case zr:return k=v._init,f(w,g,k(v._payload),E)}if(Ca(v)||ha(v))return k!==null?null:d(w,g,v,E,null);Uu(w,v)}return null}function y(w,g,v,E,k){if(typeof E=="string"&&E!==""||typeof E=="number")return w=w.get(v)||null,a(g,w,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Cu:return w=w.get(E.key===null?v:E.key)||null,l(g,w,E,k);case zs:return w=w.get(E.key===null?v:E.key)||null,u(g,w,E,k);case zr:var M=E._init;return y(w,g,v,M(E._payload),k)}if(Ca(E)||ha(E))return w=w.get(v)||null,d(g,w,E,k,null);Uu(g,E)}return null}function T(w,g,v,E){for(var k=null,M=null,S=g,x=g=0,C=null;S!==null&&x<v.length;x++){S.index>x?(C=S,S=null):C=S.sibling;var R=f(w,S,v[x],E);if(R===null){S===null&&(S=C);break}t&&S&&R.alternate===null&&e(w,S),g=s(R,g,x),M===null?k=R:M.sibling=R,M=R,S=C}if(x===v.length)return n(w,S),Ce&&qi(w,x),k;if(S===null){for(;x<v.length;x++)S=h(w,v[x],E),S!==null&&(g=s(S,g,x),M===null?k=S:M.sibling=S,M=S);return Ce&&qi(w,x),k}for(S=r(w,S);x<v.length;x++)C=y(S,w,x,v[x],E),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?x:C.key),g=s(C,g,x),M===null?k=C:M.sibling=C,M=C);return t&&S.forEach(function(N){return e(w,N)}),Ce&&qi(w,x),k}function b(w,g,v,E){var k=ha(v);if(typeof k!="function")throw Error(B(150));if(v=k.call(v),v==null)throw Error(B(151));for(var M=k=null,S=g,x=g=0,C=null,R=v.next();S!==null&&!R.done;x++,R=v.next()){S.index>x?(C=S,S=null):C=S.sibling;var N=f(w,S,R.value,E);if(N===null){S===null&&(S=C);break}t&&S&&N.alternate===null&&e(w,S),g=s(N,g,x),M===null?k=N:M.sibling=N,M=N,S=C}if(R.done)return n(w,S),Ce&&qi(w,x),k;if(S===null){for(;!R.done;x++,R=v.next())R=h(w,R.value,E),R!==null&&(g=s(R,g,x),M===null?k=R:M.sibling=R,M=R);return Ce&&qi(w,x),k}for(S=r(w,S);!R.done;x++,R=v.next())R=y(S,w,x,R.value,E),R!==null&&(t&&R.alternate!==null&&S.delete(R.key===null?x:R.key),g=s(R,g,x),M===null?k=R:M.sibling=R,M=R);return t&&S.forEach(function(D){return e(w,D)}),Ce&&qi(w,x),k}function I(w,g,v,E){if(typeof v=="object"&&v!==null&&v.type===$s&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Cu:e:{for(var k=v.key,M=g;M!==null;){if(M.key===k){if(k=v.type,k===$s){if(M.tag===7){n(w,M.sibling),g=i(M,v.props.children),g.return=w,w=g;break e}}else if(M.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===zr&&Aw(k)===M.type){n(w,M.sibling),g=i(M,v.props),g.ref=ya(w,M,v),g.return=w,w=g;break e}n(w,M);break}else e(w,M);M=M.sibling}v.type===$s?(g=rs(v.props.children,w.mode,E,v.key),g.return=w,w=g):(E=fc(v.type,v.key,v.props,null,w.mode,E),E.ref=ya(w,g,v),E.return=w,w=E)}return o(w);case zs:e:{for(M=v.key;g!==null;){if(g.key===M)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(w,g.sibling),g=i(g,v.children||[]),g.return=w,w=g;break e}else{n(w,g);break}else e(w,g);g=g.sibling}g=mf(v,w.mode,E),g.return=w,w=g}return o(w);case zr:return M=v._init,I(w,g,M(v._payload),E)}if(Ca(v))return T(w,g,v,E);if(ha(v))return b(w,g,v,E);Uu(w,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(w,g.sibling),g=i(g,v),g.return=w,w=g):(n(w,g),g=pf(v,w.mode,E),g.return=w,w=g),o(w)):n(w,g)}return I}var To=I1(!0),S1=I1(!1),Fc=Pi(null),Bc=null,Xs=null,Wg=null;function qg(){Wg=Xs=Bc=null}function Hg(t){var e=Fc.current;be(Fc),t._currentValue=e}function kp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function co(t,e){Bc=t,Wg=Xs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gt=!0),t.firstContext=null)}function xn(t){var e=t._currentValue;if(Wg!==t)if(t={context:t,memoizedValue:e,next:null},Xs===null){if(Bc===null)throw Error(B(308));Xs=t,Bc.dependencies={lanes:0,firstContext:t}}else Xs=Xs.next=t;return e}var Xi=null;function Gg(t){Xi===null?Xi=[t]:Xi.push(t)}function b1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Gg(e)):(n.next=i.next,i.next=n),e.interleaved=n,xr(t,r)}function xr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $r=!1;function Kg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function si(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,xr(t,n)}return i=r.interleaved,i===null?(e.next=e,Gg(r)):(e.next=i.next,i.next=e),r.interleaved=e,xr(t,n)}function ac(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dg(t,n)}}function kw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zc(t,e,n,r){var i=t.updateQueue;$r=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var f=a.lane,y=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,b=a;switch(f=e,y=n,b.tag){case 1:if(T=b.payload,typeof T=="function"){h=T.call(y,h,f);break e}h=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=b.payload,f=typeof T=="function"?T.call(y,h,f):T,f==null)break e;h=De({},h,f);break e;case 2:$r=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=y,l=h):d=d.next=y,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ds|=o,t.lanes=o,t.memoizedState=h}}function Rw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var Wl={},Hn=Pi(Wl),yl=Pi(Wl),vl=Pi(Wl);function Ji(t){if(t===Wl)throw Error(B(174));return t}function Yg(t,e){switch(Te(vl,e),Te(yl,t),Te(Hn,Wl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:cp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=cp(e,t)}be(Hn),Te(Hn,e)}function xo(){be(Hn),be(yl),be(vl)}function C1(t){Ji(vl.current);var e=Ji(Hn.current),n=cp(e,t.type);e!==n&&(Te(yl,t),Te(Hn,n))}function Qg(t){yl.current===t&&(be(Hn),be(yl))}var ke=Pi(0);function $c(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lf=[];function Xg(){for(var t=0;t<lf.length;t++)lf[t]._workInProgressVersionPrimary=null;lf.length=0}var lc=Cr.ReactCurrentDispatcher,uf=Cr.ReactCurrentBatchConfig,cs=0,Ne=null,Ze=null,it=null,Wc=!1,$a=!1,_l=0,yR=0;function vt(){throw Error(B(321))}function Jg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nn(t[n],e[n]))return!1;return!0}function Zg(t,e,n,r,i,s){if(cs=s,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lc.current=t===null||t.memoizedState===null?TR:xR,t=n(r,i),$a){s=0;do{if($a=!1,_l=0,25<=s)throw Error(B(301));s+=1,it=Ze=null,e.updateQueue=null,lc.current=ER,t=n(r,i)}while($a)}if(lc.current=qc,e=Ze!==null&&Ze.next!==null,cs=0,it=Ze=Ne=null,Wc=!1,e)throw Error(B(300));return t}function ey(){var t=_l!==0;return _l=0,t}function zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Ne.memoizedState=it=t:it=it.next=t,it}function En(){if(Ze===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var e=it===null?Ne.memoizedState:it.next;if(e!==null)it=e,Ze=t;else{if(t===null)throw Error(B(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},it===null?Ne.memoizedState=it=t:it=it.next=t}return it}function wl(t,e){return typeof e=="function"?e(t):e}function cf(t){var e=En(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=Ze,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((cs&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ne.lanes|=d,ds|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Nn(r,e.memoizedState)||(Gt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ne.lanes|=s,ds|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function df(t){var e=En(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Nn(s,e.memoizedState)||(Gt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function A1(){}function k1(t,e){var n=Ne,r=En(),i=e(),s=!Nn(r.memoizedState,i);if(s&&(r.memoizedState=i,Gt=!0),r=r.queue,ty(D1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,Tl(9,N1.bind(null,n,r,i,e),void 0,null),st===null)throw Error(B(349));cs&30||R1(n,e,i)}return i}function R1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function N1(t,e,n,r){e.value=n,e.getSnapshot=r,M1(e)&&V1(t)}function D1(t,e,n){return n(function(){M1(e)&&V1(t)})}function M1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nn(t,n)}catch{return!0}}function V1(t){var e=xr(t,1);e!==null&&Rn(e,t,1,-1)}function Nw(t){var e=zn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:t},e.queue=t,t=t.dispatch=wR.bind(null,Ne,t),[e.memoizedState,t]}function Tl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function O1(){return En().memoizedState}function uc(t,e,n,r){var i=zn();Ne.flags|=t,i.memoizedState=Tl(1|e,n,void 0,r===void 0?null:r)}function Od(t,e,n,r){var i=En();r=r===void 0?null:r;var s=void 0;if(Ze!==null){var o=Ze.memoizedState;if(s=o.destroy,r!==null&&Jg(r,o.deps)){i.memoizedState=Tl(e,n,s,r);return}}Ne.flags|=t,i.memoizedState=Tl(1|e,n,s,r)}function Dw(t,e){return uc(8390656,8,t,e)}function ty(t,e){return Od(2048,8,t,e)}function L1(t,e){return Od(4,2,t,e)}function j1(t,e){return Od(4,4,t,e)}function U1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function F1(t,e,n){return n=n!=null?n.concat([t]):null,Od(4,4,U1.bind(null,e,t),n)}function ny(){}function B1(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function z1(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Jg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $1(t,e,n){return cs&21?(Nn(n,e)||(n=KE(),Ne.lanes|=n,ds|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gt=!0),t.memoizedState=n)}function vR(t,e){var n=ye;ye=n!==0&&4>n?n:4,t(!0);var r=uf.transition;uf.transition={};try{t(!1),e()}finally{ye=n,uf.transition=r}}function W1(){return En().memoizedState}function _R(t,e,n){var r=ai(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},q1(t))H1(e,n);else if(n=b1(t,e,n,r),n!==null){var i=Vt();Rn(n,t,r,i),G1(n,e,r)}}function wR(t,e,n){var r=ai(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(q1(t))H1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Nn(a,o)){var l=e.interleaved;l===null?(i.next=i,Gg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=b1(t,e,i,r),n!==null&&(i=Vt(),Rn(n,t,r,i),G1(n,e,r))}}function q1(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function H1(t,e){$a=Wc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function G1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Dg(t,n)}}var qc={readContext:xn,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},TR={readContext:xn,useCallback:function(t,e){return zn().memoizedState=[t,e===void 0?null:e],t},useContext:xn,useEffect:Dw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,uc(4194308,4,U1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return uc(4194308,4,t,e)},useInsertionEffect:function(t,e){return uc(4,2,t,e)},useMemo:function(t,e){var n=zn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=_R.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=zn();return t={current:t},e.memoizedState=t},useState:Nw,useDebugValue:ny,useDeferredValue:function(t){return zn().memoizedState=t},useTransition:function(){var t=Nw(!1),e=t[0];return t=vR.bind(null,t[1]),zn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,i=zn();if(Ce){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),st===null)throw Error(B(349));cs&30||R1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Dw(D1.bind(null,r,s,t),[t]),r.flags|=2048,Tl(9,N1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=zn(),e=st.identifierPrefix;if(Ce){var n=cr,r=ur;n=(r&~(1<<32-kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_l++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xR={readContext:xn,useCallback:B1,useContext:xn,useEffect:ty,useImperativeHandle:F1,useInsertionEffect:L1,useLayoutEffect:j1,useMemo:z1,useReducer:cf,useRef:O1,useState:function(){return cf(wl)},useDebugValue:ny,useDeferredValue:function(t){var e=En();return $1(e,Ze.memoizedState,t)},useTransition:function(){var t=cf(wl)[0],e=En().memoizedState;return[t,e]},useMutableSource:A1,useSyncExternalStore:k1,useId:W1,unstable_isNewReconciler:!1},ER={readContext:xn,useCallback:B1,useContext:xn,useEffect:ty,useImperativeHandle:F1,useInsertionEffect:L1,useLayoutEffect:j1,useMemo:z1,useReducer:df,useRef:O1,useState:function(){return df(wl)},useDebugValue:ny,useDeferredValue:function(t){var e=En();return Ze===null?e.memoizedState=t:$1(e,Ze.memoizedState,t)},useTransition:function(){var t=df(wl)[0],e=En().memoizedState;return[t,e]},useMutableSource:A1,useSyncExternalStore:k1,useId:W1,unstable_isNewReconciler:!1};function bn(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Rp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ld={isMounted:function(t){return(t=t._reactInternals)?xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Vt(),i=ai(t),s=pr(r,i);s.payload=e,n!=null&&(s.callback=n),e=si(t,s,i),e!==null&&(Rn(e,t,i,r),ac(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Vt(),i=ai(t),s=pr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=si(t,s,i),e!==null&&(Rn(e,t,i,r),ac(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vt(),r=ai(t),i=pr(n,r);i.tag=2,e!=null&&(i.callback=e),e=si(t,i,r),e!==null&&(Rn(e,t,r,n),ac(e,t,r))}};function Mw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!fl(n,r)||!fl(i,s):!0}function K1(t,e,n){var r=!1,i=gi,s=e.contextType;return typeof s=="object"&&s!==null?s=xn(s):(i=Yt(e)?ls:Pt.current,r=e.contextTypes,s=(r=r!=null)?_o(t,i):gi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ld,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Vw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ld.enqueueReplaceState(e,e.state,null)}function Np(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Kg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=xn(s):(s=Yt(e)?ls:Pt.current,i.context=_o(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Rp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ld.enqueueReplaceState(i,i.state,null),zc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Eo(t,e){try{var n="",r=e;do n+=XA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function hf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IR=typeof WeakMap=="function"?WeakMap:Map;function Y1(t,e,n){n=pr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gc||(Gc=!0,$p=r),Dp(t,e)},n}function Q1(t,e,n){n=pr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Dp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Dp(t,e),typeof r!="function"&&(oi===null?oi=new Set([this]):oi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ow(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new IR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=jR.bind(null,t,e,n),e.then(t,t))}function Lw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=pr(-1,1),e.tag=2,si(n,e,1))),n.lanes|=1),t)}var SR=Cr.ReactCurrentOwner,Gt=!1;function Dt(t,e,n,r){e.child=t===null?S1(e,null,n,r):To(e,t.child,n,r)}function Uw(t,e,n,r,i){n=n.render;var s=e.ref;return co(e,i),r=Zg(t,e,n,r,s,i),n=ey(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Er(t,e,i)):(Ce&&n&&Bg(e),e.flags|=1,Dt(t,e,r,i),e.child)}function Fw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!cy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,X1(t,e,s,r,i)):(t=fc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:fl,n(o,r)&&t.ref===e.ref)return Er(t,e,i)}return e.flags|=1,t=li(s,r),t.ref=e.ref,t.return=e,e.child=t}function X1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(fl(s,r)&&t.ref===e.ref)if(Gt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Gt=!0);else return e.lanes=t.lanes,Er(t,e,i)}return Mp(t,e,n,r,i)}function J1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Zs,tn),tn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Zs,tn),tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Te(Zs,tn),tn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Te(Zs,tn),tn|=r;return Dt(t,e,i,n),e.child}function Z1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Mp(t,e,n,r,i){var s=Yt(n)?ls:Pt.current;return s=_o(e,s),co(e,i),n=Zg(t,e,n,r,s,i),r=ey(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Er(t,e,i)):(Ce&&r&&Bg(e),e.flags|=1,Dt(t,e,n,i),e.child)}function Bw(t,e,n,r,i){if(Yt(n)){var s=!0;Lc(e)}else s=!1;if(co(e,i),e.stateNode===null)cc(t,e),K1(e,n,r),Np(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=xn(u):(u=Yt(n)?ls:Pt.current,u=_o(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Vw(e,o,r,u),$r=!1;var f=e.memoizedState;o.state=f,zc(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Kt.current||$r?(typeof d=="function"&&(Rp(e,n,d,r),l=e.memoizedState),(a=$r||Mw(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,P1(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:bn(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=xn(l):(l=Yt(n)?ls:Pt.current,l=_o(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Vw(e,o,r,l),$r=!1,f=e.memoizedState,o.state=f,zc(e,r,o,i);var T=e.memoizedState;a!==h||f!==T||Kt.current||$r?(typeof y=="function"&&(Rp(e,n,y,r),T=e.memoizedState),(u=$r||Mw(e,n,u,r,f,T,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Vp(t,e,n,r,s,i)}function Vp(t,e,n,r,i,s){Z1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&bw(e,n,!1),Er(t,e,s);r=e.stateNode,SR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=To(e,t.child,null,s),e.child=To(e,null,a,s)):Dt(t,e,a,s),e.memoizedState=r.state,i&&bw(e,n,!0),e.child}function eI(t){var e=t.stateNode;e.pendingContext?Sw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sw(t,e.context,!1),Yg(t,e.containerInfo)}function zw(t,e,n,r,i){return wo(),$g(i),e.flags|=256,Dt(t,e,n,r),e.child}var Op={dehydrated:null,treeContext:null,retryLane:0};function Lp(t){return{baseLanes:t,cachePool:null,transitions:null}}function tI(t,e,n){var r=e.pendingProps,i=ke.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Te(ke,i&1),t===null)return Ap(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Fd(o,r,0,null),t=rs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Lp(n),e.memoizedState=Op,t):ry(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return bR(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=li(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=li(a,s):(s=rs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Lp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Op,r}return s=t.child,t=s.sibling,r=li(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ry(t,e){return e=Fd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fu(t,e,n,r){return r!==null&&$g(r),To(e,t.child,null,n),t=ry(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=hf(Error(B(422))),Fu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Fd({mode:"visible",children:r.children},i,0,null),s=rs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&To(e,t.child,null,o),e.child.memoizedState=Lp(o),e.memoizedState=Op,s);if(!(e.mode&1))return Fu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(B(419)),r=hf(s,r,void 0),Fu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Gt||a){if(r=st,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,xr(t,i),Rn(r,t,i,-1))}return uy(),r=hf(Error(B(421))),Fu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=UR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,rn=ii(i.nextSibling),on=e,Ce=!0,Cn=null,t!==null&&(gn[yn++]=ur,gn[yn++]=cr,gn[yn++]=us,ur=t.id,cr=t.overflow,us=e),e=ry(e,r.children),e.flags|=4096,e)}function $w(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),kp(t.return,e,n)}function ff(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function nI(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Dt(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$w(t,n,e);else if(t.tag===19)$w(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$c(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ff(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$c(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ff(e,!0,n,null,s);break;case"together":ff(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Er(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ds|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=li(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=li(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function PR(t,e,n){switch(e.tag){case 3:eI(e),wo();break;case 5:C1(e);break;case 1:Yt(e.type)&&Lc(e);break;case 4:Yg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Te(Fc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?tI(t,e,n):(Te(ke,ke.current&1),t=Er(t,e,n),t!==null?t.sibling:null);Te(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Te(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,J1(t,e,n)}return Er(t,e,n)}var rI,jp,iI,sI;rI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jp=function(){};iI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ji(Hn.current);var s=null;switch(n){case"input":i=op(t,i),r=op(t,r),s=[];break;case"select":i=De({},i,{value:void 0}),r=De({},r,{value:void 0}),s=[];break;case"textarea":i=up(t,i),r=up(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vc)}dp(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ol.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ol.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ie("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};sI=function(t,e,n,r){n!==r&&(e.flags|=4)};function va(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function CR(t,e,n){var r=e.pendingProps;switch(zg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return Yt(e.type)&&Oc(),_t(e),null;case 3:return r=e.stateNode,xo(),be(Kt),be(Pt),Xg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ju(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Cn!==null&&(Hp(Cn),Cn=null))),jp(t,e),_t(e),null;case 5:Qg(e);var i=Ji(vl.current);if(n=e.type,t!==null&&e.stateNode!=null)iI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return _t(e),null}if(t=Ji(Hn.current),ju(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Wn]=e,r[gl]=s,t=(e.mode&1)!==0,n){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(i=0;i<ka.length;i++)Ie(ka[i],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":J_(r,s),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ie("invalid",r);break;case"textarea":ew(r,s),Ie("invalid",r)}dp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Lu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Lu(r.textContent,a,t),i=["children",""+a]):ol.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ie("scroll",r)}switch(n){case"input":Au(r),Z_(r,s,!0);break;case"textarea":Au(r),tw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Vc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=DE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Wn]=e,t[gl]=r,rI(t,e,!1,!1),e.stateNode=t;e:{switch(o=hp(n,r),n){case"dialog":Ie("cancel",t),Ie("close",t),i=r;break;case"iframe":case"object":case"embed":Ie("load",t),i=r;break;case"video":case"audio":for(i=0;i<ka.length;i++)Ie(ka[i],t);i=r;break;case"source":Ie("error",t),i=r;break;case"img":case"image":case"link":Ie("error",t),Ie("load",t),i=r;break;case"details":Ie("toggle",t),i=r;break;case"input":J_(t,r),i=op(t,r),Ie("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=De({},r,{value:void 0}),Ie("invalid",t);break;case"textarea":ew(t,r),i=up(t,r),Ie("invalid",t);break;default:i=r}dp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?OE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ME(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&al(t,l):typeof l=="number"&&al(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ol.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ie("scroll",t):l!=null&&Pg(t,s,l,o))}switch(n){case"input":Au(t),Z_(t,r,!1);break;case"textarea":Au(t),tw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+mi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?oo(t,!!r.multiple,s,!1):r.defaultValue!=null&&oo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Vc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)sI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Ji(vl.current),Ji(Hn.current),ju(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wn]=e,(s=r.nodeValue!==n)&&(t=on,t!==null))switch(t.tag){case 3:Lu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wn]=e,e.stateNode=r}return _t(e),null;case 13:if(be(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&rn!==null&&e.mode&1&&!(e.flags&128))E1(),wo(),e.flags|=98560,s=!1;else if(s=ju(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[Wn]=e}else wo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),s=!1}else Cn!==null&&(Hp(Cn),Cn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?et===0&&(et=3):uy())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return xo(),jp(t,e),t===null&&pl(e.stateNode.containerInfo),_t(e),null;case 10:return Hg(e.type._context),_t(e),null;case 17:return Yt(e.type)&&Oc(),_t(e),null;case 19:if(be(ke),s=e.memoizedState,s===null)return _t(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)va(s,!1);else{if(et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$c(t),o!==null){for(e.flags|=128,va(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(ke,ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&Be()>Io&&(e.flags|=128,r=!0,va(s,!1),e.lanes=4194304)}else{if(!r)if(t=$c(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),va(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ce)return _t(e),null}else 2*Be()-s.renderingStartTime>Io&&n!==1073741824&&(e.flags|=128,r=!0,va(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Be(),e.sibling=null,n=ke.current,Te(ke,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return ly(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tn&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function AR(t,e){switch(zg(e),e.tag){case 1:return Yt(e.type)&&Oc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return xo(),be(Kt),be(Pt),Xg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qg(e),null;case 13:if(be(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));wo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(ke),null;case 4:return xo(),null;case 10:return Hg(e.type._context),null;case 22:case 23:return ly(),null;case 24:return null;default:return null}}var Bu=!1,It=!1,kR=typeof WeakSet=="function"?WeakSet:Set,K=null;function Js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function Up(t,e,n){try{n()}catch(r){je(t,e,r)}}var Ww=!1;function RR(t,e){if(xp=Nc,t=c1(),Fg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,f=null;t:for(;;){for(var y;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)f=h,h=y;for(;;){if(h===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++d===r&&(l=o),(y=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ep={focusedElem:t,selectionRange:n},Nc=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var b=T.memoizedProps,I=T.memoizedState,w=e.stateNode,g=w.getSnapshotBeforeUpdate(e.elementType===e.type?b:bn(e.type,b),I);w.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(E){je(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return T=Ww,Ww=!1,T}function Wa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Up(e,n,s)}i=i.next}while(i!==r)}}function jd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Fp(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function oI(t){var e=t.alternate;e!==null&&(t.alternate=null,oI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wn],delete e[gl],delete e[bp],delete e[fR],delete e[pR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function aI(t){return t.tag===5||t.tag===3||t.tag===4}function qw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||aI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vc));else if(r!==4&&(t=t.child,t!==null))for(Bp(t,e,n),t=t.sibling;t!==null;)Bp(t,e,n),t=t.sibling}function zp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(zp(t,e,n),t=t.sibling;t!==null;)zp(t,e,n),t=t.sibling}var ut=null,Pn=!1;function Ur(t,e,n){for(n=n.child;n!==null;)lI(t,e,n),n=n.sibling}function lI(t,e,n){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(kd,n)}catch{}switch(n.tag){case 5:It||Js(n,e);case 6:var r=ut,i=Pn;ut=null,Ur(t,e,n),ut=r,Pn=i,ut!==null&&(Pn?(t=ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(Pn?(t=ut,n=n.stateNode,t.nodeType===8?of(t.parentNode,n):t.nodeType===1&&of(t,n),dl(t)):of(ut,n.stateNode));break;case 4:r=ut,i=Pn,ut=n.stateNode.containerInfo,Pn=!0,Ur(t,e,n),ut=r,Pn=i;break;case 0:case 11:case 14:case 15:if(!It&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Up(n,e,o),i=i.next}while(i!==r)}Ur(t,e,n);break;case 1:if(!It&&(Js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){je(n,e,a)}Ur(t,e,n);break;case 21:Ur(t,e,n);break;case 22:n.mode&1?(It=(r=It)||n.memoizedState!==null,Ur(t,e,n),It=r):Ur(t,e,n);break;default:Ur(t,e,n)}}function Hw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kR),e.forEach(function(r){var i=FR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Sn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ut=a.stateNode,Pn=!1;break e;case 3:ut=a.stateNode.containerInfo,Pn=!0;break e;case 4:ut=a.stateNode.containerInfo,Pn=!0;break e}a=a.return}if(ut===null)throw Error(B(160));lI(s,o,i),ut=null,Pn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){je(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uI(e,t),e=e.sibling}function uI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sn(e,t),Fn(t),r&4){try{Wa(3,t,t.return),jd(3,t)}catch(b){je(t,t.return,b)}try{Wa(5,t,t.return)}catch(b){je(t,t.return,b)}}break;case 1:Sn(e,t),Fn(t),r&512&&n!==null&&Js(n,n.return);break;case 5:if(Sn(e,t),Fn(t),r&512&&n!==null&&Js(n,n.return),t.flags&32){var i=t.stateNode;try{al(i,"")}catch(b){je(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&RE(i,s),hp(a,o);var u=hp(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?OE(i,h):d==="dangerouslySetInnerHTML"?ME(i,h):d==="children"?al(i,h):Pg(i,d,h,u)}switch(a){case"input":ap(i,s);break;case"textarea":NE(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?oo(i,!!s.multiple,y,!1):f!==!!s.multiple&&(s.defaultValue!=null?oo(i,!!s.multiple,s.defaultValue,!0):oo(i,!!s.multiple,s.multiple?[]:"",!1))}i[gl]=s}catch(b){je(t,t.return,b)}}break;case 6:if(Sn(e,t),Fn(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(b){je(t,t.return,b)}}break;case 3:if(Sn(e,t),Fn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{dl(e.containerInfo)}catch(b){je(t,t.return,b)}break;case 4:Sn(e,t),Fn(t);break;case 13:Sn(e,t),Fn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(oy=Be())),r&4&&Hw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(It=(u=It)||d,Sn(e,t),It=u):Sn(e,t),Fn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(K=t,d=t.child;d!==null;){for(h=K=d;K!==null;){switch(f=K,y=f.child,f.tag){case 0:case 11:case 14:case 15:Wa(4,f,f.return);break;case 1:Js(f,f.return);var T=f.stateNode;if(typeof T.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(b){je(r,n,b)}}break;case 5:Js(f,f.return);break;case 22:if(f.memoizedState!==null){Kw(h);continue}}y!==null?(y.return=f,K=y):Kw(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=VE("display",o))}catch(b){je(t,t.return,b)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(b){je(t,t.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Sn(e,t),Fn(t),r&4&&Hw(t);break;case 21:break;default:Sn(e,t),Fn(t)}}function Fn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(aI(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(al(i,""),r.flags&=-33);var s=qw(t);zp(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=qw(t);Bp(t,a,o);break;default:throw Error(B(161))}}catch(l){je(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NR(t,e,n){K=t,cI(t)}function cI(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Bu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||It;a=Bu;var u=It;if(Bu=o,(It=l)&&!u)for(K=i;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?Yw(i):l!==null?(l.return=o,K=l):Yw(i);for(;s!==null;)K=s,cI(s),s=s.sibling;K=i,Bu=a,It=u}Gw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,K=s):Gw(t)}}function Gw(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:It||jd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!It)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:bn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Rw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Rw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&dl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}It||e.flags&512&&Fp(e)}catch(f){je(e,e.return,f)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Kw(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Yw(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{jd(4,e)}catch(l){je(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){je(e,i,l)}}var s=e.return;try{Fp(e)}catch(l){je(e,s,l)}break;case 5:var o=e.return;try{Fp(e)}catch(l){je(e,o,l)}}}catch(l){je(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var DR=Math.ceil,Hc=Cr.ReactCurrentDispatcher,iy=Cr.ReactCurrentOwner,Tn=Cr.ReactCurrentBatchConfig,fe=0,st=null,Ge=null,ht=0,tn=0,Zs=Pi(0),et=0,xl=null,ds=0,Ud=0,sy=0,qa=null,qt=null,oy=0,Io=1/0,ar=null,Gc=!1,$p=null,oi=null,zu=!1,Jr=null,Kc=0,Ha=0,Wp=null,dc=-1,hc=0;function Vt(){return fe&6?Be():dc!==-1?dc:dc=Be()}function ai(t){return t.mode&1?fe&2&&ht!==0?ht&-ht:gR.transition!==null?(hc===0&&(hc=KE()),hc):(t=ye,t!==0||(t=window.event,t=t===void 0?16:t1(t.type)),t):1}function Rn(t,e,n,r){if(50<Ha)throw Ha=0,Wp=null,Error(B(185));Bl(t,n,r),(!(fe&2)||t!==st)&&(t===st&&(!(fe&2)&&(Ud|=n),et===4&&Hr(t,ht)),Qt(t,r),n===1&&fe===0&&!(e.mode&1)&&(Io=Be()+500,Vd&&Ci()))}function Qt(t,e){var n=t.callbackNode;gk(t,e);var r=Rc(t,t===st?ht:0);if(r===0)n!==null&&iw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iw(n),e===1)t.tag===0?mR(Qw.bind(null,t)):w1(Qw.bind(null,t)),dR(function(){!(fe&6)&&Ci()}),n=null;else{switch(YE(r)){case 1:n=Ng;break;case 4:n=HE;break;case 16:n=kc;break;case 536870912:n=GE;break;default:n=kc}n=vI(n,dI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dI(t,e){if(dc=-1,hc=0,fe&6)throw Error(B(327));var n=t.callbackNode;if(ho()&&t.callbackNode!==n)return null;var r=Rc(t,t===st?ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Yc(t,r);else{e=r;var i=fe;fe|=2;var s=fI();(st!==t||ht!==e)&&(ar=null,Io=Be()+500,ns(t,e));do try{OR();break}catch(a){hI(t,a)}while(!0);qg(),Hc.current=s,fe=i,Ge!==null?e=0:(st=null,ht=0,e=et)}if(e!==0){if(e===2&&(i=yp(t),i!==0&&(r=i,e=qp(t,i))),e===1)throw n=xl,ns(t,0),Hr(t,r),Qt(t,Be()),n;if(e===6)Hr(t,r);else{if(i=t.current.alternate,!(r&30)&&!MR(i)&&(e=Yc(t,r),e===2&&(s=yp(t),s!==0&&(r=s,e=qp(t,s))),e===1))throw n=xl,ns(t,0),Hr(t,r),Qt(t,Be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:Hi(t,qt,ar);break;case 3:if(Hr(t,r),(r&130023424)===r&&(e=oy+500-Be(),10<e)){if(Rc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Vt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Sp(Hi.bind(null,t,qt,ar),e);break}Hi(t,qt,ar);break;case 4:if(Hr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-kn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*DR(r/1960))-r,10<r){t.timeoutHandle=Sp(Hi.bind(null,t,qt,ar),r);break}Hi(t,qt,ar);break;case 5:Hi(t,qt,ar);break;default:throw Error(B(329))}}}return Qt(t,Be()),t.callbackNode===n?dI.bind(null,t):null}function qp(t,e){var n=qa;return t.current.memoizedState.isDehydrated&&(ns(t,e).flags|=256),t=Yc(t,e),t!==2&&(e=qt,qt=n,e!==null&&Hp(e)),t}function Hp(t){qt===null?qt=t:qt.push.apply(qt,t)}function MR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Nn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hr(t,e){for(e&=~sy,e&=~Ud,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-kn(e),r=1<<n;t[n]=-1,e&=~r}}function Qw(t){if(fe&6)throw Error(B(327));ho();var e=Rc(t,0);if(!(e&1))return Qt(t,Be()),null;var n=Yc(t,e);if(t.tag!==0&&n===2){var r=yp(t);r!==0&&(e=r,n=qp(t,r))}if(n===1)throw n=xl,ns(t,0),Hr(t,e),Qt(t,Be()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Hi(t,qt,ar),Qt(t,Be()),null}function ay(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(Io=Be()+500,Vd&&Ci())}}function hs(t){Jr!==null&&Jr.tag===0&&!(fe&6)&&ho();var e=fe;fe|=1;var n=Tn.transition,r=ye;try{if(Tn.transition=null,ye=1,t)return t()}finally{ye=r,Tn.transition=n,fe=e,!(fe&6)&&Ci()}}function ly(){tn=Zs.current,be(Zs)}function ns(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cR(n)),Ge!==null)for(n=Ge.return;n!==null;){var r=n;switch(zg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Oc();break;case 3:xo(),be(Kt),be(Pt),Xg();break;case 5:Qg(r);break;case 4:xo();break;case 13:be(ke);break;case 19:be(ke);break;case 10:Hg(r.type._context);break;case 22:case 23:ly()}n=n.return}if(st=t,Ge=t=li(t.current,null),ht=tn=e,et=0,xl=null,sy=Ud=ds=0,qt=qa=null,Xi!==null){for(e=0;e<Xi.length;e++)if(n=Xi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Xi=null}return t}function hI(t,e){do{var n=Ge;try{if(qg(),lc.current=qc,Wc){for(var r=Ne.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wc=!1}if(cs=0,it=Ze=Ne=null,$a=!1,_l=0,iy.current=null,n===null||n.return===null){et=1,xl=e,Ge=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=ht,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=Lw(o);if(y!==null){y.flags&=-257,jw(y,o,a,s,e),y.mode&1&&Ow(s,u,e),e=y,l=u;var T=e.updateQueue;if(T===null){var b=new Set;b.add(l),e.updateQueue=b}else T.add(l);break e}else{if(!(e&1)){Ow(s,u,e),uy();break e}l=Error(B(426))}}else if(Ce&&a.mode&1){var I=Lw(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),jw(I,o,a,s,e),$g(Eo(l,a));break e}}s=l=Eo(l,a),et!==4&&(et=2),qa===null?qa=[s]:qa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Y1(s,l,e);kw(s,w);break e;case 1:a=l;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(oi===null||!oi.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=Q1(s,a,e);kw(s,E);break e}}s=s.return}while(s!==null)}mI(n)}catch(k){e=k,Ge===n&&n!==null&&(Ge=n=n.return);continue}break}while(!0)}function fI(){var t=Hc.current;return Hc.current=qc,t===null?qc:t}function uy(){(et===0||et===3||et===2)&&(et=4),st===null||!(ds&268435455)&&!(Ud&268435455)||Hr(st,ht)}function Yc(t,e){var n=fe;fe|=2;var r=fI();(st!==t||ht!==e)&&(ar=null,ns(t,e));do try{VR();break}catch(i){hI(t,i)}while(!0);if(qg(),fe=n,Hc.current=r,Ge!==null)throw Error(B(261));return st=null,ht=0,et}function VR(){for(;Ge!==null;)pI(Ge)}function OR(){for(;Ge!==null&&!ak();)pI(Ge)}function pI(t){var e=yI(t.alternate,t,tn);t.memoizedProps=t.pendingProps,e===null?mI(t):Ge=e,iy.current=null}function mI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=AR(n,e),n!==null){n.flags&=32767,Ge=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{et=6,Ge=null;return}}else if(n=CR(n,e,tn),n!==null){Ge=n;return}if(e=e.sibling,e!==null){Ge=e;return}Ge=e=t}while(e!==null);et===0&&(et=5)}function Hi(t,e,n){var r=ye,i=Tn.transition;try{Tn.transition=null,ye=1,LR(t,e,n,r)}finally{Tn.transition=i,ye=r}return null}function LR(t,e,n,r){do ho();while(Jr!==null);if(fe&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(yk(t,s),t===st&&(Ge=st=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zu||(zu=!0,vI(kc,function(){return ho(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Tn.transition,Tn.transition=null;var o=ye;ye=1;var a=fe;fe|=4,iy.current=null,RR(t,n),uI(n,t),rR(Ep),Nc=!!xp,Ep=xp=null,t.current=n,NR(n),lk(),fe=a,ye=o,Tn.transition=s}else t.current=n;if(zu&&(zu=!1,Jr=t,Kc=i),s=t.pendingLanes,s===0&&(oi=null),dk(n.stateNode),Qt(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gc)throw Gc=!1,t=$p,$p=null,t;return Kc&1&&t.tag!==0&&ho(),s=t.pendingLanes,s&1?t===Wp?Ha++:(Ha=0,Wp=t):Ha=0,Ci(),null}function ho(){if(Jr!==null){var t=YE(Kc),e=Tn.transition,n=ye;try{if(Tn.transition=null,ye=16>t?16:t,Jr===null)var r=!1;else{if(t=Jr,Jr=null,Kc=0,fe&6)throw Error(B(331));var i=fe;for(fe|=4,K=t.current;K!==null;){var s=K,o=s.child;if(K.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(K=u;K!==null;){var d=K;switch(d.tag){case 0:case 11:case 15:Wa(8,d,s)}var h=d.child;if(h!==null)h.return=d,K=h;else for(;K!==null;){d=K;var f=d.sibling,y=d.return;if(oI(d),d===u){K=null;break}if(f!==null){f.return=y,K=f;break}K=y}}}var T=s.alternate;if(T!==null){var b=T.child;if(b!==null){T.child=null;do{var I=b.sibling;b.sibling=null,b=I}while(b!==null)}}K=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,K=o;else e:for(;K!==null;){if(s=K,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Wa(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,K=w;break e}K=s.return}}var g=t.current;for(K=g;K!==null;){o=K;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,K=v;else e:for(o=g;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:jd(9,a)}}catch(k){je(a,a.return,k)}if(a===o){K=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,K=E;break e}K=a.return}}if(fe=i,Ci(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(kd,t)}catch{}r=!0}return r}finally{ye=n,Tn.transition=e}}return!1}function Xw(t,e,n){e=Eo(n,e),e=Y1(t,e,1),t=si(t,e,1),e=Vt(),t!==null&&(Bl(t,1,e),Qt(t,e))}function je(t,e,n){if(t.tag===3)Xw(t,t,n);else for(;e!==null;){if(e.tag===3){Xw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oi===null||!oi.has(r))){t=Eo(n,t),t=Q1(e,t,1),e=si(e,t,1),t=Vt(),e!==null&&(Bl(e,1,t),Qt(e,t));break}}e=e.return}}function jR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Vt(),t.pingedLanes|=t.suspendedLanes&n,st===t&&(ht&n)===n&&(et===4||et===3&&(ht&130023424)===ht&&500>Be()-oy?ns(t,0):sy|=n),Qt(t,e)}function gI(t,e){e===0&&(t.mode&1?(e=Nu,Nu<<=1,!(Nu&130023424)&&(Nu=4194304)):e=1);var n=Vt();t=xr(t,e),t!==null&&(Bl(t,e,n),Qt(t,n))}function UR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gI(t,n)}function FR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),gI(t,n)}var yI;yI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kt.current)Gt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Gt=!1,PR(t,e,n);Gt=!!(t.flags&131072)}else Gt=!1,Ce&&e.flags&1048576&&T1(e,Uc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;cc(t,e),t=e.pendingProps;var i=_o(e,Pt.current);co(e,n),i=Zg(null,e,r,t,i,n);var s=ey();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(r)?(s=!0,Lc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Kg(e),i.updater=Ld,e.stateNode=i,i._reactInternals=e,Np(e,r,t,n),e=Vp(null,e,r,!0,s,n)):(e.tag=0,Ce&&s&&Bg(e),Dt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(cc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=zR(r),t=bn(r,t),i){case 0:e=Mp(null,e,r,t,n);break e;case 1:e=Bw(null,e,r,t,n);break e;case 11:e=Uw(null,e,r,t,n);break e;case 14:e=Fw(null,e,r,bn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),Mp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),Bw(t,e,r,i,n);case 3:e:{if(eI(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,P1(t,e),zc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Eo(Error(B(423)),e),e=zw(t,e,r,n,i);break e}else if(r!==i){i=Eo(Error(B(424)),e),e=zw(t,e,r,n,i);break e}else for(rn=ii(e.stateNode.containerInfo.firstChild),on=e,Ce=!0,Cn=null,n=S1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wo(),r===i){e=Er(t,e,n);break e}Dt(t,e,r,n)}e=e.child}return e;case 5:return C1(e),t===null&&Ap(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ip(r,i)?o=null:s!==null&&Ip(r,s)&&(e.flags|=32),Z1(t,e),Dt(t,e,o,n),e.child;case 6:return t===null&&Ap(e),null;case 13:return tI(t,e,n);case 4:return Yg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=To(e,null,r,n):Dt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),Uw(t,e,r,i,n);case 7:return Dt(t,e,e.pendingProps,n),e.child;case 8:return Dt(t,e,e.pendingProps.children,n),e.child;case 12:return Dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Te(Fc,r._currentValue),r._currentValue=o,s!==null)if(Nn(s.value,o)){if(s.children===i.children&&!Kt.current){e=Er(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=pr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),kp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),kp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Dt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,co(e,n),i=xn(i),r=r(i),e.flags|=1,Dt(t,e,r,n),e.child;case 14:return r=e.type,i=bn(r,e.pendingProps),i=bn(r.type,i),Fw(t,e,r,i,n);case 15:return X1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),cc(t,e),e.tag=1,Yt(r)?(t=!0,Lc(e)):t=!1,co(e,n),K1(e,r,i),Np(e,r,i,n),Vp(null,e,r,!0,t,n);case 19:return nI(t,e,n);case 22:return J1(t,e,n)}throw Error(B(156,e.tag))};function vI(t,e){return qE(t,e)}function BR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,e,n,r){return new BR(t,e,n,r)}function cy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zR(t){if(typeof t=="function")return cy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ag)return 11;if(t===kg)return 14}return 2}function li(t,e){var n=t.alternate;return n===null?(n=_n(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")cy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $s:return rs(n.children,i,s,e);case Cg:o=8,i|=8;break;case np:return t=_n(12,n,e,i|2),t.elementType=np,t.lanes=s,t;case rp:return t=_n(13,n,e,i),t.elementType=rp,t.lanes=s,t;case ip:return t=_n(19,n,e,i),t.elementType=ip,t.lanes=s,t;case CE:return Fd(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bE:o=10;break e;case PE:o=9;break e;case Ag:o=11;break e;case kg:o=14;break e;case zr:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=_n(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function rs(t,e,n,r){return t=_n(7,t,r,e),t.lanes=n,t}function Fd(t,e,n,r){return t=_n(22,t,r,e),t.elementType=CE,t.lanes=n,t.stateNode={isHidden:!1},t}function pf(t,e,n){return t=_n(6,t,null,e),t.lanes=n,t}function mf(t,e,n){return e=_n(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $R(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kh(0),this.expirationTimes=Kh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function dy(t,e,n,r,i,s,o,a,l){return t=new $R(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=_n(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kg(s),t}function WR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _I(t){if(!t)return gi;t=t._reactInternals;e:{if(xs(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Yt(n))return _1(t,n,e)}return e}function wI(t,e,n,r,i,s,o,a,l){return t=dy(n,r,!0,t,i,s,o,a,l),t.context=_I(null),n=t.current,r=Vt(),i=ai(n),s=pr(r,i),s.callback=e??null,si(n,s,i),t.current.lanes=i,Bl(t,i,r),Qt(t,r),t}function Bd(t,e,n,r){var i=e.current,s=Vt(),o=ai(i);return n=_I(n),e.context===null?e.context=n:e.pendingContext=n,e=pr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=si(i,e,o),t!==null&&(Rn(t,i,o,s),ac(t,i,o)),o}function Qc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hy(t,e){Jw(t,e),(t=t.alternate)&&Jw(t,e)}function qR(){return null}var TI=typeof reportError=="function"?reportError:function(t){console.error(t)};function fy(t){this._internalRoot=t}zd.prototype.render=fy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Bd(t,e,null,null)};zd.prototype.unmount=fy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;hs(function(){Bd(null,t,null,null)}),e[Tr]=null}};function zd(t){this._internalRoot=t}zd.prototype.unstable_scheduleHydration=function(t){if(t){var e=JE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qr.length&&e!==0&&e<qr[n].priority;n++);qr.splice(n,0,t),n===0&&e1(t)}};function py(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zw(){}function HR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Qc(o);s.call(u)}}var o=wI(e,r,t,0,null,!1,!1,"",Zw);return t._reactRootContainer=o,t[Tr]=o.current,pl(t.nodeType===8?t.parentNode:t),hs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Qc(l);a.call(u)}}var l=dy(t,0,!1,null,null,!1,!1,"",Zw);return t._reactRootContainer=l,t[Tr]=l.current,pl(t.nodeType===8?t.parentNode:t),hs(function(){Bd(e,l,n,r)}),l}function Wd(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Qc(o);a.call(l)}}Bd(e,o,t,i)}else o=HR(n,e,t,i,r);return Qc(o)}QE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Aa(e.pendingLanes);n!==0&&(Dg(e,n|1),Qt(e,Be()),!(fe&6)&&(Io=Be()+500,Ci()))}break;case 13:hs(function(){var r=xr(t,1);if(r!==null){var i=Vt();Rn(r,t,1,i)}}),hy(t,1)}};Mg=function(t){if(t.tag===13){var e=xr(t,134217728);if(e!==null){var n=Vt();Rn(e,t,134217728,n)}hy(t,134217728)}};XE=function(t){if(t.tag===13){var e=ai(t),n=xr(t,e);if(n!==null){var r=Vt();Rn(n,t,e,r)}hy(t,e)}};JE=function(){return ye};ZE=function(t,e){var n=ye;try{return ye=t,e()}finally{ye=n}};pp=function(t,e,n){switch(e){case"input":if(ap(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Md(r);if(!i)throw Error(B(90));kE(r),ap(r,i)}}}break;case"textarea":NE(t,n);break;case"select":e=n.value,e!=null&&oo(t,!!n.multiple,e,!1)}};UE=ay;FE=hs;var GR={usingClientEntryPoint:!1,Events:[$l,Gs,Md,LE,jE,ay]},_a={findFiberByHostInstance:Qi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KR={bundleType:_a.bundleType,version:_a.version,rendererPackageName:_a.rendererPackageName,rendererConfig:_a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$E(t),t===null?null:t.stateNode},findFiberByHostInstance:_a.findFiberByHostInstance||qR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$u.isDisabled&&$u.supportsFiber)try{kd=$u.inject(KR),qn=$u}catch{}}un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GR;un.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!py(e))throw Error(B(200));return WR(t,e,null,n)};un.createRoot=function(t,e){if(!py(t))throw Error(B(299));var n=!1,r="",i=TI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=dy(t,1,!1,null,null,n,!1,r,i),t[Tr]=e.current,pl(t.nodeType===8?t.parentNode:t),new fy(e)};un.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=$E(e),t=t===null?null:t.stateNode,t};un.flushSync=function(t){return hs(t)};un.hydrate=function(t,e,n){if(!$d(e))throw Error(B(200));return Wd(null,t,e,!0,n)};un.hydrateRoot=function(t,e,n){if(!py(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=TI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=wI(e,null,t,1,n??null,i,!1,s,o),t[Tr]=e.current,pl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new zd(e)};un.render=function(t,e,n){if(!$d(e))throw Error(B(200));return Wd(null,t,e,!1,n)};un.unmountComponentAtNode=function(t){if(!$d(t))throw Error(B(40));return t._reactRootContainer?(hs(function(){Wd(null,null,t,!1,function(){t._reactRootContainer=null,t[Tr]=null})}),!0):!1};un.unstable_batchedUpdates=ay;un.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$d(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Wd(t,e,n,!1,r)};un.version="18.3.1-next-f1338f8080-20240426";function xI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xI)}catch(t){console.error(t)}}xI(),xE.exports=un;var YR=xE.exports,e0=YR;ep.createRoot=e0.createRoot,ep.hydrateRoot=e0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function El(){return El=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},El.apply(this,arguments)}var Zr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Zr||(Zr={}));const t0="popstate";function QR(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Gp("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Xc(i)}return JR(e,n,null,t)}function $e(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function EI(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XR(){return Math.random().toString(36).substr(2,8)}function n0(t,e){return{usr:t.state,key:t.key,idx:e}}function Gp(t,e,n,r){return n===void 0&&(n=null),El({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Uo(e):e,{state:n,key:e&&e.key||r||XR()})}function Xc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Uo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function JR(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Zr.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(El({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){a=Zr.Pop;let I=d(),w=I==null?null:I-u;u=I,l&&l({action:a,location:b.location,delta:w})}function f(I,w){a=Zr.Push;let g=Gp(b.location,I,w);u=d()+1;let v=n0(g,u),E=b.createHref(g);try{o.pushState(v,"",E)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(E)}s&&l&&l({action:a,location:b.location,delta:1})}function y(I,w){a=Zr.Replace;let g=Gp(b.location,I,w);u=d();let v=n0(g,u),E=b.createHref(g);o.replaceState(v,"",E),s&&l&&l({action:a,location:b.location,delta:0})}function T(I){let w=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof I=="string"?I:Xc(I);return g=g.replace(/ $/,"%20"),$e(w,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,w)}let b={get action(){return a},get location(){return t(i,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(t0,h),l=I,()=>{i.removeEventListener(t0,h),l=null}},createHref(I){return e(i,I)},createURL:T,encodeLocation(I){let w=T(I);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:f,replace:y,go(I){return o.go(I)}};return b}var r0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(r0||(r0={}));function ZR(t,e,n){return n===void 0&&(n="/"),eN(t,e,n)}function eN(t,e,n,r){let i=typeof e=="string"?Uo(e):e,s=my(i.pathname||"/",n);if(s==null)return null;let o=II(t);tN(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=fN(s);a=cN(o[l],u)}return a}function II(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&($e(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=ui([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&($e(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),II(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:lN(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of SI(s.path))i(s,o,l)}),e}function SI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=SI(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function tN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:uN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const nN=/^:[\w-]+$/,rN=3,iN=2,sN=1,oN=10,aN=-2,i0=t=>t==="*";function lN(t,e){let n=t.split("/"),r=n.length;return n.some(i0)&&(r+=aN),e&&(r+=iN),n.filter(i=>!i0(i)).reduce((i,s)=>i+(nN.test(s)?rN:s===""?sN:oN),r)}function uN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function cN(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",h=dN({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),f=l.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:ui([s,h.pathname]),pathnameBase:yN(ui([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=ui([s,h.pathnameBase]))}return o}function dN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=hN(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:y}=d;if(f==="*"){let b=a[h]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const T=a[h];return y&&!T?u[f]=void 0:u[f]=(T||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function hN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),EI(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function fN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return EI(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function my(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function pN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Uo(t):t;return{pathname:n?n.startsWith("/")?n:mN(n,e):e,search:vN(r),hash:_N(i)}}function mN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function gf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gy(t,e){let n=gN(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function yy(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Uo(t):(i=El({},t),$e(!i.pathname||!i.pathname.includes("?"),gf("?","pathname","search",i)),$e(!i.pathname||!i.pathname.includes("#"),gf("#","pathname","hash",i)),$e(!i.search||!i.search.includes("#"),gf("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=pN(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const ui=t=>t.join("/").replace(/\/\/+/g,"/"),yN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),vN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,_N=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const bI=["post","put","patch","delete"];new Set(bI);const TN=["get",...bI];new Set(TN);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Il(){return Il=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Il.apply(this,arguments)}const vy=V.createContext(null),xN=V.createContext(null),Ai=V.createContext(null),qd=V.createContext(null),Ar=V.createContext({outlet:null,matches:[],isDataRoute:!1}),PI=V.createContext(null);function EN(t,e){let{relative:n}=e===void 0?{}:e;Fo()||$e(!1);let{basename:r,navigator:i}=V.useContext(Ai),{hash:s,pathname:o,search:a}=AI(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ui([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Fo(){return V.useContext(qd)!=null}function Bo(){return Fo()||$e(!1),V.useContext(qd).location}function CI(t){V.useContext(Ai).static||V.useLayoutEffect(t)}function kr(){let{isDataRoute:t}=V.useContext(Ar);return t?LN():IN()}function IN(){Fo()||$e(!1);let t=V.useContext(vy),{basename:e,future:n,navigator:r}=V.useContext(Ai),{matches:i}=V.useContext(Ar),{pathname:s}=Bo(),o=JSON.stringify(gy(i,n.v7_relativeSplatPath)),a=V.useRef(!1);return CI(()=>{a.current=!0}),V.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=yy(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ui([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,o,s,t])}function SN(){let{matches:t}=V.useContext(Ar),e=t[t.length-1];return e?e.params:{}}function AI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(Ai),{matches:i}=V.useContext(Ar),{pathname:s}=Bo(),o=JSON.stringify(gy(i,r.v7_relativeSplatPath));return V.useMemo(()=>yy(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function bN(t,e){return PN(t,e)}function PN(t,e,n,r){Fo()||$e(!1);let{navigator:i}=V.useContext(Ai),{matches:s}=V.useContext(Ar),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Bo(),d;if(e){var h;let I=typeof e=="string"?Uo(e):e;l==="/"||(h=I.pathname)!=null&&h.startsWith(l)||$e(!1),d=I}else d=u;let f=d.pathname||"/",y=f;if(l!=="/"){let I=l.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(I.length).join("/")}let T=ZR(t,{pathname:y}),b=NN(T&&T.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:ui([l,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:ui([l,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,r);return e&&b?V.createElement(qd.Provider,{value:{location:Il({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Zr.Pop}},b):b}function CN(){let t=ON(),e=wN(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:i},n):null,null)}const AN=V.createElement(CN,null);class kN extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(Ar.Provider,{value:this.props.routeContext},V.createElement(PI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RN(t){let{routeContext:e,match:n,children:r}=t,i=V.useContext(vy);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(Ar.Provider,{value:e},r)}function NN(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);d>=0||$e(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:y}=n,T=h.route.loader&&f[h.route.id]===void 0&&(!y||y[h.route.id]===void 0);if(h.route.lazy||T){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let y,T=!1,b=null,I=null;n&&(y=a&&h.route.id?a[h.route.id]:void 0,b=h.route.errorElement||AN,l&&(u<0&&f===0?(jN("route-fallback"),T=!0,I=null):u===f&&(T=!0,I=h.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,f+1)),g=()=>{let v;return y?v=b:T?v=I:h.route.Component?v=V.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,V.createElement(RN,{match:h,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?V.createElement(kN,{location:n.location,revalidation:n.revalidation,component:b,error:y,children:g(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):g()},null)}var kI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kI||{}),RI=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(RI||{});function DN(t){let e=V.useContext(vy);return e||$e(!1),e}function MN(t){let e=V.useContext(xN);return e||$e(!1),e}function VN(t){let e=V.useContext(Ar);return e||$e(!1),e}function NI(t){let e=VN(),n=e.matches[e.matches.length-1];return n.route.id||$e(!1),n.route.id}function ON(){var t;let e=V.useContext(PI),n=MN(),r=NI();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function LN(){let{router:t}=DN(kI.UseNavigateStable),e=NI(RI.UseNavigateStable),n=V.useRef(!1);return CI(()=>{n.current=!0}),V.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Il({fromRouteId:e},s)))},[t,e])}const s0={};function jN(t,e,n){s0[t]||(s0[t]=!0)}function UN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Jc(t){let{to:e,replace:n,state:r,relative:i}=t;Fo()||$e(!1);let{future:s,static:o}=V.useContext(Ai),{matches:a}=V.useContext(Ar),{pathname:l}=Bo(),u=kr(),d=yy(e,gy(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(d);return V.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:i}),[u,h,i,n,r]),null}function pn(t){$e(!1)}function FN(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Zr.Pop,navigator:s,static:o=!1,future:a}=t;Fo()&&$e(!1);let l=e.replace(/^\/*/,"/"),u=V.useMemo(()=>({basename:l,navigator:s,static:o,future:Il({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Uo(r));let{pathname:d="/",search:h="",hash:f="",state:y=null,key:T="default"}=r,b=V.useMemo(()=>{let I=my(d,l);return I==null?null:{location:{pathname:I,search:h,hash:f,state:y,key:T},navigationType:i}},[l,d,h,f,y,T,i]);return b==null?null:V.createElement(Ai.Provider,{value:u},V.createElement(qd.Provider,{children:n,value:b}))}function BN(t){let{children:e,location:n}=t;return bN(Kp(e),n)}new Promise(()=>{});function Kp(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,i)=>{if(!V.isValidElement(r))return;let s=[...e,i];if(r.type===V.Fragment){n.push.apply(n,Kp(r.props.children,s));return}r.type!==pn&&$e(!1),!r.props.index||!r.props.children||$e(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Kp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yp(){return Yp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yp.apply(this,arguments)}function zN(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function $N(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function WN(t,e){return t.button===0&&(!e||e==="_self")&&!$N(t)}const qN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],HN="6";try{window.__reactRouterVersion=HN}catch{}const GN="startTransition",o0=jA[GN];function KN(t){let{basename:e,children:n,future:r,window:i}=t,s=V.useRef();s.current==null&&(s.current=QR({window:i,v5Compat:!0}));let o=s.current,[a,l]=V.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=V.useCallback(h=>{u&&o0?o0(()=>l(h)):l(h)},[l,u]);return V.useLayoutEffect(()=>o.listen(d),[o,d]),V.useEffect(()=>UN(r),[r]),V.createElement(FN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const YN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mr=V.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,viewTransition:h}=e,f=zN(e,qN),{basename:y}=V.useContext(Ai),T,b=!1;if(typeof u=="string"&&QN.test(u)&&(T=u,YN))try{let v=new URL(window.location.href),E=u.startsWith("//")?new URL(v.protocol+u):new URL(u),k=my(E.pathname,y);E.origin===v.origin&&k!=null?u=k+E.search+E.hash:b=!0}catch{}let I=EN(u,{relative:i}),w=XN(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:h});function g(v){r&&r(v),v.defaultPrevented||w(v)}return V.createElement("a",Yp({},f,{href:T||I,onClick:b||s?r:g,ref:n,target:l}))});var a0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(a0||(a0={}));var l0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(l0||(l0={}));function XN(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=kr(),u=Bo(),d=AI(t,{relative:o});return V.useCallback(h=>{if(WN(h,n)){h.preventDefault();let f=r!==void 0?r:Xc(u)===Xc(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,d,r,i,n,t,s,o,a])}const JN="modulepreload",ZN=function(t){return"/"+t},u0={},Sl=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=ZN(l),l in u0)return;u0[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":JN,u||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),u)return new Promise((f,y)=>{h.addEventListener("load",f),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},e2=()=>{};var c0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},t2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},MI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,h=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(f=64)),r.push(n[d],n[h],n[f],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(DI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):t2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new n2;const f=s<<2|a>>4;if(r.push(f),u!==64){const y=a<<4&240|u>>2;if(r.push(y),h!==64){const T=u<<6&192|h;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class n2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const r2=function(t){const e=DI(t);return MI.encodeByteArray(e,!0)},Zc=function(t){return r2(t).replace(/\./g,"")},VI=function(t){try{return MI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=()=>i2().__FIREBASE_DEFAULTS__,o2=()=>{if(typeof process>"u"||typeof c0>"u")return;const t=c0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},a2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&VI(t[1]);return e&&JSON.parse(e)},Hd=()=>{try{return e2()||s2()||o2()||a2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},OI=t=>{var e,n;return(n=(e=Hd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},LI=t=>{const e=OI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},jI=()=>{var t;return(t=Hd())==null?void 0:t.config},UI=t=>{var e;return(e=Hd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _y(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Zc(JSON.stringify(n)),Zc(JSON.stringify(o)),""].join(".")}const Ga={};function u2(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ga))Ga[e]?t.emulator.push(e):t.prod.push(e);return t}function c2(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let d0=!1;function wy(t,e){if(typeof window>"u"||typeof document>"u"||!ki(window.location.host)||Ga[t]===e||Ga[t]||d0)return;Ga[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",s=u2().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function l(f,y){f.setAttribute("width","24"),f.setAttribute("id",y),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{d0=!0,o()},f}function d(f,y){f.setAttribute("id",y),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=c2(r),y=n("text"),T=document.getElementById(y)||document.createElement("span"),b=n("learnmore"),I=document.getElementById(b)||document.createElement("a"),w=n("preprendIcon"),g=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const v=f.element;a(v),d(I,b);const E=u();l(g,w),v.append(g,T,I,E),document.body.appendChild(v)}s?(T.innerText="Preview backend disconnected.",g.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(g.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function d2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function h2(){var e;const t=(e=Hd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function f2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function p2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function m2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function g2(){const t=Ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y2(){return!h2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function v2(){try{return typeof indexedDB=="object"}catch{return!1}}function _2(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="FirebaseError";class sr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=w2,Object.setPrototypeOf(this,sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ql.prototype.create)}}class ql{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?T2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new sr(i,a,r)}}function T2(t,e){return t.replace(x2,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const x2=/\{\$([^}]+)}/g;function E2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(h0(s)&&h0(o)){if(!fs(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function h0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ra(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Na(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function I2(t,e){const n=new S2(t,e);return n.subscribe.bind(n)}class S2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");b2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=yf),i.error===void 0&&(i.error=yf),i.complete===void 0&&(i.complete=yf);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function b2(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function yf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t){return t&&t._delegate?t._delegate:t}class yi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new l2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(A2(e))try{this.getOrInitializeService({instanceIdentifier:Gi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Gi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gi){return this.instances.has(e)}getOptions(e=Gi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:C2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Gi){return this.component?this.component.multipleInstances?e:Gi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function C2(t){return t===Gi?void 0:t}function A2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new P2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const R2={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},N2=ue.INFO,D2={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},M2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=D2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Ty=class{constructor(e){this.name=e,this._logLevel=N2,this._logHandler=M2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?R2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}};const V2=(t,e)=>e.some(n=>t instanceof n);let f0,p0;function O2(){return f0||(f0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function L2(){return p0||(p0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const BI=new WeakMap,Qp=new WeakMap,zI=new WeakMap,vf=new WeakMap,xy=new WeakMap;function j2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ci(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&BI.set(n,t)}).catch(()=>{}),xy.set(e,t),e}function U2(t){if(Qp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Qp.set(t,e)}let Xp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ci(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function F2(t){Xp=t(Xp)}function B2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_f(this),e,...n);return zI.set(r,e.sort?e.sort():[e]),ci(r)}:L2().includes(t)?function(...e){return t.apply(_f(this),e),ci(BI.get(this))}:function(...e){return ci(t.apply(_f(this),e))}}function z2(t){return typeof t=="function"?B2(t):(t instanceof IDBTransaction&&U2(t),V2(t,O2())?new Proxy(t,Xp):t)}function ci(t){if(t instanceof IDBRequest)return j2(t);if(vf.has(t))return vf.get(t);const e=z2(t);return e!==t&&(vf.set(t,e),xy.set(e,t)),e}const _f=t=>xy.get(t);function $2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=ci(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ci(o.result),l.oldVersion,l.newVersion,ci(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const W2=["get","getKey","getAll","getAllKeys","count"],q2=["put","add","delete","clear"],wf=new Map;function m0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wf.get(e))return wf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=q2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||W2.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return wf.set(e,s),s}F2(t=>({...t,get:(e,n,r)=>m0(e,n)||t.get(e,n,r),has:(e,n)=>!!m0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(G2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function G2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jp="@firebase/app",g0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new Ty("@firebase/app"),K2="@firebase/app-compat",Y2="@firebase/analytics-compat",Q2="@firebase/analytics",X2="@firebase/app-check-compat",J2="@firebase/app-check",Z2="@firebase/auth",eD="@firebase/auth-compat",tD="@firebase/database",nD="@firebase/data-connect",rD="@firebase/database-compat",iD="@firebase/functions",sD="@firebase/functions-compat",oD="@firebase/installations",aD="@firebase/installations-compat",lD="@firebase/messaging",uD="@firebase/messaging-compat",cD="@firebase/performance",dD="@firebase/performance-compat",hD="@firebase/remote-config",fD="@firebase/remote-config-compat",pD="@firebase/storage",mD="@firebase/storage-compat",gD="@firebase/firestore",yD="@firebase/ai",vD="@firebase/firestore-compat",_D="firebase",wD="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="[DEFAULT]",TD={[Jp]:"fire-core",[K2]:"fire-core-compat",[Q2]:"fire-analytics",[Y2]:"fire-analytics-compat",[J2]:"fire-app-check",[X2]:"fire-app-check-compat",[Z2]:"fire-auth",[eD]:"fire-auth-compat",[tD]:"fire-rtdb",[nD]:"fire-data-connect",[rD]:"fire-rtdb-compat",[iD]:"fire-fn",[sD]:"fire-fn-compat",[oD]:"fire-iid",[aD]:"fire-iid-compat",[lD]:"fire-fcm",[uD]:"fire-fcm-compat",[cD]:"fire-perf",[dD]:"fire-perf-compat",[hD]:"fire-rc",[fD]:"fire-rc-compat",[pD]:"fire-gcs",[mD]:"fire-gcs-compat",[gD]:"fire-fst",[vD]:"fire-fst-compat",[yD]:"fire-vertex","fire-js":"fire-js",[_D]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=new Map,xD=new Map,em=new Map;function y0(t,e){try{t.container.addComponent(e)}catch(n){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ps(t){const e=t.name;if(em.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;em.set(e,t);for(const n of ed.values())y0(n,t);for(const n of xD.values())y0(n,t);return!0}function Gd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},di=new ql("app","Firebase",ED);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=wD;function $I(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Zp,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw di.create("bad-app-name",{appName:String(i)});if(n||(n=jI()),!n)throw di.create("no-options");const s=ed.get(i);if(s){if(fs(n,s.options)&&fs(r,s.config))return s;throw di.create("duplicate-app",{appName:i})}const o=new k2(i);for(const l of em.values())o.addComponent(l);const a=new ID(n,r,o);return ed.set(i,a),a}function Ey(t=Zp){const e=ed.get(t);if(!e&&t===Zp&&jI())return $I();if(!e)throw di.create("no-app",{appName:t});return e}function Gn(t,e,n){let r=TD[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(o.join(" "));return}ps(new yi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD="firebase-heartbeat-database",bD=1,bl="firebase-heartbeat-store";let Tf=null;function WI(){return Tf||(Tf=$2(SD,bD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bl)}catch(n){console.warn(n)}}}}).catch(t=>{throw di.create("idb-open",{originalErrorMessage:t.message})})),Tf}async function PD(t){try{const n=(await WI()).transaction(bl),r=await n.objectStore(bl).get(qI(t));return await n.done,r}catch(e){if(e instanceof sr)Ir.warn(e.message);else{const n=di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ir.warn(n.message)}}}async function v0(t,e){try{const r=(await WI()).transaction(bl,"readwrite");await r.objectStore(bl).put(e,qI(t)),await r.done}catch(n){if(n instanceof sr)Ir.warn(n.message);else{const r=di.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ir.warn(r.message)}}}function qI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=1024,AD=30;class kD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ND(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>AD){const o=DD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_0(),{heartbeatsToSend:r,unsentEntries:i}=RD(this._heartbeatsCache.heartbeats),s=Zc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ir.warn(n),""}}}function _0(){return new Date().toISOString().substring(0,10)}function RD(t,e=CD){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),w0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),w0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ND{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return v2()?_2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await PD(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return v0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return v0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function w0(t){return Zc(JSON.stringify({version:2,heartbeats:t})).length}function DD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(t){ps(new yi("platform-logger",e=>new H2(e),"PRIVATE")),ps(new yi("heartbeat",e=>new kD(e),"PRIVATE")),Gn(Jp,g0,t),Gn(Jp,g0,"esm2020"),Gn("fire-js","")}MD("");function HI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VD=HI,GI=new ql("auth","Firebase",HI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=new Ty("@firebase/auth");function OD(t,...e){td.logLevel<=ue.WARN&&td.warn(`Auth (${Es}): ${t}`,...e)}function pc(t,...e){td.logLevel<=ue.ERROR&&td.error(`Auth (${Es}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t,...e){throw Iy(t,...e)}function Kn(t,...e){return Iy(t,...e)}function KI(t,e,n){const r={...VD(),[e]:n};return new ql("auth","Firebase",r).create(e,{appName:t.name})}function gr(t){return KI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Iy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return GI.create(t,...e)}function te(t,e,...n){if(!t)throw Iy(e,...n)}function dr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pc(e),new Error(e)}function Sr(t,e){t||dr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function LD(){return T0()==="http:"||T0()==="https:"}function T0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LD()||p2()||"connection"in navigator)?navigator.onLine:!0}function UD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Sr(n>e,"Short delay should be less than long delay!"),this.isMobile=d2()||m2()}get(){return jD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t,e){Sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zD=new Gl(3e4,6e4);function Ri(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Rr(t,e,n,r,i={}){return QI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Hl({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...s};return f2()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ki(t.emulatorConfig.host)&&(u.credentials="include"),YI.fetch()(await XI(t,t.config.apiHost,n,a),u)})}async function QI(t,e,n){t._canInitEmulator=!1;const r={...FD,...e};try{const i=new WD(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Wu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wu(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw KI(t,d,u);Dn(t,d)}}catch(i){if(i instanceof sr)throw i;Dn(t,"network-request-failed",{message:String(i)})}}async function Kl(t,e,n,r,i={}){const s=await Rr(t,e,n,r,i);return"mfaPendingCredential"in s&&Dn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function XI(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Sy(t.config,i):`${t.config.apiScheme}://${i}`;return BD.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function $D(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Kn(this.auth,"network-request-failed")),zD.get())})}}function Wu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Kn(t,e,r);return i.customData._tokenResponse=n,i}function x0(t){return t!==void 0&&t.enterprise!==void 0}class qD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $D(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function HD(t,e){return Rr(t,"GET","/v2/recaptchaConfig",Ri(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GD(t,e){return Rr(t,"POST","/v1/accounts:delete",e)}async function nd(t,e){return Rr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KD(t,e=!1){const n=Pe(t),r=await n.getIdToken(e),i=by(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ka(xf(i.auth_time)),issuedAtTime:Ka(xf(i.iat)),expirationTime:Ka(xf(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function xf(t){return Number(t)*1e3}function by(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return pc("JWT malformed, contained fewer than 3 sections"),null;try{const i=VI(n);return i?JSON.parse(i):(pc("Failed to decode base64 JWT payload"),null)}catch(i){return pc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function E0(t){const e=by(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof sr&&YD(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function YD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ka(this.lastLoginAt),this.creationTime=Ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rd(t){var h;const e=t.auth,n=await t.getIdToken(),r=await So(t,nd(e,{idToken:n}));te(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(h=i.providerUserInfo)!=null&&h.length?JI(i.providerUserInfo):[],o=JD(t.providerData,s),a=t.isAnonymous,l=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new nm(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function XD(t){const e=Pe(t);await rd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JD(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function JI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZD(t,e){const n=await QI(t,{},async()=>{const r=Hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await XI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&ki(t.emulatorConfig.host)&&(l.credentials="include"),YI.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eM(t,e){return Rr(t,"POST","/v2/accounts:revokeToken",Ri(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=E0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await ZD(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new fo;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fo,this.toJSON())}_performRefresh(){return dr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class An{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new QD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new nm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await So(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return KD(this,e)}reload(){return XD(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new An({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await rd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nn(this.auth.app))return Promise.reject(gr(this.auth));const e=await this.getIdToken();return await So(this,GD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:f,isAnonymous:y,providerData:T,stsTokenManager:b}=n;te(h&&b,e,"internal-error");const I=fo.fromJSON(this.name,b);te(typeof h=="string",e,"internal-error"),Fr(r,e.name),Fr(i,e.name),te(typeof f=="boolean",e,"internal-error"),te(typeof y=="boolean",e,"internal-error"),Fr(s,e.name),Fr(o,e.name),Fr(a,e.name),Fr(l,e.name),Fr(u,e.name),Fr(d,e.name);const w=new An({uid:h,auth:e,email:i,emailVerified:f,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:I,createdAt:u,lastLoginAt:d});return T&&Array.isArray(T)&&(w.providerData=T.map(g=>({...g}))),l&&(w._redirectEventId=l),w}static async _fromIdTokenResponse(e,n,r=!1){const i=new fo;i.updateFromServerResponse(n);const s=new An({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await rd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];te(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?JI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new fo;a.updateFromIdToken(r);const l=new An({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new nm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0=new Map;function hr(t){Sr(t instanceof Function,"Expected a class definition");let e=I0.get(t);return e?(Sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,I0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ZI.type="NONE";const S0=ZI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t,e,n){return`firebase:${t}:${e}:${n}`}class po{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=mc(this.userKey,i.apiKey,s),this.fullPersistenceKey=mc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nd(this.auth,{idToken:e}).catch(()=>{});return n?An._fromGetAccountInfoResponse(this.auth,n,e):null}return An._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new po(hr(S0),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||hr(S0);const o=mc(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){let h;if(typeof d=="string"){const f=await nd(e,{idToken:d}).catch(()=>{});if(!f)break;h=await An._fromGetAccountInfoResponse(e,f,d)}else h=An._fromJSON(e,d);u!==s&&(a=h),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new po(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new po(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(eS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sS(e))return"Blackberry";if(oS(e))return"Webos";if(tS(e))return"Safari";if((e.includes("chrome/")||nS(e))&&!e.includes("edge/"))return"Chrome";if(iS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function eS(t=Ct()){return/firefox\//i.test(t)}function tS(t=Ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nS(t=Ct()){return/crios\//i.test(t)}function rS(t=Ct()){return/iemobile/i.test(t)}function iS(t=Ct()){return/android/i.test(t)}function sS(t=Ct()){return/blackberry/i.test(t)}function oS(t=Ct()){return/webos/i.test(t)}function Py(t=Ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function tM(t=Ct()){var e;return Py(t)&&!!((e=window.navigator)!=null&&e.standalone)}function nM(){return g2()&&document.documentMode===10}function aS(t=Ct()){return Py(t)||iS(t)||oS(t)||sS(t)||/windows phone/i.test(t)||rS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(t,e=[]){let n;switch(t){case"Browser":n=b0(Ct());break;case"Worker":n=`${b0(Ct())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Es}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(t,e={}){return Rr(t,"GET","/v2/passwordPolicy",Ri(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=6;class oM{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??sM,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P0(this),this.idTokenSubscription=new P0(this),this.beforeStateQueue=new rM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hr(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await po.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nd(this,{idToken:e}),r=await An._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(nn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nn(this.app))return Promise.reject(gr(this));const n=e?Pe(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nn(this.app)?Promise.reject(gr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nn(this.app)?Promise.reject(gr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iM(this),n=new oM(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ql("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await eM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hr(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await po.create(this,[hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&OD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Is(t){return Pe(t)}class P0{constructor(e){this.auth=e,this.observer=null,this.addObserver=I2(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lM(t){Kd=t}function uS(t){return Kd.loadJS(t)}function uM(){return Kd.recaptchaEnterpriseScript}function cM(){return Kd.gapiScript}function dM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class hM{constructor(){this.enterprise=new fM}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class fM{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const pM="recaptcha-enterprise",cS="NO_RECAPTCHA";class mM{constructor(e){this.type=pM,this.auth=Is(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{HD(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new qD(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;x0(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(cS)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hM().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&x0(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=uM();l.length!==0&&(l+=a),uS(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function C0(t,e,n,r=!1,i=!1){const s=new mM(t);let o;if(i)o=cS;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function rm(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await C0(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await C0(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t,e){const n=Gd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(fs(s,e??{}))return i;Dn(i,"already-initialized")}return n.initialize({options:e})}function yM(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(hr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vM(t,e,n){const r=Is(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=dS(e),{host:o,port:a}=_M(e),l=a===null?"":`:${a}`,u={url:`${s}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(fs(u,r.config.emulator)&&fs(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,ki(o)?(_y(`${s}//${o}${l}`),wy("Auth",!0)):wM()}function dS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _M(t){const e=dS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:A0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:A0(o)}}}function A0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wM(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return dr("not implemented")}_getIdTokenResponse(e){return dr("not implemented")}_linkToIdToken(e,n){return dr("not implemented")}_getReauthenticationResolver(e){return dr("not implemented")}}async function TM(t,e){return Rr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xM(t,e){return Kl(t,"POST","/v1/accounts:signInWithPassword",Ri(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(t,e){return Kl(t,"POST","/v1/accounts:signInWithEmailLink",Ri(t,e))}async function IM(t,e){return Kl(t,"POST","/v1/accounts:signInWithEmailLink",Ri(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends Cy{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Pl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Pl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rm(e,n,"signInWithPassword",xM);case"emailLink":return EM(e,{email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rm(e,r,"signUpPassword",TM);case"emailLink":return IM(e,{idToken:n,email:this._email,oobCode:this._password});default:Dn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(t,e){return Kl(t,"POST","/v1/accounts:signInWithIdp",Ri(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM="http://localhost";class ms extends Cy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new ms(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return mo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,mo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,mo(e,n)}buildRequest(){const e={requestUri:SM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PM(t){const e=Ra(Na(t)).link,n=e?Ra(Na(e)).deep_link_id:null,r=Ra(Na(t)).deep_link_id;return(r?Ra(Na(r)).link:null)||r||n||e||t}class Ay{constructor(e){const n=Ra(Na(e)),r=n.apiKey??null,i=n.oobCode??null,s=bM(n.mode??null);te(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=PM(e);try{return new Ay(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.providerId=zo.PROVIDER_ID}static credential(e,n){return Pl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Ay.parseLink(n);return te(r,"argument-error"),Pl._fromEmailAndCode(e,r.code,r.tenantId)}}zo.PROVIDER_ID="password";zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl extends hS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Yl{constructor(){super("facebook.com")}static credential(e){return ms._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gr.credential(e.oauthAccessToken)}catch{return null}}}Gr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends Yl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ms._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Kr.credential(n,r)}catch{return null}}}Kr.GOOGLE_SIGN_IN_METHOD="google.com";Kr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Yl{constructor(){super("github.com")}static credential(e){return ms._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.GITHUB_SIGN_IN_METHOD="github.com";Yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends Yl{constructor(){super("twitter.com")}static credential(e,n){return ms._fromParams({providerId:Qr.PROVIDER_ID,signInMethod:Qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qr.credentialFromTaggedObject(e)}static credentialFromError(e){return Qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Qr.credential(n,r)}catch{return null}}}Qr.TWITTER_SIGN_IN_METHOD="twitter.com";Qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CM(t,e){return Kl(t,"POST","/v1/accounts:signUp",Ri(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await An._fromIdTokenResponse(e,r,i),o=k0(r);return new gs({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=k0(r);return new gs({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function k0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends sr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,id.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new id(e,n,r,i)}}function fS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?id._fromErrorAndOperation(t,s,e,r):s})}async function AM(t,e,n=!1){const r=await So(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kM(t,e,n=!1){const{auth:r}=t;if(nn(r.app))return Promise.reject(gr(r));const i="reauthenticate";try{const s=await So(t,fS(r,i,e,t),n);te(s.idToken,r,"internal-error");const o=by(s.idToken);te(o,r,"internal-error");const{sub:a}=o;return te(t.uid===a,r,"user-mismatch"),gs._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Dn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pS(t,e,n=!1){if(nn(t.app))return Promise.reject(gr(t));const r="signIn",i=await fS(t,r,e),s=await gs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function RM(t,e){return pS(Is(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(t){const e=Is(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function NM(t,e,n){if(nn(t.app))return Promise.reject(gr(t));const r=Is(t),o=await rm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CM).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&mS(t),l}),a=await gs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function DM(t,e,n){return nn(t.app)?Promise.reject(gr(t)):RM(Pe(t),zo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&mS(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MM(t,e){return Rr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Pe(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await So(r,MM(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function OM(t,e,n,r){return Pe(t).onIdTokenChanged(e,n,r)}function LM(t,e,n){return Pe(t).beforeAuthStateChanged(e,n)}function jM(t,e,n,r){return Pe(t).onAuthStateChanged(e,n,r)}function UM(t){return Pe(t).signOut()}const sd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sd,"1"),this.storage.removeItem(sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=1e3,BM=10;class yS extends gS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);nM()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,BM):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},FM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}yS.type="LOCAL";const zM=yS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS extends gS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vS.type="SESSION";const _S=vS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Yd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await $M(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=ky("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(){return window}function qM(t){Yn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(){return typeof Yn().WorkerGlobalScope<"u"&&typeof Yn().importScripts=="function"}async function HM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function KM(){return wS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="firebaseLocalStorageDb",YM=1,od="firebaseLocalStorage",xS="fbase_key";class Ql{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qd(t,e){return t.transaction([od],e?"readwrite":"readonly").objectStore(od)}function QM(){const t=indexedDB.deleteDatabase(TS);return new Ql(t).toPromise()}function im(){const t=indexedDB.open(TS,YM);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(od,{keyPath:xS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(od)?e(r):(r.close(),await QM(),e(await im()))})})}async function R0(t,e,n){const r=Qd(t,!0).put({[xS]:e,value:n});return new Ql(r).toPromise()}async function XM(t,e){const n=Qd(t,!1).get(e),r=await new Ql(n).toPromise();return r===void 0?null:r.value}function N0(t,e){const n=Qd(t,!0).delete(e);return new Ql(n).toPromise()}const JM=800,ZM=3;class ES{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await im(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ZM)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yd._getInstance(KM()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await HM(),!this.activeServiceWorker)return;this.sender=new WM(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await im();return await R0(e,sd,"1"),await N0(e,sd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>R0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>XM(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>N0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Qd(i,!1).getAll();return new Ql(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ES.type="LOCAL";const eV=ES;new Gl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(t,e){return e?hr(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry extends Cy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return mo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function nV(t){return pS(t.auth,new Ry(t),t.bypassAuthState)}function rV(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),kM(n,new Ry(t),t.bypassAuthState)}async function iV(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),AM(n,new Ry(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nV;case"linkViaPopup":case"linkViaRedirect":return iV;case"reauthViaPopup":case"reauthViaRedirect":return rV;default:Dn(this.auth,"internal-error")}}resolve(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV=new Gl(2e3,1e4);class eo extends IS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,eo.currentPopupAction&&eo.currentPopupAction.cancel(),eo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Sr(this.filter.length===1,"Popup operations only handle one event");const e=ky();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Kn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,eo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sV.get())};e()}}eo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV="pendingRedirect",gc=new Map;class aV extends IS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=gc.get(this.auth._key());if(!e){try{const r=await lV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}gc.set(this.auth._key(),e)}return this.bypassAuthState||gc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lV(t,e){const n=dV(e),r=cV(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function uV(t,e){gc.set(t._key(),e)}function cV(t){return hr(t._redirectPersistence)}function dV(t){return mc(oV,t.config.apiKey,t.name)}async function hV(t,e,n=!1){if(nn(t.app))return Promise.reject(gr(t));const r=Is(t),i=tV(r,e),o=await new aV(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV=10*60*1e3;class pV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!SS(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Kn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fV&&this.cachedEventUids.clear(),this.cachedEventUids.has(D0(e))}saveEventToCache(e){this.cachedEventUids.add(D0(e)),this.lastProcessedEventTime=Date.now()}}function D0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function SS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return SS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gV(t,e={}){return Rr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vV=/^https?/;async function _V(t){if(t.config.emulator)return;const{authorizedDomains:e}=await gV(t);for(const n of e)try{if(wV(n))return}catch{}Dn(t,"unauthorized-domain")}function wV(t){const e=tm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!vV.test(n))return!1;if(yV.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=new Gl(3e4,6e4);function M0(){const t=Yn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xV(t){return new Promise((e,n)=>{var i,s,o;function r(){M0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{M0(),n(Kn(t,"network-request-failed"))},timeout:TV.get()})}if((s=(i=Yn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Yn().gapi)!=null&&o.load)r();else{const a=dM("iframefcb");return Yn()[a]=()=>{gapi.load?r():n(Kn(t,"network-request-failed"))},uS(`${cM()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw yc=null,e})}let yc=null;function EV(t){return yc=yc||xV(t),yc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV=new Gl(5e3,15e3),SV="__/auth/iframe",bV="emulator/auth/iframe",PV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AV(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sy(e,bV):`https://${t.config.authDomain}/${SV}`,r={apiKey:e.apiKey,appName:t.name,v:Es},i=CV.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Hl(r).slice(1)}`}async function kV(t){const e=await EV(t),n=Yn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:AV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PV,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Kn(t,"network-request-failed"),a=Yn().setTimeout(()=>{s(o)},IV.get());function l(){Yn().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NV=500,DV=600,MV="_blank",VV="http://localhost";class V0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function OV(t,e,n,r=NV,i=DV){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...RV,width:r.toString(),height:i.toString(),top:s,left:o},u=Ct().toLowerCase();n&&(a=nS(u)?MV:n),eS(u)&&(e=e||VV,l.scrollbars="yes");const d=Object.entries(l).reduce((f,[y,T])=>`${f}${y}=${T},`,"");if(tM(u)&&a!=="_self")return LV(e||"",a),new V0(null);const h=window.open(e||"",a,d);te(h,t,"popup-blocked");try{h.focus()}catch{}return new V0(h)}function LV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV="__/auth/handler",UV="emulator/auth/handler",FV=encodeURIComponent("fac");async function O0(t,e,n,r,i,s){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Es,eventId:i};if(e instanceof hS){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",E2(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof Yl){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${FV}=${encodeURIComponent(l)}`:"";return`${BV(t)}?${Hl(a).slice(1)}${u}`}function BV({config:t}){return t.emulator?Sy(t,UV):`https://${t.authDomain}/${jV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="webStorageSupport";class zV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_S,this._completeRedirectFn=hV,this._overrideRedirectResult=uV}async _openPopup(e,n,r,i){var o;Sr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await O0(e,n,r,tm(),i);return OV(e,s,ky())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await O0(e,n,r,tm(),i);return qM(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Sr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await kV(e),r=new pV(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ef,{type:Ef},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Ef];s!==void 0&&n(!!s),Dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_V(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return aS()||tS()||Py()}}const $V=zV;var L0="@firebase/auth",j0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HV(t){ps(new yi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lS(t)},u=new aM(r,i,s,l);return yM(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ps(new yi("auth-internal",e=>{const n=Is(e.getProvider("auth").getImmediate());return(r=>new WV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gn(L0,j0,qV(t)),Gn(L0,j0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=5*60,KV=UI("authIdTokenMaxAge")||GV;let U0=null;const YV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>KV)return;const i=n==null?void 0:n.token;U0!==i&&(U0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function QV(t=Ey()){const e=Gd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gM(t,{popupRedirectResolver:$V,persistence:[eV,zM,_S]}),r=UI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=YV(s.toString());LM(n,o,()=>o(n.currentUser)),OM(n,a=>o(a))}}const i=OI("auth");return i&&vM(n,`http://${i}`),n}function XV(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}lM({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Kn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",XV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HV("Browser");/*! Capacitor: https://capacitorjs.com/ - MIT License */var bo;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(bo||(bo={}));class go extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const JV=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},ZV=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>e!==null?e.name:JV(t),s=()=>i()!=="web",o=h=>{const f=u.get(h);return!!(f!=null&&f.platforms.has(i())||a(h))},a=h=>{var f;return(f=n.PluginHeaders)===null||f===void 0?void 0:f.find(y=>y.name===h)},l=h=>t.console.error(h),u=new Map,d=(h,f={})=>{const y=u.get(h);if(y)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),y.proxy;const T=i(),b=a(h);let I;const w=async()=>(!I&&T in f?I=typeof f[T]=="function"?I=await f[T]():I=f[T]:e!==null&&!I&&"web"in f&&(I=typeof f.web=="function"?I=await f.web():I=f.web),I),g=(x,C)=>{var R,N;if(b){const D=b==null?void 0:b.methods.find(A=>C===A.name);if(D)return D.rtype==="promise"?A=>n.nativePromise(h,C.toString(),A):(A,G)=>n.nativeCallback(h,C.toString(),A,G);if(x)return(R=x[C])===null||R===void 0?void 0:R.bind(x)}else{if(x)return(N=x[C])===null||N===void 0?void 0:N.bind(x);throw new go(`"${h}" plugin is not implemented on ${T}`,bo.Unimplemented)}},v=x=>{let C;const R=(...N)=>{const D=w().then(A=>{const G=g(A,x);if(G){const Y=G(...N);return C=Y==null?void 0:Y.remove,Y}else throw new go(`"${h}.${x}()" is not implemented on ${T}`,bo.Unimplemented)});return x==="addListener"&&(D.remove=async()=>C()),D};return R.toString=()=>`${x.toString()}() { [capacitor code] }`,Object.defineProperty(R,"name",{value:x,writable:!1,configurable:!1}),R},E=v("addListener"),k=v("removeListener"),M=(x,C)=>{const R=E({eventName:x},C),N=async()=>{const A=await R;k({eventName:x,callbackId:A},C)},D=new Promise(A=>R.then(()=>A({remove:N})));return D.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await N()},D},S=new Proxy({},{get(x,C){switch(C){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return b?M:E;case"removeListener":return k;default:return v(C)}}});return r[h]=S,u.set(h,{name:h,proxy:S,platforms:new Set([...Object.keys(f),...b?[T]:[]])}),S};return n.convertFileSrc||(n.convertFileSrc=h=>h),n.getPlatform=i,n.handleError=l,n.isNativePlatform=s,n.isPluginAvailable=o,n.registerPlugin=d,n.Exception=go,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},eO=t=>t.Capacitor=ZV(t),tr=eO(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Xl=tr.registerPlugin;class Ny{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const i=this.listeners[e];if(!i){if(r){let s=this.retainedEventArguments[e];s||(s=[]),s.push(n),this.retainedEventArguments[e]=s}return}i.forEach(s=>s(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new tr.Exception(e,bo.Unimplemented)}unavailable(e="not available"){return new tr.Exception(e,bo.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const F0=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),B0=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class tO extends Ny{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=B0(i).trim(),s=B0(s).trim(),n[i]=s}),n}async setCookie(e){try{const n=F0(e.key),r=F0(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,s=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${s}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Xl("CapacitorCookies",{web:()=>new tO});const nO=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),rO=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,s,o)=>(i[s]=t[e[o]],i),{})},iO=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[s,o]=i;let a,l;return Array.isArray(o)?(l="",o.forEach(u=>{a=e?encodeURIComponent(u):u,l+=`${s}=${a}&`}),l.slice(0,-1)):(a=e?encodeURIComponent(o):o,l=`${s}=${a}`),`${r}&${l}`},"").substr(1):null,sO=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=rO(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[o,a]of Object.entries(t.data||{}))s.set(o,a);n.body=s.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((a,l)=>{s.append(l,a)});else for(const a of Object.keys(t.data))s.append(a,t.data[a]);n.body=s;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class oO extends Ny{async request(e){const n=sO(e,e.webFetchExtra),r=iO(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,n),o=s.headers.get("content-type")||"";let{responseType:a="text"}=s.ok?e:{};o.includes("application/json")&&(a="json");let l,u;switch(a){case"arraybuffer":case"blob":u=await s.blob(),l=await nO(u);break;case"json":l=await s.json();break;case"document":case"text":default:l=await s.text()}const d={};return s.headers.forEach((h,f)=>{d[f]=h}),{data:l,headers:d,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Xl("CapacitorHttp",{web:()=>new oO});var z0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hi,bS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,x){function C(){}C.prototype=x.prototype,S.F=x.prototype,S.prototype=new C,S.prototype.constructor=S,S.D=function(R,N,D){for(var A=Array(arguments.length-2),G=2;G<arguments.length;G++)A[G-2]=arguments[G];return x.prototype[N].apply(R,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,x,C){C||(C=0);const R=Array(16);if(typeof x=="string")for(var N=0;N<16;++N)R[N]=x.charCodeAt(C++)|x.charCodeAt(C++)<<8|x.charCodeAt(C++)<<16|x.charCodeAt(C++)<<24;else for(N=0;N<16;++N)R[N]=x[C++]|x[C++]<<8|x[C++]<<16|x[C++]<<24;x=S.g[0],C=S.g[1],N=S.g[2];let D=S.g[3],A;A=x+(D^C&(N^D))+R[0]+3614090360&4294967295,x=C+(A<<7&4294967295|A>>>25),A=D+(N^x&(C^N))+R[1]+3905402710&4294967295,D=x+(A<<12&4294967295|A>>>20),A=N+(C^D&(x^C))+R[2]+606105819&4294967295,N=D+(A<<17&4294967295|A>>>15),A=C+(x^N&(D^x))+R[3]+3250441966&4294967295,C=N+(A<<22&4294967295|A>>>10),A=x+(D^C&(N^D))+R[4]+4118548399&4294967295,x=C+(A<<7&4294967295|A>>>25),A=D+(N^x&(C^N))+R[5]+1200080426&4294967295,D=x+(A<<12&4294967295|A>>>20),A=N+(C^D&(x^C))+R[6]+2821735955&4294967295,N=D+(A<<17&4294967295|A>>>15),A=C+(x^N&(D^x))+R[7]+4249261313&4294967295,C=N+(A<<22&4294967295|A>>>10),A=x+(D^C&(N^D))+R[8]+1770035416&4294967295,x=C+(A<<7&4294967295|A>>>25),A=D+(N^x&(C^N))+R[9]+2336552879&4294967295,D=x+(A<<12&4294967295|A>>>20),A=N+(C^D&(x^C))+R[10]+4294925233&4294967295,N=D+(A<<17&4294967295|A>>>15),A=C+(x^N&(D^x))+R[11]+2304563134&4294967295,C=N+(A<<22&4294967295|A>>>10),A=x+(D^C&(N^D))+R[12]+1804603682&4294967295,x=C+(A<<7&4294967295|A>>>25),A=D+(N^x&(C^N))+R[13]+4254626195&4294967295,D=x+(A<<12&4294967295|A>>>20),A=N+(C^D&(x^C))+R[14]+2792965006&4294967295,N=D+(A<<17&4294967295|A>>>15),A=C+(x^N&(D^x))+R[15]+1236535329&4294967295,C=N+(A<<22&4294967295|A>>>10),A=x+(N^D&(C^N))+R[1]+4129170786&4294967295,x=C+(A<<5&4294967295|A>>>27),A=D+(C^N&(x^C))+R[6]+3225465664&4294967295,D=x+(A<<9&4294967295|A>>>23),A=N+(x^C&(D^x))+R[11]+643717713&4294967295,N=D+(A<<14&4294967295|A>>>18),A=C+(D^x&(N^D))+R[0]+3921069994&4294967295,C=N+(A<<20&4294967295|A>>>12),A=x+(N^D&(C^N))+R[5]+3593408605&4294967295,x=C+(A<<5&4294967295|A>>>27),A=D+(C^N&(x^C))+R[10]+38016083&4294967295,D=x+(A<<9&4294967295|A>>>23),A=N+(x^C&(D^x))+R[15]+3634488961&4294967295,N=D+(A<<14&4294967295|A>>>18),A=C+(D^x&(N^D))+R[4]+3889429448&4294967295,C=N+(A<<20&4294967295|A>>>12),A=x+(N^D&(C^N))+R[9]+568446438&4294967295,x=C+(A<<5&4294967295|A>>>27),A=D+(C^N&(x^C))+R[14]+3275163606&4294967295,D=x+(A<<9&4294967295|A>>>23),A=N+(x^C&(D^x))+R[3]+4107603335&4294967295,N=D+(A<<14&4294967295|A>>>18),A=C+(D^x&(N^D))+R[8]+1163531501&4294967295,C=N+(A<<20&4294967295|A>>>12),A=x+(N^D&(C^N))+R[13]+2850285829&4294967295,x=C+(A<<5&4294967295|A>>>27),A=D+(C^N&(x^C))+R[2]+4243563512&4294967295,D=x+(A<<9&4294967295|A>>>23),A=N+(x^C&(D^x))+R[7]+1735328473&4294967295,N=D+(A<<14&4294967295|A>>>18),A=C+(D^x&(N^D))+R[12]+2368359562&4294967295,C=N+(A<<20&4294967295|A>>>12),A=x+(C^N^D)+R[5]+4294588738&4294967295,x=C+(A<<4&4294967295|A>>>28),A=D+(x^C^N)+R[8]+2272392833&4294967295,D=x+(A<<11&4294967295|A>>>21),A=N+(D^x^C)+R[11]+1839030562&4294967295,N=D+(A<<16&4294967295|A>>>16),A=C+(N^D^x)+R[14]+4259657740&4294967295,C=N+(A<<23&4294967295|A>>>9),A=x+(C^N^D)+R[1]+2763975236&4294967295,x=C+(A<<4&4294967295|A>>>28),A=D+(x^C^N)+R[4]+1272893353&4294967295,D=x+(A<<11&4294967295|A>>>21),A=N+(D^x^C)+R[7]+4139469664&4294967295,N=D+(A<<16&4294967295|A>>>16),A=C+(N^D^x)+R[10]+3200236656&4294967295,C=N+(A<<23&4294967295|A>>>9),A=x+(C^N^D)+R[13]+681279174&4294967295,x=C+(A<<4&4294967295|A>>>28),A=D+(x^C^N)+R[0]+3936430074&4294967295,D=x+(A<<11&4294967295|A>>>21),A=N+(D^x^C)+R[3]+3572445317&4294967295,N=D+(A<<16&4294967295|A>>>16),A=C+(N^D^x)+R[6]+76029189&4294967295,C=N+(A<<23&4294967295|A>>>9),A=x+(C^N^D)+R[9]+3654602809&4294967295,x=C+(A<<4&4294967295|A>>>28),A=D+(x^C^N)+R[12]+3873151461&4294967295,D=x+(A<<11&4294967295|A>>>21),A=N+(D^x^C)+R[15]+530742520&4294967295,N=D+(A<<16&4294967295|A>>>16),A=C+(N^D^x)+R[2]+3299628645&4294967295,C=N+(A<<23&4294967295|A>>>9),A=x+(N^(C|~D))+R[0]+4096336452&4294967295,x=C+(A<<6&4294967295|A>>>26),A=D+(C^(x|~N))+R[7]+1126891415&4294967295,D=x+(A<<10&4294967295|A>>>22),A=N+(x^(D|~C))+R[14]+2878612391&4294967295,N=D+(A<<15&4294967295|A>>>17),A=C+(D^(N|~x))+R[5]+4237533241&4294967295,C=N+(A<<21&4294967295|A>>>11),A=x+(N^(C|~D))+R[12]+1700485571&4294967295,x=C+(A<<6&4294967295|A>>>26),A=D+(C^(x|~N))+R[3]+2399980690&4294967295,D=x+(A<<10&4294967295|A>>>22),A=N+(x^(D|~C))+R[10]+4293915773&4294967295,N=D+(A<<15&4294967295|A>>>17),A=C+(D^(N|~x))+R[1]+2240044497&4294967295,C=N+(A<<21&4294967295|A>>>11),A=x+(N^(C|~D))+R[8]+1873313359&4294967295,x=C+(A<<6&4294967295|A>>>26),A=D+(C^(x|~N))+R[15]+4264355552&4294967295,D=x+(A<<10&4294967295|A>>>22),A=N+(x^(D|~C))+R[6]+2734768916&4294967295,N=D+(A<<15&4294967295|A>>>17),A=C+(D^(N|~x))+R[13]+1309151649&4294967295,C=N+(A<<21&4294967295|A>>>11),A=x+(N^(C|~D))+R[4]+4149444226&4294967295,x=C+(A<<6&4294967295|A>>>26),A=D+(C^(x|~N))+R[11]+3174756917&4294967295,D=x+(A<<10&4294967295|A>>>22),A=N+(x^(D|~C))+R[2]+718787259&4294967295,N=D+(A<<15&4294967295|A>>>17),A=C+(D^(N|~x))+R[9]+3951481745&4294967295,S.g[0]=S.g[0]+x&4294967295,S.g[1]=S.g[1]+(N+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.v=function(S,x){x===void 0&&(x=S.length);const C=x-this.blockSize,R=this.C;let N=this.h,D=0;for(;D<x;){if(N==0)for(;D<=C;)i(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<x;)if(R[N++]=S.charCodeAt(D++),N==this.blockSize){i(this,R),N=0;break}}else for(;D<x;)if(R[N++]=S[D++],N==this.blockSize){i(this,R),N=0;break}}this.h=N,this.o+=x},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var x=1;x<S.length-8;++x)S[x]=0;x=this.o*8;for(var C=S.length-8;C<S.length;++C)S[C]=x&255,x/=256;for(this.v(S),S=Array(16),x=0,C=0;C<4;++C)for(let R=0;R<32;R+=8)S[x++]=this.g[C]>>>R&255;return S};function s(S,x){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=x(S)}function o(S,x){this.h=x;const C=[];let R=!0;for(let N=S.length-1;N>=0;N--){const D=S[N]|0;R&&D==x||(C[N]=D,R=!1)}this.g=C}var a={};function l(S){return-128<=S&&S<128?s(S,function(x){return new o([x|0],x<0?-1:0)}):new o([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return h;if(S<0)return I(u(-S));const x=[];let C=1;for(let R=0;S>=C;R++)x[R]=S/C|0,C*=4294967296;return new o(x,0)}function d(S,x){if(S.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(S.charAt(0)=="-")return I(d(S.substring(1),x));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=u(Math.pow(x,8));let R=h;for(let D=0;D<S.length;D+=8){var N=Math.min(8,S.length-D);const A=parseInt(S.substring(D,D+N),x);N<8?(N=u(Math.pow(x,N)),R=R.j(N).add(u(A))):(R=R.j(C),R=R.add(u(A)))}return R}var h=l(0),f=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(b(this))return-I(this).m();let S=0,x=1;for(let C=0;C<this.g.length;C++){const R=this.i(C);S+=(R>=0?R:4294967296+R)*x,x*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(T(this))return"0";if(b(this))return"-"+I(this).toString(S);const x=u(Math.pow(S,6));var C=this;let R="";for(;;){const N=E(C,x).g;C=w(C,N.j(x));let D=((C.g.length>0?C.g[0]:C.h)>>>0).toString(S);if(C=N,T(C))return D+R;for(;D.length<6;)D="0"+D;R=D+R}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function T(S){if(S.h!=0)return!1;for(let x=0;x<S.g.length;x++)if(S.g[x]!=0)return!1;return!0}function b(S){return S.h==-1}t.l=function(S){return S=w(this,S),b(S)?-1:T(S)?0:1};function I(S){const x=S.g.length,C=[];for(let R=0;R<x;R++)C[R]=~S.g[R];return new o(C,~S.h).add(f)}t.abs=function(){return b(this)?I(this):this},t.add=function(S){const x=Math.max(this.g.length,S.g.length),C=[];let R=0;for(let N=0;N<=x;N++){let D=R+(this.i(N)&65535)+(S.i(N)&65535),A=(D>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);R=A>>>16,D&=65535,A&=65535,C[N]=A<<16|D}return new o(C,C[C.length-1]&-2147483648?-1:0)};function w(S,x){return S.add(I(x))}t.j=function(S){if(T(this)||T(S))return h;if(b(this))return b(S)?I(this).j(I(S)):I(I(this).j(S));if(b(S))return I(this.j(I(S)));if(this.l(y)<0&&S.l(y)<0)return u(this.m()*S.m());const x=this.g.length+S.g.length,C=[];for(var R=0;R<2*x;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(let N=0;N<S.g.length;N++){const D=this.i(R)>>>16,A=this.i(R)&65535,G=S.i(N)>>>16,Y=S.i(N)&65535;C[2*R+2*N]+=A*Y,g(C,2*R+2*N),C[2*R+2*N+1]+=D*Y,g(C,2*R+2*N+1),C[2*R+2*N+1]+=A*G,g(C,2*R+2*N+1),C[2*R+2*N+2]+=D*G,g(C,2*R+2*N+2)}for(S=0;S<x;S++)C[S]=C[2*S+1]<<16|C[2*S];for(S=x;S<2*x;S++)C[S]=0;return new o(C,0)};function g(S,x){for(;(S[x]&65535)!=S[x];)S[x+1]+=S[x]>>>16,S[x]&=65535,x++}function v(S,x){this.g=S,this.h=x}function E(S,x){if(T(x))throw Error("division by zero");if(T(S))return new v(h,h);if(b(S))return x=E(I(S),x),new v(I(x.g),I(x.h));if(b(x))return x=E(S,I(x)),new v(I(x.g),x.h);if(S.g.length>30){if(b(S)||b(x))throw Error("slowDivide_ only works with positive integers.");for(var C=f,R=x;R.l(S)<=0;)C=k(C),R=k(R);var N=M(C,1),D=M(R,1);for(R=M(R,2),C=M(C,2);!T(R);){var A=D.add(R);A.l(S)<=0&&(N=N.add(C),D=A),R=M(R,1),C=M(C,1)}return x=w(S,N.j(x)),new v(N,x)}for(N=h;S.l(x)>=0;){for(C=Math.max(1,Math.floor(S.m()/x.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),D=u(C),A=D.j(x);b(A)||A.l(S)>0;)C-=R,D=u(C),A=D.j(x);T(D)&&(D=f),N=N.add(D),S=w(S,A)}return new v(N,S)}t.B=function(S){return E(this,S).h},t.and=function(S){const x=Math.max(this.g.length,S.g.length),C=[];for(let R=0;R<x;R++)C[R]=this.i(R)&S.i(R);return new o(C,this.h&S.h)},t.or=function(S){const x=Math.max(this.g.length,S.g.length),C=[];for(let R=0;R<x;R++)C[R]=this.i(R)|S.i(R);return new o(C,this.h|S.h)},t.xor=function(S){const x=Math.max(this.g.length,S.g.length),C=[];for(let R=0;R<x;R++)C[R]=this.i(R)^S.i(R);return new o(C,this.h^S.h)};function k(S){const x=S.g.length+1,C=[];for(let R=0;R<x;R++)C[R]=S.i(R)<<1|S.i(R-1)>>>31;return new o(C,S.h)}function M(S,x){const C=x>>5;x%=32;const R=S.g.length-C,N=[];for(let D=0;D<R;D++)N[D]=x>0?S.i(D+C)>>>x|S.i(D+C+1)<<32-x:S.i(D+C);return new o(N,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,bS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,hi=o}).apply(typeof z0<"u"?z0:typeof self<"u"?self:typeof window<"u"?window:{});var qu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var PS,Da,CS,vc,sm,AS,kS,RS;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof qu=="object"&&qu];for(var p=0;p<c.length;++p){var _=c[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(c,p){if(p)e:{var _=r;c=c.split(".");for(var P=0;P<c.length-1;P++){var O=c[P];if(!(O in _))break e;_=_[O]}c=c[c.length-1],P=_[c],p=p(P),p!=P&&p!=null&&e(_,c,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(p){var _=[],P;for(P in p)Object.prototype.hasOwnProperty.call(p,P)&&_.push([P,p[P]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function l(c,p,_){return c.call.apply(c.bind,arguments)}function u(c,p,_){return u=l,u.apply(null,arguments)}function d(c,p){var _=Array.prototype.slice.call(arguments,1);return function(){var P=_.slice();return P.push.apply(P,arguments),c.apply(this,P)}}function h(c,p){function _(){}_.prototype=p.prototype,c.Z=p.prototype,c.prototype=new _,c.prototype.constructor=c,c.Ob=function(P,O,L){for(var W=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)W[ae-2]=arguments[ae];return p.prototype[O].apply(P,W)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){const p=c.length;if(p>0){const _=Array(p);for(let P=0;P<p;P++)_[P]=c[P];return _}return[]}function T(c,p){for(let P=1;P<arguments.length;P++){const O=arguments[P];var _=typeof O;if(_=_!="object"?_:O?Array.isArray(O)?"array":_:"null",_=="array"||_=="object"&&typeof O.length=="number"){_=c.length||0;const L=O.length||0;c.length=_+L;for(let W=0;W<L;W++)c[_+W]=O[W]}else c.push(O)}}class b{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function I(c){o.setTimeout(()=>{throw c},0)}function w(){var c=S;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class g{constructor(){this.h=this.g=null}add(p,_){const P=v.get();P.set(p,_),this.h?this.h.next=P:this.g=P,this.h=P}}var v=new b(()=>new E,c=>c.reset());class E{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let k,M=!1,S=new g,x=()=>{const c=Promise.resolve(void 0);k=()=>{c.then(C)}};function C(){for(var c;c=w();){try{c.h.call(c.g)}catch(_){I(_)}var p=v;p.j(c),p.h<100&&(p.h++,c.next=p.g,p.g=c)}M=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};o.addEventListener("test",_,p),o.removeEventListener("test",_,p)}catch{}return c}();function A(c){return/^[\s\xa0]*$/.test(c)}function G(c,p){N.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,p)}h(G,N),G.prototype.init=function(c,p){const _=this.type=c.type,P=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget,p||(_=="mouseover"?p=c.fromElement:_=="mouseout"&&(p=c.toElement)),this.relatedTarget=p,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Y="closure_listenable_"+(Math.random()*1e6|0),Z=0;function re(c,p,_,P,O){this.listener=c,this.proxy=null,this.src=p,this.type=_,this.capture=!!P,this.ha=O,this.key=++Z,this.da=this.fa=!1}function F(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function z(c,p,_){for(const P in c)p.call(_,c[P],P,c)}function $(c,p){for(const _ in c)p.call(void 0,c[_],_,c)}function Q(c){const p={};for(const _ in c)p[_]=c[_];return p}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function We(c,p){let _,P;for(let O=1;O<arguments.length;O++){P=arguments[O];for(_ in P)c[_]=P[_];for(let L=0;L<ie.length;L++)_=ie[L],Object.prototype.hasOwnProperty.call(P,_)&&(c[_]=P[_])}}function Qe(c){this.src=c,this.g={},this.h=0}Qe.prototype.add=function(c,p,_,P,O){const L=c.toString();c=this.g[L],c||(c=this.g[L]=[],this.h++);const W=Xe(c,p,P,O);return W>-1?(p=c[W],_||(p.fa=!1)):(p=new re(p,this.src,L,!!P,O),p.fa=_,c.push(p)),p};function Bt(c,p){const _=p.type;if(_ in c.g){var P=c.g[_],O=Array.prototype.indexOf.call(P,p,void 0),L;(L=O>=0)&&Array.prototype.splice.call(P,O,1),L&&(F(p),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Xe(c,p,_,P){for(let O=0;O<c.length;++O){const L=c[O];if(!L.da&&L.listener==p&&L.capture==!!_&&L.ha==P)return O}return-1}var ot="closure_lm_"+(Math.random()*1e6|0),In={};function On(c,p,_,P,O){if(Array.isArray(p)){for(let L=0;L<p.length;L++)On(c,p[L],_,P,O);return null}return _=Oi(_),c&&c[Y]?c.J(p,_,a(P)?!!P.capture:!1,O):Ln(c,p,_,!1,P,O)}function Ln(c,p,_,P,O,L){if(!p)throw Error("Invalid event type");const W=a(O)?!!O.capture:!!O;let ae=at(c);if(ae||(c[ot]=ae=new Qe(c)),_=ae.add(p,_,P,W,L),_.proxy)return _;if(P=zt(),_.proxy=P,P.src=c,P.listener=_,c.addEventListener)D||(O=W),O===void 0&&(O=!1),c.addEventListener(p.toString(),P,O);else if(c.attachEvent)c.attachEvent(pu(p.toString()),P);else if(c.addListener&&c.removeListener)c.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return _}function zt(){function c(_){return p.call(c.src,c.listener,_)}const p=Ih;return c}function Ko(c,p,_,P,O){if(Array.isArray(p))for(var L=0;L<p.length;L++)Ko(c,p[L],_,P,O);else P=a(P)?!!P.capture:!!P,_=Oi(_),c&&c[Y]?(c=c.i,L=String(p).toString(),L in c.g&&(p=c.g[L],_=Xe(p,_,P,O),_>-1&&(F(p[_]),Array.prototype.splice.call(p,_,1),p.length==0&&(delete c.g[L],c.h--)))):c&&(c=at(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Xe(p,_,P,O)),(_=c>-1?p[c]:null)&&Yo(_))}function Yo(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Y])Bt(p.i,c);else{var _=c.type,P=c.proxy;p.removeEventListener?p.removeEventListener(_,P,c.capture):p.detachEvent?p.detachEvent(pu(_),P):p.addListener&&p.removeListener&&p.removeListener(P),(_=at(p))?(Bt(_,c),_.h==0&&(_.src=null,p[ot]=null)):F(c)}}}function pu(c){return c in In?In[c]:In[c]="on"+c}function Ih(c,p){if(c.da)c=!0;else{p=new G(p,this);const _=c.listener,P=c.ha||c.src;c.fa&&Yo(c),c=_.call(P,p)}return c}function at(c){return c=c[ot],c instanceof Qe?c:null}var dn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oi(c){return typeof c=="function"?c:(c[dn]||(c[dn]=function(p){return c.handleEvent(p)}),c[dn])}function yt(){R.call(this),this.i=new Qe(this),this.M=this,this.G=null}h(yt,R),yt.prototype[Y]=!0,yt.prototype.removeEventListener=function(c,p,_,P){Ko(this,c,p,_,P)};function At(c,p){var _,P=c.G;if(P)for(_=[];P;P=P.G)_.push(P);if(c=c.M,P=p.type||p,typeof p=="string")p=new N(p,c);else if(p instanceof N)p.target=p.target||c;else{var O=p;p=new N(P,c),We(p,O)}O=!0;let L,W;if(_)for(W=_.length-1;W>=0;W--)L=p.g=_[W],O=mu(L,P,!0,p)&&O;if(L=p.g=c,O=mu(L,P,!0,p)&&O,O=mu(L,P,!1,p)&&O,_)for(W=0;W<_.length;W++)L=p.g=_[W],O=mu(L,P,!1,p)&&O}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var c=this.i;for(const p in c.g){const _=c.g[p];for(let P=0;P<_.length;P++)F(_[P]);delete c.g[p],c.h--}}this.G=null},yt.prototype.J=function(c,p,_,P){return this.i.add(String(c),p,!1,_,P)},yt.prototype.K=function(c,p,_,P){return this.i.add(String(c),p,!0,_,P)};function mu(c,p,_,P){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();let O=!0;for(let L=0;L<p.length;++L){const W=p[L];if(W&&!W.da&&W.capture==_){const ae=W.listener,Je=W.ha||W.src;W.fa&&Bt(c.i,W),O=ae.call(Je,P)!==!1&&O}}return O&&!P.defaultPrevented}function KC(c,p){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(c,p||0)}function Jv(c){c.g=KC(()=>{c.g=null,c.i&&(c.i=!1,Jv(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class YC extends R{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Jv(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qo(c){R.call(this),this.h=c,this.g={}}h(Qo,R);var Zv=[];function e_(c){z(c.g,function(p,_){this.g.hasOwnProperty(_)&&Yo(p)},c),c.g={}}Qo.prototype.N=function(){Qo.Z.N.call(this),e_(this)},Qo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sh=o.JSON.stringify,QC=o.JSON.parse,XC=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function t_(){}function n_(){}var Xo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function bh(){N.call(this,"d")}h(bh,N);function Ph(){N.call(this,"c")}h(Ph,N);var Li={},r_=null;function gu(){return r_=r_||new yt}Li.Ia="serverreachability";function i_(c){N.call(this,Li.Ia,c)}h(i_,N);function Jo(c){const p=gu();At(p,new i_(p))}Li.STAT_EVENT="statevent";function s_(c,p){N.call(this,Li.STAT_EVENT,c),this.stat=p}h(s_,N);function kt(c){const p=gu();At(p,new s_(p,c))}Li.Ja="timingevent";function o_(c,p){N.call(this,Li.Ja,c),this.size=p}h(o_,N);function Zo(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},p)}function ea(){this.g=!0}ea.prototype.ua=function(){this.g=!1};function JC(c,p,_,P,O,L){c.info(function(){if(c.g)if(L){var W="",ae=L.split("&");for(let _e=0;_e<ae.length;_e++){var Je=ae[_e].split("=");if(Je.length>1){const nt=Je[0];Je=Je[1];const Un=nt.split("_");W=Un.length>=2&&Un[1]=="type"?W+(nt+"="+Je+"&"):W+(nt+"=redacted&")}}}else W=null;else W=L;return"XMLHTTP REQ ("+P+") [attempt "+O+"]: "+p+`
`+_+`
`+W})}function ZC(c,p,_,P,O,L,W){c.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+O+"]: "+p+`
`+_+`
`+L+" "+W})}function Rs(c,p,_,P){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+tA(c,_)+(P?" "+P:"")})}function eA(c,p){c.info(function(){return"TIMEOUT: "+p})}ea.prototype.info=function(){};function tA(c,p){if(!c.g)return p;if(!p)return null;try{const L=JSON.parse(p);if(L){for(c=0;c<L.length;c++)if(Array.isArray(L[c])){var _=L[c];if(!(_.length<2)){var P=_[1];if(Array.isArray(P)&&!(P.length<1)){var O=P[0];if(O!="noop"&&O!="stop"&&O!="close")for(let W=1;W<P.length;W++)P[W]=""}}}}return Sh(L)}catch{return p}}var yu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},a_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},l_;function Ch(){}h(Ch,t_),Ch.prototype.g=function(){return new XMLHttpRequest},l_=new Ch;function ta(c){return encodeURIComponent(String(c))}function nA(c){var p=1;c=c.split(":");const _=[];for(;p>0&&c.length;)_.push(c.shift()),p--;return c.length&&_.push(c.join(":")),_}function Dr(c,p,_,P){this.j=c,this.i=p,this.l=_,this.S=P||1,this.V=new Qo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new u_}function u_(){this.i=null,this.g="",this.h=!1}var c_={},Ah={};function kh(c,p,_){c.M=1,c.A=_u(jn(p)),c.u=_,c.R=!0,d_(c,null)}function d_(c,p){c.F=Date.now(),vu(c),c.B=jn(c.A);var _=c.B,P=c.S;Array.isArray(P)||(P=[String(P)]),I_(_.i,"t",P),c.C=0,_=c.j.L,c.h=new u_,c.g=z_(c.j,_?p:null,!c.u),c.P>0&&(c.O=new YC(u(c.Y,c,c.g),c.P)),p=c.V,_=c.g,P=c.ba;var O="readystatechange";Array.isArray(O)||(O&&(Zv[0]=O.toString()),O=Zv);for(let L=0;L<O.length;L++){const W=On(_,O[L],P||p.handleEvent,!1,p.h||p);if(!W)break;p.g[W.key]=W}p=c.J?Q(c.J):{},c.u?(c.v||(c.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,p)):(c.v="GET",c.g.ea(c.B,c.v,null,p)),Jo(),JC(c.i,c.v,c.B,c.l,c.S,c.u)}Dr.prototype.ba=function(c){c=c.target;const p=this.O;p&&Or(c)==3?p.j():this.Y(c)},Dr.prototype.Y=function(c){try{if(c==this.g)e:{const ae=Or(this.g),Je=this.g.ya(),_e=this.g.ca();if(!(ae<3)&&(ae!=3||this.g&&(this.h.h||this.g.la()||R_(this.g)))){this.K||ae!=4||Je==7||(Je==8||_e<=0?Jo(3):Jo(2)),Rh(this);var p=this.g.ca();this.X=p;var _=rA(this);if(this.o=p==200,ZC(this.i,this.v,this.B,this.l,this.S,ae,p),this.o){if(this.U&&!this.L){t:{if(this.g){var P,O=this.g;if((P=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(P)){var L=P;break t}}L=null}if(c=L)Rs(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Nh(this,c);else{this.o=!1,this.m=3,kt(12),ji(this),na(this);break e}}if(this.R){c=!0;let nt;for(;!this.K&&this.C<_.length;)if(nt=iA(this,_),nt==Ah){ae==4&&(this.m=4,kt(14),c=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(nt==c_){this.m=4,kt(15),Rs(this.i,this.l,_,"[Invalid Chunk]"),c=!1;break}else Rs(this.i,this.l,nt,null),Nh(this,nt);if(h_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ae!=4||_.length!=0||this.h.h||(this.m=1,kt(16),c=!1),this.o=this.o&&c,!c)Rs(this.i,this.l,_,"[Invalid Chunked Response]"),ji(this),na(this);else if(_.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Fh(W),W.P=!0,kt(11))}}else Rs(this.i,this.l,_,null),Nh(this,_);ae==4&&ji(this),this.o&&!this.K&&(ae==4?j_(this.j,this):(this.o=!1,vu(this)))}else vA(this.g),p==400&&_.indexOf("Unknown SID")>0?(this.m=3,kt(12)):(this.m=0,kt(13)),ji(this),na(this)}}}catch{}finally{}};function rA(c){if(!h_(c))return c.g.la();const p=R_(c.g);if(p==="")return"";let _="";const P=p.length,O=Or(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return ji(c),na(c),"";c.h.i=new o.TextDecoder}for(let L=0;L<P;L++)c.h.h=!0,_+=c.h.i.decode(p[L],{stream:!(O&&L==P-1)});return p.length=0,c.h.g+=_,c.C=0,c.h.g}function h_(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function iA(c,p){var _=c.C,P=p.indexOf(`
`,_);return P==-1?Ah:(_=Number(p.substring(_,P)),isNaN(_)?c_:(P+=1,P+_>p.length?Ah:(p=p.slice(P,P+_),c.C=P+_,p)))}Dr.prototype.cancel=function(){this.K=!0,ji(this)};function vu(c){c.T=Date.now()+c.H,f_(c,c.H)}function f_(c,p){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Zo(u(c.aa,c),p)}function Rh(c){c.D&&(o.clearTimeout(c.D),c.D=null)}Dr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(eA(this.i,this.B),this.M!=2&&(Jo(),kt(17)),ji(this),this.m=2,na(this)):f_(this,this.T-c)};function na(c){c.j.I==0||c.K||j_(c.j,c)}function ji(c){Rh(c);var p=c.O;p&&typeof p.dispose=="function"&&p.dispose(),c.O=null,e_(c.V),c.g&&(p=c.g,c.g=null,p.abort(),p.dispose())}function Nh(c,p){try{var _=c.j;if(_.I!=0&&(_.g==c||Dh(_.h,c))){if(!c.L&&Dh(_.h,c)&&_.I==3){try{var P=_.Ba.g.parse(p)}catch{P=null}if(Array.isArray(P)&&P.length==3){var O=P;if(O[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<c.F)Iu(_),xu(_);else break e;Uh(_),kt(18)}}else _.xa=O[1],0<_.xa-_.K&&O[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Zo(u(_.Va,_),6e3));g_(_.h)<=1&&_.ta&&(_.ta=void 0)}else Fi(_,11)}else if((c.L||_.g==c)&&Iu(_),!A(p))for(O=_.Ba.g.parse(p),p=0;p<O.length;p++){let _e=O[p];const nt=_e[0];if(!(nt<=_.K))if(_.K=nt,_e=_e[1],_.I==2)if(_e[0]=="c"){_.M=_e[1],_.ba=_e[2];const Un=_e[3];Un!=null&&(_.ka=Un,_.j.info("VER="+_.ka));const Bi=_e[4];Bi!=null&&(_.za=Bi,_.j.info("SVER="+_.za));const Lr=_e[5];Lr!=null&&typeof Lr=="number"&&Lr>0&&(P=1.5*Lr,_.O=P,_.j.info("backChannelRequestTimeoutMs_="+P)),P=_;const jr=c.g;if(jr){const bu=jr.g?jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bu){var L=P.h;L.g||bu.indexOf("spdy")==-1&&bu.indexOf("quic")==-1&&bu.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Mh(L,L.h),L.h=null))}if(P.G){const Bh=jr.g?jr.g.getResponseHeader("X-HTTP-Session-Id"):null;Bh&&(P.wa=Bh,Ee(P.J,P.G,Bh))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-c.F,_.j.info("Handshake RTT: "+_.T+"ms")),P=_;var W=c;if(P.na=B_(P,P.L?P.ba:null,P.W),W.L){y_(P.h,W);var ae=W,Je=P.O;Je&&(ae.H=Je),ae.D&&(Rh(ae),vu(ae)),P.g=W}else O_(P);_.i.length>0&&Eu(_)}else _e[0]!="stop"&&_e[0]!="close"||Fi(_,7);else _.I==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?Fi(_,7):jh(_):_e[0]!="noop"&&_.l&&_.l.qa(_e),_.A=0)}}Jo(4)}catch{}}var sA=class{constructor(c,p){this.g=c,this.map=p}};function p_(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function m_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function g_(c){return c.h?1:c.g?c.g.size:0}function Dh(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Mh(c,p){c.g?c.g.add(p):c.h=p}function y_(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}p_.prototype.cancel=function(){if(this.i=v_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function v_(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const _ of c.g.values())p=p.concat(_.G);return p}return y(c.i)}var __=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oA(c,p){if(c){c=c.split("&");for(let _=0;_<c.length;_++){const P=c[_].indexOf("=");let O,L=null;P>=0?(O=c[_].substring(0,P),L=c[_].substring(P+1)):O=c[_],p(O,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Mr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;c instanceof Mr?(this.l=c.l,ra(this,c.j),this.o=c.o,this.g=c.g,ia(this,c.u),this.h=c.h,Vh(this,S_(c.i)),this.m=c.m):c&&(p=String(c).match(__))?(this.l=!1,ra(this,p[1]||"",!0),this.o=sa(p[2]||""),this.g=sa(p[3]||"",!0),ia(this,p[4]),this.h=sa(p[5]||"",!0),Vh(this,p[6]||"",!0),this.m=sa(p[7]||"")):(this.l=!1,this.i=new aa(null,this.l))}Mr.prototype.toString=function(){const c=[];var p=this.j;p&&c.push(oa(p,w_,!0),":");var _=this.g;return(_||p=="file")&&(c.push("//"),(p=this.o)&&c.push(oa(p,w_,!0),"@"),c.push(ta(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&c.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(oa(_,_.charAt(0)=="/"?uA:lA,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",oa(_,dA)),c.join("")},Mr.prototype.resolve=function(c){const p=jn(this);let _=!!c.j;_?ra(p,c.j):_=!!c.o,_?p.o=c.o:_=!!c.g,_?p.g=c.g:_=c.u!=null;var P=c.h;if(_)ia(p,c.u);else if(_=!!c.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var O=p.h.lastIndexOf("/");O!=-1&&(P=p.h.slice(0,O+1)+P)}if(O=P,O==".."||O==".")P="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){P=O.lastIndexOf("/",0)==0,O=O.split("/");const L=[];for(let W=0;W<O.length;){const ae=O[W++];ae=="."?P&&W==O.length&&L.push(""):ae==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),P&&W==O.length&&L.push("")):(L.push(ae),P=!0)}P=L.join("/")}else P=O}return _?p.h=P:_=c.i.toString()!=="",_?Vh(p,S_(c.i)):_=!!c.m,_&&(p.m=c.m),p};function jn(c){return new Mr(c)}function ra(c,p,_){c.j=_?sa(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function ia(c,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);c.u=p}else c.u=null}function Vh(c,p,_){p instanceof aa?(c.i=p,hA(c.i,c.l)):(_||(p=oa(p,cA)),c.i=new aa(p,c.l))}function Ee(c,p,_){c.i.set(p,_)}function _u(c){return Ee(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function sa(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function oa(c,p,_){return typeof c=="string"?(c=encodeURI(c).replace(p,aA),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function aA(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var w_=/[#\/\?@]/g,lA=/[#\?:]/g,uA=/[#\?]/g,cA=/[#\?@]/g,dA=/#/g;function aa(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Ui(c){c.g||(c.g=new Map,c.h=0,c.i&&oA(c.i,function(p,_){c.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}t=aa.prototype,t.add=function(c,p){Ui(this),this.i=null,c=Ns(this,c);let _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(p),this.h+=1,this};function T_(c,p){Ui(c),p=Ns(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function x_(c,p){return Ui(c),p=Ns(c,p),c.g.has(p)}t.forEach=function(c,p){Ui(this),this.g.forEach(function(_,P){_.forEach(function(O){c.call(p,O,P,this)},this)},this)};function E_(c,p){Ui(c);let _=[];if(typeof p=="string")x_(c,p)&&(_=_.concat(c.g.get(Ns(c,p))));else for(c=Array.from(c.g.values()),p=0;p<c.length;p++)_=_.concat(c[p]);return _}t.set=function(c,p){return Ui(this),this.i=null,c=Ns(this,c),x_(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=E_(this,c),c.length>0?String(c[0]):p):p};function I_(c,p,_){T_(c,p),_.length>0&&(c.i=null,c.g.set(Ns(c,p),y(_)),c.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(let P=0;P<p.length;P++){var _=p[P];const O=ta(_);_=E_(this,_);for(let L=0;L<_.length;L++){let W=O;_[L]!==""&&(W+="="+ta(_[L])),c.push(W)}}return this.i=c.join("&")};function S_(c){const p=new aa;return p.i=c.i,c.g&&(p.g=new Map(c.g),p.h=c.h),p}function Ns(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function hA(c,p){p&&!c.j&&(Ui(c),c.i=null,c.g.forEach(function(_,P){const O=P.toLowerCase();P!=O&&(T_(this,P),I_(this,O,_))},c)),c.j=p}function fA(c,p){const _=new ea;if(o.Image){const P=new Image;P.onload=d(Vr,_,"TestLoadImage: loaded",!0,p,P),P.onerror=d(Vr,_,"TestLoadImage: error",!1,p,P),P.onabort=d(Vr,_,"TestLoadImage: abort",!1,p,P),P.ontimeout=d(Vr,_,"TestLoadImage: timeout",!1,p,P),o.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=c}else p(!1)}function pA(c,p){const _=new ea,P=new AbortController,O=setTimeout(()=>{P.abort(),Vr(_,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:P.signal}).then(L=>{clearTimeout(O),L.ok?Vr(_,"TestPingServer: ok",!0,p):Vr(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(O),Vr(_,"TestPingServer: error",!1,p)})}function Vr(c,p,_,P,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),P(_)}catch{}}function mA(){this.g=new XC}function Oh(c){this.i=c.Sb||null,this.h=c.ab||!1}h(Oh,t_),Oh.prototype.g=function(){return new wu(this.i,this.h)};function wu(c,p){yt.call(this),this.H=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(wu,yt),t=wu.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=p,this.readyState=1,ua(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(p.body=c),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,la(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ua(this)),this.g&&(this.readyState=3,ua(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;b_(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function b_(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?la(this):ua(this),this.readyState==3&&b_(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,la(this))},t.Na=function(c){this.g&&(this.response=c,la(this))},t.ga=function(){this.g&&la(this)};function la(c){c.readyState=4,c.l=null,c.j=null,c.B=null,ua(c)}t.setRequestHeader=function(c,p){this.A.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=p.next();return c.join(`\r
`)};function ua(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(wu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function P_(c){let p="";return z(c,function(_,P){p+=P,p+=":",p+=_,p+=`\r
`}),p}function Lh(c,p,_){e:{for(P in _){var P=!1;break e}P=!0}P||(_=P_(_),typeof c=="string"?_!=null&&ta(_):Ee(c,p,_))}function Le(c){yt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(Le,yt);var gA=/^https?$/i,yA=["POST","PUT"];t=Le.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,p,_,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():l_.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(L){C_(this,L);return}if(c=_||"",_=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var O in P)_.set(O,P[O]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const L of P.keys())_.set(L,P.get(L));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(_.keys()).find(L=>L.toLowerCase()=="content-type"),O=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(yA,p,void 0)>=0)||P||O||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,W]of _)this.g.setRequestHeader(L,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(L){C_(this,L)}};function C_(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.o=5,A_(c),Tu(c)}function A_(c){c.A||(c.A=!0,At(c,"complete"),At(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,At(this,"complete"),At(this,"abort"),Tu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Tu(this,!0)),Le.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?k_(this):this.Xa())},t.Xa=function(){k_(this)};function k_(c){if(c.h&&typeof s<"u"){if(c.v&&Or(c)==4)setTimeout(c.Ca.bind(c),0);else if(At(c,"readystatechange"),Or(c)==4){c.h=!1;try{const L=c.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var P;if(P=L===0){let W=String(c.D).match(__)[1]||null;!W&&o.self&&o.self.location&&(W=o.self.location.protocol.slice(0,-1)),P=!gA.test(W?W.toLowerCase():"")}_=P}if(_)At(c,"complete"),At(c,"success");else{c.o=6;try{var O=Or(c)>2?c.g.statusText:""}catch{O=""}c.l=O+" ["+c.ca()+"]",A_(c)}}finally{Tu(c)}}}}function Tu(c,p){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const _=c.g;c.g=null,p||At(c,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Or(c){return c.g?c.g.readyState:0}t.ca=function(){try{return Or(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),QC(p)}};function R_(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function vA(c){const p={};c=(c.g&&Or(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<c.length;P++){if(A(c[P]))continue;var _=nA(c[P]);const O=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const L=p[O]||[];p[O]=L,L.push(_)}$(p,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ca(c,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||p}function N_(c){this.za=0,this.i=[],this.j=new ea,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ca("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ca("baseRetryDelayMs",5e3,c),this.Za=ca("retryDelaySeedMs",1e4,c),this.Ta=ca("forwardChannelMaxRetries",2,c),this.va=ca("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new p_(c&&c.concurrentRequestLimit),this.Ba=new mA,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=N_.prototype,t.ka=8,t.I=1,t.connect=function(c,p,_,P){kt(0),this.W=c,this.H=p||{},_&&P!==void 0&&(this.H.OSID=_,this.H.OAID=P),this.F=this.X,this.J=B_(this,null,this.W),Eu(this)};function jh(c){if(D_(c),c.I==3){var p=c.V++,_=jn(c.J);if(Ee(_,"SID",c.M),Ee(_,"RID",p),Ee(_,"TYPE","terminate"),da(c,_),p=new Dr(c,c.j,p),p.M=2,p.A=_u(jn(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!_&&o.Image&&(new Image().src=p.A,_=!0),_||(p.g=z_(p.j,null),p.g.ea(p.A)),p.F=Date.now(),vu(p)}F_(c)}function xu(c){c.g&&(Fh(c),c.g.cancel(),c.g=null)}function D_(c){xu(c),c.v&&(o.clearTimeout(c.v),c.v=null),Iu(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Eu(c){if(!m_(c.h)&&!c.m){c.m=!0;var p=c.Ea;k||x(),M||(k(),M=!0),S.add(p,c),c.D=0}}function _A(c,p){return g_(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=p.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Zo(u(c.Ea,c,p),U_(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const O=new Dr(this,this.j,c);let L=this.o;if(this.U&&(L?(L=Q(L),We(L,this.U)):L=this.U),this.u!==null||this.R||(O.J=L,L=null),this.S)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var P=this.i[_];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(p+=P,p>4096){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=V_(this,O,p),_=jn(this.J),Ee(_,"RID",c),Ee(_,"CVER",22),this.G&&Ee(_,"X-HTTP-Session-Id",this.G),da(this,_),L&&(this.R?p="headers="+ta(P_(L))+"&"+p:this.u&&Lh(_,this.u,L)),Mh(this.h,O),this.Ra&&Ee(_,"TYPE","init"),this.S?(Ee(_,"$req",p),Ee(_,"SID","null"),O.U=!0,kh(O,_,null)):kh(O,_,p),this.I=2}}else this.I==3&&(c?M_(this,c):this.i.length==0||m_(this.h)||M_(this))};function M_(c,p){var _;p?_=p.l:_=c.V++;const P=jn(c.J);Ee(P,"SID",c.M),Ee(P,"RID",_),Ee(P,"AID",c.K),da(c,P),c.u&&c.o&&Lh(P,c.u,c.o),_=new Dr(c,c.j,_,c.D+1),c.u===null&&(_.J=c.o),p&&(c.i=p.G.concat(c.i)),p=V_(c,_,1e3),_.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Mh(c.h,_),kh(_,P,p)}function da(c,p){c.H&&z(c.H,function(_,P){Ee(p,P,_)}),c.l&&z({},function(_,P){Ee(p,P,_)})}function V_(c,p,_){_=Math.min(c.i.length,_);const P=c.l?u(c.l.Ka,c.l,c):null;e:{var O=c.i;let ae=-1;for(;;){const Je=["count="+_];ae==-1?_>0?(ae=O[0].g,Je.push("ofs="+ae)):ae=0:Je.push("ofs="+ae);let _e=!0;for(let nt=0;nt<_;nt++){var L=O[nt].g;const Un=O[nt].map;if(L-=ae,L<0)ae=Math.max(0,O[nt].g-100),_e=!1;else try{L="req"+L+"_"||"";try{var W=Un instanceof Map?Un:Object.entries(Un);for(const[Bi,Lr]of W){let jr=Lr;a(Lr)&&(jr=Sh(Lr)),Je.push(L+Bi+"="+encodeURIComponent(jr))}}catch(Bi){throw Je.push(L+"type="+encodeURIComponent("_badmap")),Bi}}catch{P&&P(Un)}}if(_e){W=Je.join("&");break e}}W=void 0}return c=c.i.splice(0,_),p.G=c,W}function O_(c){if(!c.g&&!c.v){c.Y=1;var p=c.Da;k||x(),M||(k(),M=!0),S.add(p,c),c.A=0}}function Uh(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Zo(u(c.Da,c),U_(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,L_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Zo(u(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,kt(10),xu(this),L_(this))};function Fh(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function L_(c){c.g=new Dr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var p=jn(c.na);Ee(p,"RID","rpc"),Ee(p,"SID",c.M),Ee(p,"AID",c.K),Ee(p,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ee(p,"TO",c.ia),Ee(p,"TYPE","xmlhttp"),da(c,p),c.u&&c.o&&Lh(p,c.u,c.o),c.O&&(c.g.H=c.O);var _=c.g;c=c.ba,_.M=1,_.A=_u(jn(p)),_.u=null,_.R=!0,d_(_,c)}t.Va=function(){this.C!=null&&(this.C=null,xu(this),Uh(this),kt(19))};function Iu(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function j_(c,p){var _=null;if(c.g==p){Iu(c),Fh(c),c.g=null;var P=2}else if(Dh(c.h,p))_=p.G,y_(c.h,p),P=1;else return;if(c.I!=0){if(p.o)if(P==1){_=p.u?p.u.length:0,p=Date.now()-p.F;var O=c.D;P=gu(),At(P,new o_(P,_)),Eu(c)}else O_(c);else if(O=p.m,O==3||O==0&&p.X>0||!(P==1&&_A(c,p)||P==2&&Uh(c)))switch(_&&_.length>0&&(p=c.h,p.i=p.i.concat(_)),O){case 1:Fi(c,5);break;case 4:Fi(c,10);break;case 3:Fi(c,6);break;default:Fi(c,2)}}}function U_(c,p){let _=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(_*=2),_*p}function Fi(c,p){if(c.j.info("Error code "+p),p==2){var _=u(c.bb,c),P=c.Ua;const O=!P;P=new Mr(P||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ra(P,"https"),_u(P),O?fA(P.toString(),_):pA(P.toString(),_)}else kt(2);c.I=0,c.l&&c.l.pa(p),F_(c),D_(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),kt(2)):(this.j.info("Failed to ping google.com"),kt(1))};function F_(c){if(c.I=0,c.ja=[],c.l){const p=v_(c.h);(p.length!=0||c.i.length!=0)&&(T(c.ja,p),T(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function B_(c,p,_){var P=_ instanceof Mr?jn(_):new Mr(_);if(P.g!="")p&&(P.g=p+"."+P.g),ia(P,P.u);else{var O=o.location;P=O.protocol,p=p?p+"."+O.hostname:O.hostname,O=+O.port;const L=new Mr(null);P&&ra(L,P),p&&(L.g=p),O&&ia(L,O),_&&(L.h=_),P=L}return _=c.G,p=c.wa,_&&p&&Ee(P,_,p),Ee(P,"VER",c.ka),da(c,P),P}function z_(c,p,_){if(p&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Aa&&!c.ma?new Le(new Oh({ab:_})):new Le(c.ma),p.Fa(c.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $_(){}t=$_.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Su(){}Su.prototype.g=function(c,p){return new Jt(c,p)};function Jt(c,p){yt.call(this),this.g=new N_(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(c?c["X-WebChannel-Client-Profile"]=p.sa:c={"X-WebChannel-Client-Profile":p.sa}),this.g.U=c,(c=p&&p.Qb)&&!A(c)&&(this.g.u=c),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!A(p)&&(this.g.G=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Ds(this)}h(Jt,yt),Jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){jh(this.g)},Jt.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.v&&(_={},_.__data__=Sh(c),c=_);p.i.push(new sA(p.Ya++,c)),p.I==3&&Eu(p)},Jt.prototype.N=function(){this.g.l=null,delete this.j,jh(this.g),delete this.g,Jt.Z.N.call(this)};function W_(c){bh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const _ in p){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}h(W_,bh);function q_(){Ph.call(this),this.status=1}h(q_,Ph);function Ds(c){this.g=c}h(Ds,$_),Ds.prototype.ra=function(){At(this.g,"a")},Ds.prototype.qa=function(c){At(this.g,new W_(c))},Ds.prototype.pa=function(c){At(this.g,new q_)},Ds.prototype.oa=function(){At(this.g,"b")},Su.prototype.createWebChannel=Su.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,RS=function(){return new Su},kS=function(){return gu()},AS=Li,sm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yu.NO_ERROR=0,yu.TIMEOUT=8,yu.HTTP_ERROR=6,vc=yu,a_.COMPLETE="complete",CS=a_,n_.EventType=Xo,Xo.OPEN="a",Xo.CLOSE="b",Xo.ERROR="c",Xo.MESSAGE="d",yt.prototype.listen=yt.prototype.J,Da=n_,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,PS=Le}).apply(typeof qu<"u"?qu:typeof self<"u"?self:typeof window<"u"?window:{});const $0="@firebase/firestore",W0="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $o="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Ty("@firebase/firestore");function Os(){return ys.logLevel}function H(t,...e){if(ys.logLevel<=ue.DEBUG){const n=e.map(Dy);ys.debug(`Firestore (${$o}): ${t}`,...n)}}function br(t,...e){if(ys.logLevel<=ue.ERROR){const n=e.map(Dy);ys.error(`Firestore (${$o}): ${t}`,...n)}}function Po(t,...e){if(ys.logLevel<=ue.WARN){const n=e.map(Dy);ys.warn(`Firestore (${$o}): ${t}`,...n)}}function Dy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,NS(t,r,n)}function NS(t,e,n){let r=`FIRESTORE (${$o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw br(r),new Error(r)}function ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||NS(e,i,r)}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class lO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uO{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new DS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Et(e)}}class cO{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class dO{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new cO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);const r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new q0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new q0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=fO(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function om(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return If(i)===If(s)?ce(i,s):If(i)?1:-1}return ce(t.length,e.length)}const pO=55296,mO=57343;function If(t){const e=t.charCodeAt(0);return e>=pO&&e<=mO}function Co(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="__name__";class $n{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return $n.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof $n?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=$n.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ce(e.length,n.length)}static compareSegments(e,n){const r=$n.isNumericId(e),i=$n.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?$n.extractNumericId(e).compare($n.extractNumericId(n)):om(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hi.fromString(e.substring(4,e.length-2))}}class we extends $n{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new we(n)}static emptyPath(){return new we([])}}const gO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends $n{construct(e,n,r){return new dt(e,n,r)}static isValidIdentifier(e){return gO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===H0}static keyField(){return new dt([H0])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new q(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new q(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new q(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(n)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.path=e}static fromPath(e){return new J(we.fromString(e))}static fromName(e){return new J(we.fromString(e).popFirst(5))}static empty(){return new J(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new we(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t,e,n){if(!n)throw new q(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yO(t,e,n,r){if(e===!0&&r===!0)throw new q(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function G0(t){if(!J.isDocumentKey(t))throw new q(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function K0(t){if(J.isDocumentKey(t))throw new q(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function VS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Xd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function Ot(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xd(t);throw new q(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function vO(t,e){if(e<=0)throw new q(j.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(t,e){const n={typeString:t};return e&&(n.value=e),n}function Jl(t,e){if(!VS(t))throw new q(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new q(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=-62135596800,Q0=1e6;class Se{static now(){return Se.fromMillis(Date.now())}static fromDate(e){return Se.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Q0);return new Se(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Y0)throw new q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Q0}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Se._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jl(e,Se._jsonSchema))return new Se(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Y0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Se._jsonSchemaVersion="firestore/timestamp/1.0",Se._jsonSchema={type:Ye("string",Se._jsonSchemaVersion),seconds:Ye("number"),nanoseconds:Ye("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{static fromTimestamp(e){return new se(e)}static min(){return new se(new Se(0,0))}static max(){return new se(new Se(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=-1;function _O(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new Se(n+1,0):new Se(n,r));return new vi(i,J.empty(),e)}function wO(t){return new vi(t.readTime,t.key,Cl)}class vi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new vi(se.min(),J.empty(),Cl)}static max(){return new vi(se.max(),J.empty(),Cl)}}function TO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==xO)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(i=>i?U.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new U((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new U((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function IO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Jd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=-1;function Zd(t){return t==null}function ad(t){return t===0&&1/t==-1/0}function SO(t){return typeof t=="number"&&Number.isInteger(t)&&!ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="";function bO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=X0(e)),e=PO(t.get(n),e);return X0(e)}function PO(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case OS:n+="";break;default:n+=s}}return n}function X0(t){return t+OS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ni(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n){this.comparator=e,this.root=n||ct.EMPTY}insert(e,n){return new Me(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new Me(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hu(this.root,e,this.comparator,!0)}}class Hu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ct.RED,this.left=i??ct.EMPTY,this.right=s??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ct(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ct.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Z0(this.data.getIterator())}getIteratorFrom(e){return new Z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tt(this.comparator);return n.data=e,n}}class Z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new sn([])}unionWith(e){let n=new tt(dt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Co(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new jS("Invalid base64 string: "+s):s}}(e);return new pt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const CO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _i(t){if(ge(!!t,39018),typeof t=="string"){let e=0;const n=CO.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wi(t){return typeof t=="string"?pt.fromBase64String(t):pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="server_timestamp",FS="__type__",BS="__previous_value__",zS="__local_write_time__";function Oy(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[FS])==null?void 0:r.stringValue)===US}function eh(t){const e=t.mapValue.fields[BS];return Oy(e)?eh(e):e}function Al(t){const e=_i(t.mapValue.fields[zS].timestampValue);return new Se(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n,r,i,s,o,a,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const ld="(default)";class kl{constructor(e,n){this.projectId=e,this.database=n||ld}static empty(){return new kl("","")}get isDefaultDatabase(){return this.database===ld}isEqual(e){return e instanceof kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="__type__",kO="__max__",Gu={mapValue:{}},WS="__vector__",ud="value";function Ti(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Oy(t)?4:NO(t)?9007199254740991:RO(t)?10:11:ne(28295,{value:t})}function nr(t,e){if(t===e)return!0;const n=Ti(t);if(n!==Ti(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Al(t).isEqual(Al(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=_i(i.timestampValue),a=_i(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return wi(i.bytesValue).isEqual(wi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Fe(i.geoPointValue.latitude)===Fe(s.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Fe(i.integerValue)===Fe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Fe(i.doubleValue),a=Fe(s.doubleValue);return o===a?ad(o)===ad(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Co(t.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(J0(o)!==J0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!nr(o[l],a[l])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function Rl(t,e){return(t.values||[]).find(n=>nr(n,e))!==void 0}function Ao(t,e){if(t===e)return 0;const n=Ti(t),r=Ti(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Fe(s.integerValue||s.doubleValue),l=Fe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return eT(t.timestampValue,e.timestampValue);case 4:return eT(Al(t),Al(e));case 5:return om(t.stringValue,e.stringValue);case 6:return function(s,o){const a=wi(s),l=wi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=ce(a[u],l[u]);if(d!==0)return d}return ce(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ce(Fe(s.latitude),Fe(o.latitude));return a!==0?a:ce(Fe(s.longitude),Fe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return tT(t.arrayValue,e.arrayValue);case 10:return function(s,o){var f,y,T,b;const a=s.fields||{},l=o.fields||{},u=(f=a[ud])==null?void 0:f.arrayValue,d=(y=l[ud])==null?void 0:y.arrayValue,h=ce(((T=u==null?void 0:u.values)==null?void 0:T.length)||0,((b=d==null?void 0:d.values)==null?void 0:b.length)||0);return h!==0?h:tT(u,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Gu.mapValue&&o===Gu.mapValue)return 0;if(s===Gu.mapValue)return 1;if(o===Gu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const f=om(l[h],d[h]);if(f!==0)return f;const y=Ao(a[l[h]],u[d[h]]);if(y!==0)return y}return ce(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function eT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=_i(t),r=_i(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function tT(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ao(n[i],r[i]);if(s)return s}return ce(n.length,r.length)}function ko(t){return am(t)}function am(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=_i(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=am(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${am(n.fields[o])}`;return i+"}"}(t.mapValue):ne(61005,{value:t})}function _c(t){switch(Ti(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=eh(t);return e?16+_c(e):16;case 5:return 2*t.stringValue.length;case 6:return wi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+_c(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ni(r.fields,(s,o)=>{i+=s.length+_c(o)}),i}(t.mapValue);default:throw ne(13486,{value:t})}}function nT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function lm(t){return!!t&&"integerValue"in t}function Ly(t){return!!t&&"arrayValue"in t}function rT(t){return!!t&&"nullValue"in t}function iT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wc(t){return!!t&&"mapValue"in t}function RO(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[$S])==null?void 0:r.stringValue)===WS}function Ya(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ni(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ya(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ya(t.arrayValue.values[n]);return e}return{...t}}function NO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.value=e}static empty(){return new Ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ya(n)}setAll(e){let n=dt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ya(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());wc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];wc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ni(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ht(Ya(this.value))}}function qS(t){const e=[];return Ni(t.fields,(n,r)=>{const i=new dt([n]);if(wc(r)){const s=qS(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new St(e,0,se.min(),se.min(),se.min(),Ht.empty(),0)}static newFoundDocument(e,n,r,i){return new St(e,1,n,se.min(),r,i,0)}static newNoDocument(e,n){return new St(e,2,n,se.min(),se.min(),Ht.empty(),0)}static newUnknownDocument(e,n){return new St(e,3,n,se.min(),se.min(),Ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,n){this.position=e,this.inclusive=n}}function sT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),n.key):r=Ao(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function oT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n="asc"){this.field=e,this.dir=n}}function DO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{}class Ke extends HS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new VO(e,n,r):n==="array-contains"?new jO(e,r):n==="in"?new UO(e,r):n==="not-in"?new FO(e,r):n==="array-contains-any"?new BO(e,r):new Ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new OO(e,r):new LO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ao(n,this.value)):n!==null&&Ti(this.value)===Ti(n)&&this.matchesComparison(Ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mn extends HS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Mn(e,n)}matches(e){return GS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function GS(t){return t.op==="and"}function KS(t){return MO(t)&&GS(t)}function MO(t){for(const e of t.filters)if(e instanceof Mn)return!1;return!0}function um(t){if(t instanceof Ke)return t.field.canonicalString()+t.op.toString()+ko(t.value);if(KS(t))return t.filters.map(e=>um(e)).join(",");{const e=t.filters.map(n=>um(n)).join(",");return`${t.op}(${e})`}}function YS(t,e){return t instanceof Ke?function(r,i){return i instanceof Ke&&r.op===i.op&&r.field.isEqual(i.field)&&nr(r.value,i.value)}(t,e):t instanceof Mn?function(r,i){return i instanceof Mn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&YS(o,i.filters[a]),!0):!1}(t,e):void ne(19439)}function QS(t){return t instanceof Ke?function(n){return`${n.field.canonicalString()} ${n.op} ${ko(n.value)}`}(t):t instanceof Mn?function(n){return n.op.toString()+" {"+n.getFilters().map(QS).join(" ,")+"}"}(t):"Filter"}class VO extends Ke{constructor(e,n,r){super(e,n,r),this.key=J.fromName(r.referenceValue)}matches(e){const n=J.comparator(e.key,this.key);return this.matchesComparison(n)}}class OO extends Ke{constructor(e,n){super(e,"in",n),this.keys=XS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class LO extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=XS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function XS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>J.fromName(r.referenceValue))}class jO extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ly(n)&&Rl(n.arrayValue,this.value)}}class UO extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Rl(this.value.arrayValue,n)}}class FO extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Rl(this.value.arrayValue,n)}}class BO extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ly(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Rl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function aT(t,e=null,n=[],r=[],i=null,s=null,o=null){return new zO(t,e,n,r,i,s,o)}function jy(t){const e=oe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>um(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Zd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ko(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ko(r)).join(",")),e.Te=n}return e.Te}function Uy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!YS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!oT(t.startAt,e.startAt)&&oT(t.endAt,e.endAt)}function cm(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $O(t,e,n,r,i,s,o,a){return new Ho(t,e,n,r,i,s,o,a)}function th(t){return new Ho(t)}function lT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function JS(t){return t.collectionGroup!==null}function Qa(t){const e=oe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tt(dt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Nl(s,r))}),n.has(dt.keyField().canonicalString())||e.Ie.push(new Nl(dt.keyField(),r))}return e.Ie}function Qn(t){const e=oe(t);return e.Ee||(e.Ee=WO(e,Qa(t))),e.Ee}function WO(t,e){if(t.limitType==="F")return aT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Nl(i.field,s)});const n=t.endAt?new cd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cd(t.startAt.position,t.startAt.inclusive):null;return aT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dm(t,e){const n=t.filters.concat([e]);return new Ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dd(t,e,n){return new Ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function nh(t,e){return Uy(Qn(t),Qn(e))&&t.limitType===e.limitType}function ZS(t){return`${jy(Qn(t))}|lt:${t.limitType}`}function Ls(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>QS(i)).join(", ")}]`),Zd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ko(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ko(i)).join(",")),`Target(${r})`}(Qn(t))}; limitType=${t.limitType})`}function rh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Qa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=sT(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Qa(r),i)||r.endAt&&!function(o,a,l){const u=sT(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Qa(r),i))}(t,e)}function qO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function eb(t){return(e,n)=>{let r=!1;for(const i of Qa(t)){const s=HO(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function HO(t,e,n){const r=t.field.isKeyField()?J.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Ao(l,u):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ni(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return LS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=new Me(J.comparator);function Pr(){return GO}const tb=new Me(J.comparator);function Ma(...t){let e=tb;for(const n of t)e=e.insert(n.key,n);return e}function nb(t){let e=tb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zi(){return Xa()}function rb(){return Xa()}function Xa(){return new Ss(t=>t.toString(),(t,e)=>t.isEqual(e))}const KO=new Me(J.comparator),YO=new tt(J.comparator);function de(...t){let e=YO;for(const n of t)e=e.add(n);return e}const QO=new tt(ce);function XO(){return QO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ad(e)?"-0":e}}function ib(t){return{integerValue:""+t}}function JO(t,e){return SO(e)?ib(e):Fy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(){this._=void 0}}function ZO(t,e,n){return t instanceof Dl?function(i,s){const o={fields:{[FS]:{stringValue:US},[zS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Oy(s)&&(s=eh(s)),s&&(o.fields[BS]=s),{mapValue:o}}(n,e):t instanceof Ml?ob(t,e):t instanceof Vl?ab(t,e):function(i,s){const o=sb(i,s),a=uT(o)+uT(i.Ae);return lm(o)&&lm(i.Ae)?ib(a):Fy(i.serializer,a)}(t,e)}function eL(t,e,n){return t instanceof Ml?ob(t,e):t instanceof Vl?ab(t,e):n}function sb(t,e){return t instanceof hd?function(r){return lm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Dl extends ih{}class Ml extends ih{constructor(e){super(),this.elements=e}}function ob(t,e){const n=lb(e);for(const r of t.elements)n.some(i=>nr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Vl extends ih{constructor(e){super(),this.elements=e}}function ab(t,e){let n=lb(e);for(const r of t.elements)n=n.filter(i=>!nr(i,r));return{arrayValue:{values:n}}}class hd extends ih{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function uT(t){return Fe(t.integerValue||t.doubleValue)}function lb(t){return Ly(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e,n){this.field=e,this.transform=n}}function nL(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ml&&i instanceof Ml||r instanceof Vl&&i instanceof Vl?Co(r.elements,i.elements,nr):r instanceof hd&&i instanceof hd?nr(r.Ae,i.Ae):r instanceof Dl&&i instanceof Dl}(t.transform,e.transform)}class rL{constructor(e,n){this.version=e,this.transformResults=n}}class Lt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Lt}static exists(e){return new Lt(void 0,e)}static updateTime(e){return new Lt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class sh{}function ub(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new oh(t.key,Lt.none()):new Zl(t.key,t.data,Lt.none());{const n=t.data,r=Ht.empty();let i=new tt(dt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Di(t.key,r,new sn(i.toArray()),Lt.none())}}function iL(t,e,n){t instanceof Zl?function(i,s,o){const a=i.value.clone(),l=dT(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Di?function(i,s,o){if(!Tc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=dT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(cb(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ja(t,e,n,r){return t instanceof Zl?function(s,o,a,l){if(!Tc(s.precondition,o))return a;const u=s.value.clone(),d=hT(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Di?function(s,o,a,l){if(!Tc(s.precondition,o))return a;const u=hT(s.fieldTransforms,l,o),d=o.data;return d.setAll(cb(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return Tc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function sL(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=sb(r.transform,i||null);s!=null&&(n===null&&(n=Ht.empty()),n.set(r.field,s))}return n||null}function cT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Co(r,i,(s,o)=>nL(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zl extends sh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Di extends sh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function cb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function dT(t,e,n){const r=new Map;ge(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,eL(o,a,n[i]))}return r}function hT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,ZO(s,o,e))}return r}class oh extends sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oL extends sh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&iL(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ja(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ja(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=rb();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=ub(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),de())}isEqual(e){return this.batchId===e.batchId&&Co(this.mutations,e.mutations,(n,r)=>cT(n,r))&&Co(this.baseMutations,e.baseMutations,(n,r)=>cT(n,r))}}class By{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return KO}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new By(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,he;function cL(t){switch(t){case j.OK:return ne(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function db(t){if(t===void 0)return br("GRPC error has no .code"),j.UNKNOWN;switch(t){case qe.OK:return j.OK;case qe.CANCELLED:return j.CANCELLED;case qe.UNKNOWN:return j.UNKNOWN;case qe.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case qe.INTERNAL:return j.INTERNAL;case qe.UNAVAILABLE:return j.UNAVAILABLE;case qe.UNAUTHENTICATED:return j.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case qe.NOT_FOUND:return j.NOT_FOUND;case qe.ALREADY_EXISTS:return j.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return j.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case qe.ABORTED:return j.ABORTED;case qe.OUT_OF_RANGE:return j.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return j.UNIMPLEMENTED;case qe.DATA_LOSS:return j.DATA_LOSS;default:return ne(39323,{code:t})}}(he=qe||(qe={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL=new hi([4294967295,4294967295],0);function fT(t){const e=dL().encode(t),n=new bS;return n.update(e),new Uint8Array(n.digest())}function pT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new hi([n,r],0),new hi([i,s],0)]}class zy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Va(`Invalid padding: ${n}`);if(r<0)throw new Va(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Va(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Va(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=hi.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(hi.fromNumber(r)));return i.compare(hL)===1&&(i=new hi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=fT(e),[r,i]=pT(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new zy(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=fT(e),[r,i]=pT(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Va extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ah(se.min(),i,new Me(ce),Pr(),de())}}class eu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new eu(r,n,de(),de(),de())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class hb{constructor(e,n){this.targetId=e,this.Ce=n}}class fb{constructor(e,n,r=pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class mT{constructor(){this.ve=0,this.Fe=gT(),this.Me=pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=de(),n=de(),r=de();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne(38017,{changeType:s})}}),new eu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=gT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fL{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pr(),this.Je=Ku(),this.He=Ku(),this.Ye=new Me(ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(cm(s))if(r===0){const o=new J(s.path);this.et(n,o,St.newNoDocument(o,se.min()))}else ge(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=wi(r).toUint8Array()}catch(l){if(l instanceof jS)return Po("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new zy(o,i,s)}catch(l){return Po(l instanceof Va?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&cm(a.target)){const l=new J(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,St.newNoDocument(l,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=de();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new ah(e,n,this.Ye,this.je,r);return this.je=Pr(),this.Je=Ku(),this.He=Ku(),this.Ye=new Me(ce),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new mT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new tt(ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new tt(ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mT),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ku(){return new Me(J.comparator)}function gT(){return new Me(J.comparator)}const pL={asc:"ASCENDING",desc:"DESCENDING"},mL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gL={and:"AND",or:"OR"};class yL{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hm(t,e){return t.useProto3Json||Zd(e)?e:{value:e}}function fd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vL(t,e){return fd(t,e.toTimestamp())}function Xn(t){return ge(!!t,49232),se.fromTimestamp(function(n){const r=_i(n);return new Se(r.seconds,r.nanos)}(t))}function $y(t,e){return fm(t,e).canonicalString()}function fm(t,e){const n=function(i){return new we(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function mb(t){const e=we.fromString(t);return ge(wb(e),10190,{key:e.toString()}),e}function pm(t,e){return $y(t.databaseId,e.path)}function Sf(t,e){const n=mb(e);if(n.get(1)!==t.databaseId.projectId)throw new q(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(yb(n))}function gb(t,e){return $y(t.databaseId,e)}function _L(t){const e=mb(t);return e.length===4?we.emptyPath():yb(e)}function mm(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yb(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function yT(t,e,n){return{name:pm(t,e),fields:n.value.mapValue.fields}}function wL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ne(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(ge(d===void 0||typeof d=="string",58123),pt.fromBase64String(d||"")):(ge(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),pt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?j.UNKNOWN:db(u.code);return new q(d,u.message||"")}(o);n=new fb(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Sf(t,r.document.name),s=Xn(r.document.updateTime),o=r.document.createTime?Xn(r.document.createTime):se.min(),a=new Ht({mapValue:{fields:r.document.fields}}),l=St.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new xc(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Sf(t,r.document),s=r.readTime?Xn(r.readTime):se.min(),o=St.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Sf(t,r.document),s=r.removedTargetIds||[];n=new xc([],s,i,null)}else{if(!("filter"in e))return ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new uL(i,s),a=r.targetId;n=new hb(a,o)}}return n}function TL(t,e){let n;if(e instanceof Zl)n={update:yT(t,e.key,e.value)};else if(e instanceof oh)n={delete:pm(t,e.key)};else if(e instanceof Di)n={update:yT(t,e.key,e.data),updateMask:kL(e.fieldMask)};else{if(!(e instanceof oL))return ne(16599,{Vt:e.type});n={verify:pm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Dl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ml)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof hd)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ne(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:vL(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne(27497)}(t,e.precondition)),n}function xL(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Xn(i.updateTime):Xn(s);return o.isEqual(se.min())&&(o=Xn(s)),new rL(o,i.transformResults||[])}(n,e))):[]}function EL(t,e){return{documents:[gb(t,e.path)]}}function IL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=gb(t,i);const s=function(u){if(u.length!==0)return _b(Mn.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(f){return{field:js(f.field),direction:PL(f.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=hm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function SL(t){let e=_L(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ge(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(h){const f=vb(h);return f instanceof Mn&&KS(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(T){return new Nl(Us(T.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Zd(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){const f=!!h.before,y=h.values||[];return new cd(y,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const f=!h.before,y=h.values||[];return new cd(y,f)}(n.endAt)),$O(e,i,o,s,a,"F",l,u)}function bL(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Us(n.unaryFilter.field);return Ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Us(n.unaryFilter.field);return Ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Us(n.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Us(n.unaryFilter.field);return Ke.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ke.create(Us(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Mn.create(n.compositeFilter.filters.map(r=>vb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function PL(t){return pL[t]}function CL(t){return mL[t]}function AL(t){return gL[t]}function js(t){return{fieldPath:t.canonicalString()}}function Us(t){return dt.fromServerFormat(t.fieldPath)}function _b(t){return t instanceof Ke?function(n){if(n.op==="=="){if(iT(n.value))return{unaryFilter:{field:js(n.field),op:"IS_NAN"}};if(rT(n.value))return{unaryFilter:{field:js(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iT(n.value))return{unaryFilter:{field:js(n.field),op:"IS_NOT_NAN"}};if(rT(n.value))return{unaryFilter:{field:js(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:js(n.field),op:CL(n.op),value:n.value}}}(t):t instanceof Mn?function(n){const r=n.getFilters().map(i=>_b(i));return r.length===1?r[0]:{compositeFilter:{op:AL(n.op),filters:r}}}(t):ne(54877,{filter:t})}function kL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,r,i,s=se.min(),o=se.min(),a=pt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ei(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ei(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.yt=e}}function NL(t){const e=SL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(){this.Cn=new ML}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(vi.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class ML{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new tt(we.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tt(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tb=41943040;class Wt{static withCacheSize(e){return new Wt(e,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(Tb,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ro(0)}static cr(){return new Ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="LruGarbageCollector",VL=1048576;function wT([t,e],[n,r]){const i=ce(t,n);return i===0?ce(e,r):i}class OL{constructor(e){this.Ir=e,this.buffer=new tt(wT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();wT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LL{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(_T,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qo(n)?H(_T,"Ignoring IndexedDB error during garbage collection: ",n):await Wo(n)}await this.Vr(3e5)})}}class jL{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(Jd.ce);const r=new OL(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(vT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),Os()<=ue.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function UL(t,e){return new jL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(){this.changes=new Ss(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ja(r.mutation,i,sn.empty(),Se.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,de()).next(()=>r))}getLocalViewOfDocuments(e,n,r=de()){const i=Zi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ma();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,de()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Pr();const o=Xa(),a=function(){return Xa()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Di)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Ja(d.mutation,u,d.mutation.getFieldMask(),Se.now())):o.set(u.key,sn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>a.set(u,new BL(d,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Xa();let i=new Me((o,a)=>o-a),s=de();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||sn.empty();d=a.applyToLocalView(u,d),r.set(l,d);const h=(i.get(a.batchId)||de()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,h=rb();d.forEach(f=>{if(!s.has(f)){const y=ub(n.get(f),r.get(f));y!==null&&h.set(f,y),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):JS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):U.resolve(Zi());let a=Cl,l=s;return o.next(u=>U.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?U.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{l=l.insert(d,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,de())).next(d=>({batchId:a,changes:nb(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(r=>{let i=Ma();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ma();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,l=>{const u=function(h,f){return new Ho(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,St.newInvalidDocument(d)))});let a=Ma();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&Ja(d.mutation,u,sn.empty(),Se.now()),rh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Xn(i.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:NL(i.bundledQuery),readTime:Xn(i.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WL{constructor(){this.overlays=new Me(J.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zi();return U.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const i=Zi(),s=n.length+1,o=new J(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Me((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Zi(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Zi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return U.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lL(n,r));let s=this.qr.get(n);s===void 0&&(s=de(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(){this.Qr=new tt(rt.$r),this.Ur=new tt(rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new rt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new J(new we([])),r=new rt(n,e),i=new rt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new J(new we([])),r=new rt(n,e),i=new rt(n,e+1);let s=de();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new rt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return J.comparator(e.key,n.key)||ce(e.Yr,n.Yr)}static Kr(e,n){return ce(e.Yr,n.Yr)||J.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new tt(rt.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new aL(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new rt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Vy:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),i=new rt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(ce);return n.forEach(i=>{const s=new rt(i,0),o=new rt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;J.isDocumentKey(s)||(s=s.child(""));const o=new rt(new J(s),0);let a=new tt(ce);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Yr)),!0)},o),U.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ge(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,i=>{const s=new rt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new rt(n,0),i=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.ri=e,this.docs=function(){return new Me(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():St.newInvalidDocument(n))}getEntries(e,n){let r=Pr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():St.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Pr();const o=n.path,a=new J(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||TO(wO(d),r)<=0||(i.has(d.key)||rh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne(9500)}ii(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new KL(this)}getSize(e){return U.resolve(this.size)}}class KL extends FL{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.persistence=e,this.si=new Ss(n=>jy(n),Uy),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.oi=0,this._i=new Wy,this.targetCount=0,this.ai=Ro.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ro(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(s).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.ui={},this.overlays={},this.ci=new Jd(0),this.li=!1,this.li=!0,this.hi=new qL,this.referenceDelegate=e(this),this.Pi=new YL(this),this.indexManager=new DL,this.remoteDocumentCache=function(i){return new GL(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new RL(n),this.Ii=new $L(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new HL(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const i=new QL(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return U.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class QL extends EO{constructor(e){super(),this.currentSequenceNumber=e}}class qy{constructor(e){this.persistence=e,this.Ri=new Wy,this.Vi=null}static mi(e){return new qy(e)}get fi(){if(this.Vi)return this.Vi;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,r=>{const i=J.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,se.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class pd{constructor(e,n){this.persistence=e,this.pi=new Ss(r=>bO(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=UL(this,n)}static mi(e,n){return new pd(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return U.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?U.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,se.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_c(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=de(),i=de();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Hy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return y2()?8:IO(Ct())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new XL;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Os()<=ue.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Ls(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):(Os()<=ue.DEBUG&&H("QueryEngine","Query:",Ls(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Os()<=ue.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Ls(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qn(n))):U.resolve())}ys(e,n){if(lT(n))return U.resolve(null);let r=Qn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=dd(n,null,"F"),r=Qn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=de(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,dd(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,i){return lT(n)||i.isEqual(se.min())?U.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?U.resolve(null):(Os()<=ue.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ls(n)),this.vs(e,o,n,_O(i,Cl)).next(a=>a))})}Ds(e,n){let r=new tt(eb(e));return n.forEach((i,s)=>{rh(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Os()<=ue.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Ls(n)),this.ps.getDocumentsMatchingQuery(e,n,vi.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="LocalStore",ZL=3e8;class ej{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Me(ce),this.xs=new Ss(s=>jy(s),Uy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function tj(t,e,n,r){return new ej(t,e,n,r)}async function Eb(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=de();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function nj(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const h=u.batch,f=h.keys();let y=U.resolve();return f.forEach(T=>{y=y.next(()=>d.getEntry(l,T)).next(b=>{const I=u.docVersions.get(T);ge(I!==null,48541),b.version.compareTo(I)<0&&(h.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),d.addEntry(b)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=de();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Ib(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function rj(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;a.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,h)));let y=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?y=y.withResumeToken(pt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(h,y),function(b,I,w){return b.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=ZL?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,y,d)&&a.push(n.Pi.updateTargetData(s,y))});let l=Pr(),u=de();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(ij(s,o,e.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!r.isEqual(se.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(h=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.Ms=i,s))}function ij(t,e,n){let r=de(),i=de();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Pr();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(se.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H(Gy,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:i}})}function sj(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Vy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oj(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,U.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new ei(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function gm(t,e,n){const r=oe(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!qo(o))throw o;H(Gy,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function TT(t,e,n){const r=oe(t);let i=se.min(),s=de();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const h=oe(l),f=h.xs.get(d);return f!==void 0?U.resolve(h.Ms.get(f)):h.Pi.getTargetData(u,d)}(r,o,Qn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:se.min(),n?s:de())).next(a=>(aj(r,qO(e),a),{documents:a,Qs:s})))}function aj(t,e,n){let r=t.Os.get(e)||se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class xT{constructor(){this.activeTargetIds=XO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lj{constructor(){this.Mo=new xT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new xT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="ConnectivityMonitor";class IT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(ET,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(ET,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu=null;function ym(){return Yu===null?Yu=function(){return 268435456+Math.round(2147483648*Math.random())}():Yu++,"0x"+Yu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="RestConnection",cj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dj{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ld?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=ym(),a=this.zo(e,n.toUriEncodedString());H(bf,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,s);const{host:u}=new URL(a),d=ki(u);return this.Jo(e,a,l,r,d).then(h=>(H(bf,`Received RPC '${e}' ${o}: `,h),h),h=>{throw Po(bf,`RPC '${e}' ${o} failed with error: `,h,"url: ",a,"request:",r),h})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$o}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=cj[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="WebChannelConnection";class fj extends dj{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=ym();return new Promise((a,l)=>{const u=new PS;u.setWithCredentials(!0),u.listenOnce(CS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case vc.NO_ERROR:const h=u.getResponseJson();H(wt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case vc.TIMEOUT:H(wt,`RPC '${e}' ${o} timed out`),l(new q(j.DEADLINE_EXCEEDED,"Request time out"));break;case vc.HTTP_ERROR:const f=u.getStatus();if(H(wt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const T=y==null?void 0:y.error;if(T&&T.status&&T.message){const b=function(w){const g=w.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(g)>=0?g:j.UNKNOWN}(T.status);l(new q(b,T.message))}else l(new q(j.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new q(j.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{H(wt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);H(wt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}T_(e,n,r){const i=ym(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=RS(),a=kS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");H(wt,`Creating RPC '${e}' stream ${i}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let f=!1,y=!1;const T=new hj({Yo:I=>{y?H(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(f||(H(wt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),H(wt,`RPC '${e}' stream ${i} sending:`,I),h.send(I))},Zo:()=>h.close()}),b=(I,w,g)=>{I.listen(w,v=>{try{g(v)}catch(E){setTimeout(()=>{throw E},0)}})};return b(h,Da.EventType.OPEN,()=>{y||(H(wt,`RPC '${e}' stream ${i} transport opened.`),T.o_())}),b(h,Da.EventType.CLOSE,()=>{y||(y=!0,H(wt,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(h))}),b(h,Da.EventType.ERROR,I=>{y||(y=!0,Po(wt,`RPC '${e}' stream ${i} transport errored. Name:`,I.name,"Message:",I.message),T.a_(new q(j.UNAVAILABLE,"The operation could not be completed")))}),b(h,Da.EventType.MESSAGE,I=>{var w;if(!y){const g=I.data[0];ge(!!g,16349);const v=g,E=(v==null?void 0:v.error)||((w=v[0])==null?void 0:w.error);if(E){H(wt,`RPC '${e}' stream ${i} received error:`,E);const k=E.status;let M=function(C){const R=qe[C];if(R!==void 0)return db(R)}(k),S=E.message;M===void 0&&(M=j.INTERNAL,S="Unknown error status: "+k+" with message "+E.message),y=!0,T.a_(new q(M,S)),h.close()}else H(wt,`RPC '${e}' stream ${i} received:`,g),T.u_(g)}}),b(a,AS.STAT_EVENT,I=>{I.stat===sm.PROXY?H(wt,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===sm.NOPROXY&&H(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Pf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t){return new yL(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="PersistentStream";class bb{constructor(e,n,r,i,s,o,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Sb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(br(n.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new q(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(ST,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(ST,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pj extends bb{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=wL(this.serializer,e),r=function(s){if(!("targetChange"in s))return se.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?Xn(o.readTime):se.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=mm(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=cm(l)?{documents:EL(s,l)}:{query:IL(s,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=pb(s,o.resumeToken);const u=hm(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=fd(s,o.snapshotVersion.toTimestamp());const u=hm(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=bL(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=mm(this.serializer),n.removeTarget=e,this.q_(n)}}class mj extends bb{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=xL(e.writeResults,e.commitTime),r=Xn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=mm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>TL(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{}class yj extends gj{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new q(j.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,fm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(j.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,fm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class vj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(br(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="RemoteStore";class _j{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{bs(this)&&(H(vs,"Restarting streams for network reachability change."),await async function(l){const u=oe(l);u.Ea.add(4),await tu(u),u.Ra.set("Unknown"),u.Ea.delete(4),await uh(u)}(this))})}),this.Ra=new vj(r,i)}}async function uh(t){if(bs(t))for(const e of t.da)await e(!0)}async function tu(t){for(const e of t.da)await e(!1)}function Pb(t,e){const n=oe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xy(n)?Qy(n):Go(n).O_()&&Yy(n,e))}function Ky(t,e){const n=oe(t),r=Go(n);n.Ia.delete(e),r.O_()&&Cb(n,e),n.Ia.size===0&&(r.O_()?r.L_():bs(n)&&n.Ra.set("Unknown"))}function Yy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Go(t).Y_(e)}function Cb(t,e){t.Va.Ue(e),Go(t).Z_(e)}function Qy(t){t.Va=new fL({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Go(t).start(),t.Ra.ua()}function Xy(t){return bs(t)&&!Go(t).x_()&&t.Ia.size>0}function bs(t){return oe(t).Ea.size===0}function Ab(t){t.Va=void 0}async function wj(t){t.Ra.set("Online")}async function Tj(t){t.Ia.forEach((e,n)=>{Yy(t,e)})}async function xj(t,e){Ab(t),Xy(t)?(t.Ra.ha(e),Qy(t)):t.Ra.set("Unknown")}async function Ej(t,e,n){if(t.Ra.set("Online"),e instanceof fb&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){H(vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await md(t,r)}else if(e instanceof xc?t.Va.Ze(e):e instanceof hb?t.Va.st(e):t.Va.tt(e),!n.isEqual(se.min()))try{const r=await Ib(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.Ia.get(l);if(!d)return;s.Ia.set(l,d.withResumeToken(pt.EMPTY_BYTE_STRING,d.snapshotVersion)),Cb(s,l);const h=new ei(d.target,l,u,d.sequenceNumber);Yy(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H(vs,"Failed to raise snapshot:",r),await md(t,r)}}async function md(t,e,n){if(!qo(e))throw e;t.Ea.add(1),await tu(t),t.Ra.set("Offline"),n||(n=()=>Ib(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(vs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await uh(t)})}function kb(t,e){return e().catch(n=>md(t,n,e))}async function ch(t){const e=oe(t),n=xi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vy;for(;Ij(e);)try{const i=await sj(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Sj(e,i)}catch(i){await md(e,i)}Rb(e)&&Nb(e)}function Ij(t){return bs(t)&&t.Ta.length<10}function Sj(t,e){t.Ta.push(e);const n=xi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Rb(t){return bs(t)&&!xi(t).x_()&&t.Ta.length>0}function Nb(t){xi(t).start()}async function bj(t){xi(t).ra()}async function Pj(t){const e=xi(t);for(const n of t.Ta)e.ea(n.mutations)}async function Cj(t,e,n){const r=t.Ta.shift(),i=By.from(r,e,n);await kb(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ch(t)}async function Aj(t,e){e&&xi(t).X_&&await async function(r,i){if(function(o){return cL(o)&&o!==j.ABORTED}(i.code)){const s=r.Ta.shift();xi(r).B_(),await kb(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ch(r)}}(t,e),Rb(t)&&Nb(t)}async function bT(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),H(vs,"RemoteStore received new credentials");const r=bs(n);n.Ea.add(3),await tu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await uh(n)}async function kj(t,e){const n=oe(t);e?(n.Ea.delete(2),await uh(n)):e||(n.Ea.add(2),await tu(n),n.Ra.set("Unknown"))}function Go(t){return t.ma||(t.ma=function(n,r,i){const s=oe(n);return s.sa(),new pj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:wj.bind(null,t),t_:Tj.bind(null,t),r_:xj.bind(null,t),H_:Ej.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Xy(t)?Qy(t):t.Ra.set("Unknown")):(await t.ma.stop(),Ab(t))})),t.ma}function xi(t){return t.fa||(t.fa=function(n,r,i){const s=oe(n);return s.sa(),new mj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:bj.bind(null,t),r_:Aj.bind(null,t),ta:Pj.bind(null,t),na:Cj.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ch(t)):(await t.fa.stop(),t.Ta.length>0&&(H(vs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Jy(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zy(t,e){if(br("AsyncQueue",`${e}: ${t}`),qo(t))return new q(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{static emptySet(e){return new yo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=Ma(),this.sortedSet=new Me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof yo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new yo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(){this.ga=new Me(J.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class No{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new No(e,n,yo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Nj{constructor(){this.queries=CT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=oe(n),s=i.queries;i.queries=CT(),s.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new q(j.ABORTED,"Firestore shutting down"))}}function CT(){return new Ss(t=>ZS(t),nh)}async function ev(t,e){const n=oe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new Rj,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Zy(o,`Initialization of query '${Ls(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&nv(n)}async function tv(t,e){const n=oe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Dj(t,e){const n=oe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&nv(n)}function Mj(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function nv(t){t.Ca.forEach(e=>{e.next()})}var vm,AT;(AT=vm||(vm={})).Ma="default",AT.Cache="cache";class rv{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new No(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=No.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e){this.key=e}}class Mb{constructor(e){this.key=e}}class Vj{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=de(),this.mutatedKeys=de(),this.eu=eb(e),this.tu=new yo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new PT,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{const f=i.get(d),y=rh(this.query,h)?h:null,T=!!f&&this.mutatedKeys.has(f.key),b=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let I=!1;f&&y?f.data.isEqual(y.data)?T!==b&&(r.track({type:3,doc:y}),I=!0):this.su(f,y)||(r.track({type:2,doc:y}),I=!0,(l&&this.eu(y,l)>0||u&&this.eu(y,u)<0)&&(a=!0)):!f&&y?(r.track({type:0,doc:y}),I=!0):f&&!y&&(r.track({type:1,doc:f}),I=!0,(l||u)&&(a=!0)),I&&(y?(o=o.add(y),s=b?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,h)=>function(y,T){const b=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Rt:I})}};return b(y)-b(T)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new No(this.query,e.tu,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new PT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=de(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Mb(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Db(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=de();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return No.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const iv="SyncEngine";class Oj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Lj{constructor(e){this.key=e,this.hu=!1}}class jj{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ss(a=>ZS(a),nh),this.Iu=new Map,this.Eu=new Set,this.du=new Me(J.comparator),this.Au=new Map,this.Ru=new Wy,this.Vu={},this.mu=new Map,this.fu=Ro.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Uj(t,e,n=!0){const r=Fb(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Vb(r,e,n,!0),i}async function Fj(t,e){const n=Fb(t);await Vb(n,e,!0,!1)}async function Vb(t,e,n,r){const i=await oj(t.localStore,Qn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Bj(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Pb(t.remoteStore,i),a}async function Bj(t,e,n,r,i){t.pu=(h,f,y)=>async function(b,I,w,g){let v=I.view.ru(w);v.Cs&&(v=await TT(b.localStore,I.query,!1).then(({documents:S})=>I.view.ru(S,v)));const E=g&&g.targetChanges.get(I.targetId),k=g&&g.targetMismatches.get(I.targetId)!=null,M=I.view.applyChanges(v,b.isPrimaryClient,E,k);return RT(b,I.targetId,M.au),M.snapshot}(t,h,f,y);const s=await TT(t.localStore,e,!0),o=new Vj(e,s.Qs),a=o.ru(s.documents),l=eu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);RT(t,n,u.au);const d=new Oj(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function zj(t,e,n){const r=oe(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!nh(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await gm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ky(r.remoteStore,i.targetId),_m(r,i.targetId)}).catch(Wo)):(_m(r,i.targetId),await gm(r.localStore,i.targetId,!0))}async function $j(t,e){const n=oe(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ky(n.remoteStore,r.targetId))}async function Wj(t,e,n){const r=Xj(t);try{const i=await function(o,a){const l=oe(o),u=Se.now(),d=a.reduce((y,T)=>y.add(T.key),de());let h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=Pr(),b=de();return l.Ns.getEntries(y,d).next(I=>{T=I,T.forEach((w,g)=>{g.isValidDocument()||(b=b.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,T)).next(I=>{h=I;const w=[];for(const g of a){const v=sL(g,h.get(g.key).overlayedDocument);v!=null&&w.push(new Di(g.key,v,qS(v.value.mapValue),Lt.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,w,a)}).next(I=>{f=I;const w=I.applyToLocalDocumentSet(h,b);return l.documentOverlayCache.saveOverlays(y,I.batchId,w)})}).then(()=>({batchId:f.batchId,changes:nb(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Me(ce)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await nu(r,i.changes),await ch(r.remoteStore)}catch(i){const s=Zy(i,"Failed to persist write");n.reject(s)}}async function Ob(t,e){const n=oe(t);try{const r=await rj(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ge(o.hu,14607):i.removedDocuments.size>0&&(ge(o.hu,42227),o.hu=!1))}),await nu(n,r,e)}catch(r){await Wo(r)}}function kT(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=oe(o);l.onlineState=a;let u=!1;l.queries.forEach((d,h)=>{for(const f of h.Sa)f.va(a)&&(u=!0)}),u&&nv(l)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qj(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Me(J.comparator);o=o.insert(s,St.newNoDocument(s,se.min()));const a=de().add(s),l=new ah(se.min(),new Map,new Me(ce),o,a);await Ob(r,l),r.du=r.du.remove(s),r.Au.delete(e),sv(r)}else await gm(r.localStore,e,!1).then(()=>_m(r,e,n)).catch(Wo)}async function Hj(t,e){const n=oe(t),r=e.batch.batchId;try{const i=await nj(n.localStore,e);jb(n,r,null),Lb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nu(n,i)}catch(i){await Wo(i)}}async function Gj(t,e,n){const r=oe(t);try{const i=await function(o,a){const l=oe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(h=>(ge(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);jb(r,e,n),Lb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await nu(r,i)}catch(i){await Wo(i)}}function Lb(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function jb(t,e,n){const r=oe(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function _m(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Ub(t,r)})}function Ub(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ky(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),sv(t))}function RT(t,e,n){for(const r of n)r instanceof Db?(t.Ru.addReference(r.key,e),Kj(t,r)):r instanceof Mb?(H(iv,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Ub(t,r.key)):ne(19791,{wu:r})}function Kj(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(iv,"New document in limbo: "+n),t.Eu.add(r),sv(t))}function sv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new J(we.fromString(e)),r=t.fu.next();t.Au.set(r,new Lj(n)),t.du=t.du.insert(n,r),Pb(t.remoteStore,new ei(Qn(th(n.path)),r,"TargetPurposeLimboResolution",Jd.ce))}}async function nu(t,e,n){const r=oe(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){i.push(u);const h=Hy.As(l.targetId,u);s.push(h)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(l,u){const d=oe(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>U.forEach(u,f=>U.forEach(f.Es,y=>d.persistence.referenceDelegate.addReference(h,f.targetId,y)).next(()=>U.forEach(f.ds,y=>d.persistence.referenceDelegate.removeReference(h,f.targetId,y)))))}catch(h){if(!qo(h))throw h;H(Gy,"Failed to update sequence numbers: "+h)}for(const h of u){const f=h.targetId;if(!h.fromCache){const y=d.Ms.get(f),T=y.snapshotVersion,b=y.withLastLimboFreeSnapshotVersion(T);d.Ms=d.Ms.insert(f,b)}}}(r.localStore,s))}async function Yj(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){H(iv,"User change. New user:",e.toKey());const r=await Eb(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(l=>{l.reject(new q(j.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nu(n,r.Ls)}}function Qj(t,e){const n=oe(t),r=n.Au.get(e);if(r&&r.hu)return de().add(r.key);{let i=de();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function Fb(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ob.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qj.bind(null,e),e.Pu.H_=Dj.bind(null,e.eventManager),e.Pu.yu=Mj.bind(null,e.eventManager),e}function Xj(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Gj.bind(null,e),e}class gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=lh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return tj(this.persistence,new JL,e.initialUser,this.serializer)}Cu(e){return new xb(qy.mi,this.serializer)}Du(e){return new lj}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gd.provider={build:()=>new gd};class Jj extends gd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ge(this.persistence.referenceDelegate instanceof pd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new LL(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new xb(r=>pd.mi(r,n),this.serializer)}}class wm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>kT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Yj.bind(null,this.syncEngine),await kj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Nj}()}createDatastore(e){const n=lh(e.databaseInfo.databaseId),r=function(s){return new fj(s)}(e.databaseInfo);return function(s,o,a,l){return new yj(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new _j(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>kT(this.syncEngine,n,0),function(){return IT.v()?new IT:new uj}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const h=new jj(i,s,o,a,l,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=oe(i);H(vs,"RemoteStore shutting down."),s.Ea.add(5),await tu(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}wm.provider={build:()=>new wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei="FirestoreClient";class Zj{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=My.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{H(Ei,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(Ei,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cf(t,e){t.asyncQueue.verifyOperationInProgress(),H(Ei,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Eb(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function NT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await e4(t);H(Ei,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>bT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>bT(e.remoteStore,i)),t._onlineComponents=e}async function e4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(Ei,"Using user provided OfflineComponentProvider");try{await Cf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Po("Error using user provided cache. Falling back to memory cache: "+n),await Cf(t,new gd)}}else H(Ei,"Using default OfflineComponentProvider"),await Cf(t,new Jj(void 0));return t._offlineComponents}async function Bb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(Ei,"Using user provided OnlineComponentProvider"),await NT(t,t._uninitializedComponentsProvider._online)):(H(Ei,"Using default OnlineComponentProvider"),await NT(t,new wm))),t._onlineComponents}function t4(t){return Bb(t).then(e=>e.syncEngine)}async function yd(t){const e=await Bb(t),n=e.eventManager;return n.onListen=Uj.bind(null,e.syncEngine),n.onUnlisten=zj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Fj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$j.bind(null,e.syncEngine),n}function n4(t,e,n={}){const r=new yr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new ov({next:f=>{d.Nu(),o.enqueueAndForget(()=>tv(s,h));const y=f.docs.has(a);!y&&f.fromCache?u.reject(new q(j.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&f.fromCache&&l&&l.source==="server"?u.reject(new q(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new rv(th(a.path),d,{includeMetadataChanges:!0,qa:!0});return ev(s,h)}(await yd(t),t.asyncQueue,e,n,r)),r.promise}function r4(t,e,n={}){const r=new yr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new ov({next:f=>{d.Nu(),o.enqueueAndForget(()=>tv(s,h)),f.fromCache&&l.source==="server"?u.reject(new q(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),h=new rv(a,d,{includeMetadataChanges:!0,qa:!0});return ev(s,h)}(await yd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="firestore.googleapis.com",MT=!0;class VT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$b,this.ssl=MT}else this.host=e.host,this.ssl=e.ssl??MT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Tb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VL)throw new q(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zb(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new VT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new VT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new aO;switch(r.type){case"firstParty":return new dO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=DT.get(n);r&&(H("ComponentProvider","Removing Datastore"),DT.delete(n),r.terminate())}(this),Promise.resolve()}}function i4(t,e,n,r={}){var u;t=Ot(t,dh);const i=ki(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(_y(`https://${a}`),wy("Firestore",!0)),s.host!==$b&&s.host!==a&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...s,host:a,ssl:i,emulatorOptions:r};if(!fs(l,o)&&(t._setSettings(l),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Et.MOCK_USER;else{d=FI(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new q(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Et(f)}t._authCredentials=new lO(new DS(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Nr(this.firestore,e,this._query)}}class Ue{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ue(this.firestore,e,this._key)}toJSON(){return{type:Ue._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Jl(n,Ue._jsonSchema))return new Ue(e,r||null,new J(we.fromString(n.referencePath)))}}Ue._jsonSchemaVersion="firestore/documentReference/1.0",Ue._jsonSchema={type:Ye("string",Ue._jsonSchemaVersion),referencePath:Ye("string")};class fi extends Nr{constructor(e,n,r){super(e,n,th(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new J(e))}withConverter(e){return new fi(this.firestore,e,this._path)}}function Rt(t,e,...n){if(t=Pe(t),MS("collection","path",e),t instanceof dh){const r=we.fromString(e,...n);return K0(r),new fi(t,null,r)}{if(!(t instanceof Ue||t instanceof fi))throw new q(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return K0(r),new fi(t.firestore,null,r)}}function lt(t,e,...n){if(t=Pe(t),arguments.length===1&&(e=My.newId()),MS("doc","path",e),t instanceof dh){const r=we.fromString(e,...n);return G0(r),new Ue(t,null,new J(r))}{if(!(t instanceof Ue||t instanceof fi))throw new q(j.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return G0(r),new Ue(t.firestore,t instanceof fi?t.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="AsyncQueue";class LT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Sb(this,"async_queue_retry"),this._c=()=>{const r=Pf();r&&H(OT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Pf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Pf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new yr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!qo(e))throw e;H(OT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,br("INTERNAL UNHANDLED ERROR: ",jT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Jy.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ne(47125,{Pc:jT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function jT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class rr extends dh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new LT,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new LT(e),this._firestoreClient=void 0,await e}}}function s4(t,e){const n=typeof t=="object"?t:Ey(),r=typeof t=="string"?t:ld,i=Gd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=LI("firestore");s&&i4(i,...s)}return i}function ru(t){if(t._terminated)throw new q(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||o4(t),t._firestoreClient}function o4(t){var r,i,s;const e=t._freezeSettings(),n=function(a,l,u,d){return new AO(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,zb(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Zj(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vn(pt.fromBase64String(e))}catch(n){throw new q(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vn(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jl(e,vn._jsonSchema))return vn.fromBase64String(e.bytes)}}vn._jsonSchemaVersion="firestore/bytes/1.0",vn._jsonSchema={type:Ye("string",vn._jsonSchemaVersion),bytes:Ye("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Jn._jsonSchemaVersion}}static fromJSON(e){if(Jl(e,Jn._jsonSchema))return new Jn(e.latitude,e.longitude)}}Jn._jsonSchemaVersion="firestore/geoPoint/1.0",Jn._jsonSchema={type:Ye("string",Jn._jsonSchemaVersion),latitude:Ye("number"),longitude:Ye("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Zn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jl(e,Zn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Zn(e.vectorValues);throw new q(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zn._jsonSchemaVersion="firestore/vectorValue/1.0",Zn._jsonSchema={type:Ye("string",Zn._jsonSchemaVersion),vectorValues:Ye("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4=/^__.*__$/;class l4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Di(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zl(e,this.data,n,this.fieldTransforms)}}class Wb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Di(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function qb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{Ac:t})}}class av{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new av({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(qb(this.Ac)&&a4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class u4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||lh(e)}Cc(e,n,r,i=!1){return new av({Ac:e,methodName:n,Dc:r,path:dt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function su(t){const e=t._freezeSettings(),n=lh(t._databaseId);return new u4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lv(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);cv("Data must be an object, but it was:",o,r);const a=Kb(r,o);let l,u;if(s.merge)l=new sn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const h of s.mergeFields){const f=Tm(e,h,n);if(!o.contains(f))throw new q(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Qb(d,f)||d.push(f)}l=new sn(d),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new l4(new Ht(a),l,u)}class fh extends hh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fh}}class uv extends hh{_toFieldTransform(e){return new tL(e.path,new Dl)}isEqual(e){return e instanceof uv}}function Hb(t,e,n,r){const i=t.Cc(1,e,n);cv("Data must be an object, but it was:",i,r);const s=[],o=Ht.empty();Ni(r,(l,u)=>{const d=dv(e,l,n);u=Pe(u);const h=i.yc(d);if(u instanceof fh)s.push(d);else{const f=ou(u,h);f!=null&&(s.push(d),o.set(d,f))}});const a=new sn(s);return new Wb(o,a,i.fieldTransforms)}function Gb(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[Tm(e,r,n)],l=[i];if(s.length%2!=0)throw new q(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Tm(e,s[f])),l.push(s[f+1]);const u=[],d=Ht.empty();for(let f=a.length-1;f>=0;--f)if(!Qb(u,a[f])){const y=a[f];let T=l[f];T=Pe(T);const b=o.yc(y);if(T instanceof fh)u.push(y);else{const I=ou(T,b);I!=null&&(u.push(y),d.set(y,I))}}const h=new sn(u);return new Wb(d,h,o.fieldTransforms)}function c4(t,e,n,r=!1){return ou(n,t.Cc(r?4:3,e))}function ou(t,e){if(Yb(t=Pe(t)))return cv("Unsupported field value:",e,t),Kb(t,e);if(t instanceof hh)return function(r,i){if(!qb(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=ou(a,i.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Se.fromDate(r);return{timestampValue:fd(i.serializer,s)}}if(r instanceof Se){const s=new Se(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fd(i.serializer,s)}}if(r instanceof Jn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vn)return{bytesValue:pb(i.serializer,r._byteString)};if(r instanceof Ue){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:$y(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Zn)return function(o,a){return{mapValue:{fields:{[$S]:{stringValue:WS},[ud]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return Fy(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Xd(r)}`)}(t,e)}function Kb(t,e){const n={};return LS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ni(t,(r,i)=>{const s=ou(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Yb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Se||t instanceof Jn||t instanceof vn||t instanceof Ue||t instanceof hh||t instanceof Zn)}function cv(t,e,n){if(!Yb(n)||!VS(n)){const r=Xd(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Tm(t,e,n){if((e=Pe(e))instanceof iu)return e._internalPath;if(typeof e=="string")return dv(t,e);throw vd("Field path arguments must be of type string or ",t,!1,void 0,n)}const d4=new RegExp("[~\\*/\\[\\]]");function dv(t,e,n){if(e.search(d4)>=0)throw vd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new iu(...e.split("."))._internalPath}catch{throw vd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new q(j.INVALID_ARGUMENT,a+t+l)}function Qb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new h4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ph("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class h4 extends Xb{data(){return super.data()}}function ph(t,e){return typeof e=="string"?dv(t,e):e instanceof iu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hv{}class fv extends hv{}function Zt(t,e,...n){let r=[];e instanceof hv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof pv).length,a=s.filter(l=>l instanceof mh).length;if(o>1||o>0&&a>0)throw new q(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class mh extends fv{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new mh(e,n,r)}_apply(e){const n=this._parse(e);return Zb(e._query,n),new Nr(e.firestore,e.converter,dm(e._query,n))}_parse(e){const n=su(e.firestore);return function(s,o,a,l,u,d,h){let f;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(j.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){zT(h,d);const T=[];for(const b of h)T.push(BT(l,s,b));f={arrayValue:{values:T}}}else f=BT(l,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||zT(h,d),f=c4(a,o,h,d==="in"||d==="not-in");return Ke.create(u,d,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Tt(t,e,n){const r=e,i=ph("where",t);return mh._create(i,r,n)}class pv extends hv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Mn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Zb(o,l),o=dm(o,l)}(e._query,n),new Nr(e.firestore,e.converter,dm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mv extends fv{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mv(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new q(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new q(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nl(s,o)}(e._query,this._field,this._direction);return new Nr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ho(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Af(t,e="asc"){const n=e,r=ph("orderBy",t);return mv._create(r,n)}class gv extends fv{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new gv(e,n,r)}_apply(e){return new Nr(e.firestore,e.converter,dd(e._query,this._limit,this._limitType))}}function FT(t){return vO("limit",t),gv._create("limit",t,"F")}function BT(t,e,n){if(typeof(n=Pe(n))=="string"){if(n==="")throw new q(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JS(e)&&n.indexOf("/")!==-1)throw new q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(we.fromString(n));if(!J.isDocumentKey(r))throw new q(j.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nT(t,new J(r))}if(n instanceof Ue)return nT(t,n._key);throw new q(j.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xd(n)}.`)}function zT(t,e){if(!Array.isArray(t)||t.length===0)throw new q(j.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zb(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(j.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(j.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class f4{convertValue(e,n="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ni(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[ud].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Fe(o.doubleValue));return new Zn(n)}convertGeoPoint(e){return new Jn(Fe(e.latitude),Fe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=eh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Al(e));default:return null}}convertTimestamp(e){const n=_i(e);return new Se(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);ge(wb(r),9688,{name:e});const i=new kl(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(n)||br(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Oa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class is extends Xb{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ec(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ph("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=is._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}is._jsonSchemaVersion="firestore/documentSnapshot/1.0",is._jsonSchema={type:Ye("string",is._jsonSchemaVersion),bundleSource:Ye("string","DocumentSnapshot"),bundleName:Ye("string"),bundle:Ye("string")};class Ec extends is{data(e={}){return super.data(e)}}class ss{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Oa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ec(this._firestore,this._userDataWriter,r.key,r,new Oa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Ec(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Oa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Ec(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Oa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:p4(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ss._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=My.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function p4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t){t=Ot(t,Ue);const e=Ot(t.firestore,rr);return n4(ru(e),t._key).then(n=>eP(e,t,n))}ss._jsonSchemaVersion="firestore/querySnapshot/1.0",ss._jsonSchema={type:Ye("string",ss._jsonSchemaVersion),bundleSource:Ye("string","QuerySnapshot"),bundleName:Ye("string"),bundle:Ye("string")};class vv extends f4{constructor(e){super(),this.firestore=e}convertBytes(e){return new vn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,n)}}function hn(t){t=Ot(t,Nr);const e=Ot(t.firestore,rr),n=ru(e),r=new vv(e);return Jb(t._query),r4(n,t._query).then(i=>new ss(e,r,t,i))}function kf(t,e,n){t=Ot(t,Ue);const r=Ot(t.firestore,rr),i=yv(t.converter,e,n);return au(r,[lv(su(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Lt.none())])}function m4(t,e,n,...r){t=Ot(t,Ue);const i=Ot(t.firestore,rr),s=su(i);let o;return o=typeof(e=Pe(e))=="string"||e instanceof iu?Gb(s,"updateDoc",t._key,e,n,r):Hb(s,"updateDoc",t._key,e),au(i,[o.toMutation(t._key,Lt.exists(!0))])}function g4(t){return au(Ot(t.firestore,rr),[new oh(t._key,Lt.none())])}function wa(t,e){const n=Ot(t.firestore,rr),r=lt(t),i=yv(t.converter,e);return au(n,[lv(su(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Lt.exists(!1))]).then(()=>r)}function y4(t,...e){var l,u,d;t=Pe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||UT(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(UT(e[r])){const h=e[r];e[r]=(l=h.next)==null?void 0:l.bind(h),e[r+1]=(u=h.error)==null?void 0:u.bind(h),e[r+2]=(d=h.complete)==null?void 0:d.bind(h)}let s,o,a;if(t instanceof Ue)o=Ot(t.firestore,rr),a=th(t._key.path),s={next:h=>{e[r]&&e[r](eP(o,t,h))},error:e[r+1],complete:e[r+2]};else{const h=Ot(t,Nr);o=Ot(h.firestore,rr),a=h._query;const f=new vv(o);s={next:y=>{e[r]&&e[r](new ss(o,f,h,y))},error:e[r+1],complete:e[r+2]},Jb(t._query)}return function(f,y,T,b){const I=new ov(b),w=new rv(y,I,T);return f.asyncQueue.enqueueAndForget(async()=>ev(await yd(f),w)),()=>{I.Nu(),f.asyncQueue.enqueueAndForget(async()=>tv(await yd(f),w))}}(ru(o),a,i,s)}function au(t,e){return function(r,i){const s=new yr;return r.asyncQueue.enqueueAndForget(async()=>Wj(await t4(r),i,s)),s.promise}(ru(t),e)}function eP(t,e,n){const r=n.docs.get(e._key),i=new vv(t);return new is(t,i,e._key,r,new Oa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=su(e)}set(e,n,r){this._verifyNotCommitted();const i=Rf(e,this._firestore),s=yv(i.converter,n,r),o=lv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Lt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Rf(e,this._firestore);let o;return o=typeof(n=Pe(n))=="string"||n instanceof iu?Gb(this._dataReader,"WriteBatch.update",s._key,n,r,i):Hb(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Lt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Rf(e,this._firestore);return this._mutations=this._mutations.concat(new oh(n._key,Lt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rf(t,e){if((t=Pe(t)).firestore!==e)throw new q(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Bn(){return new uv("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _4(t){return ru(t=Ot(t,rr)),new v4(t,e=>au(t,e))}(function(e,n=!0){(function(i){$o=i})(Es),ps(new yi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new rr(new uO(r.getProvider("auth-internal")),new hO(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new q(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kl(u.options.projectId,d)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Gn($0,W0,e),Gn($0,W0,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="firebasestorage.googleapis.com",nP="storageBucket",w4=2*60*1e3,T4=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt extends sr{constructor(e,n,r=0){super(Nf(e),`Firebase Storage: ${n} (${Nf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,gt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Nf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mt||(mt={}));function Nf(t){return"storage/"+t}function x4(){const t="An unknown error occurred, please check the error payload for server response.";return new gt(mt.UNKNOWN,t)}function E4(t){return new gt(mt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function I4(t){return new gt(mt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function S4(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new gt(mt.UNAUTHENTICATED,t)}function b4(){return new gt(mt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function P4(t){return new gt(mt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function C4(){return new gt(mt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function A4(){return new gt(mt.CANCELED,"User canceled the upload/download.")}function k4(t){return new gt(mt.INVALID_URL,"Invalid URL '"+t+"'.")}function R4(t){return new gt(mt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function N4(){return new gt(mt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nP+"' property when initializing the app?")}function xm(t){return new gt(mt.INVALID_ARGUMENT,t)}function rP(){return new gt(mt.APP_DELETED,"The Firebase app was deleted.")}function D4(t){return new gt(mt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ta(t){throw new gt(mt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=wn.makeFromUrl(e,n)}catch{return new wn(e,"")}if(r.path==="")return r;throw R4(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",y=new RegExp(`^https?://${h}/${d}/b/${i}/o${f}`,"i"),T={bucket:1,path:3},b=n===tP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",w=new RegExp(`^https?://${b}/${i}/${I}`,"i"),v=[{regex:a,indices:l,postModify:s},{regex:y,indices:T,postModify:u},{regex:w,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<v.length;E++){const k=v[E],M=k.regex.exec(e);if(M){const S=M[k.indices.bucket];let x=M[k.indices.path];x||(x=""),r=new wn(S,x),k.postModify(r);break}}if(r==null)throw k4(e);return r}}class M4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function d(...I){u||(u=!0,e.apply(null,I))}function h(I){i=setTimeout(()=>{i=null,t(y,l())},I)}function f(){s&&clearTimeout(s)}function y(I,...w){if(u){f();return}if(I){f(),d.call(null,I,...w);return}if(l()||o){f(),d.call(null,I,...w);return}r<64&&(r*=2);let v;a===1?(a=2,v=0):v=(r+Math.random())*1e3,h(v)}let T=!1;function b(I){T||(T=!0,f(),!u&&(i!==null?(I||(a=2),clearTimeout(i),h(0)):I||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,b(!0)},n),b}function O4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(t){return t!==void 0}function $T(t,e,n,r){if(r<e)throw xm(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw xm(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function U4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var os;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(os||(os={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n,r,i,s,o,a,l,u,d,h,f=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,b)=>{this.resolve_=T,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Qu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===os.NO_ERROR,l=s.getStatus();if(!a||F4(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===os.ABORT;r(!1,new Qu(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Qu(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());L4(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=x4();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?rP():A4();o(l)}else{const l=C4();o(l)}};this.canceled_?n(!1,new Qu(!1,null,!0)):this.backoffId_=V4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&O4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Qu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function z4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function $4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function W4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function q4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function H4(t,e,n,r,i,s,o=!0,a=!1){const l=U4(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return W4(d,e),z4(d,n),$4(d,s),q4(d,r),new B4(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function K4(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Y4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}class Q4{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function X4(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=b4():i=S4():n.getStatus()===402?i=I4(t.bucket):n.getStatus()===403?i=P4(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function J4(t){const e=X4(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=E4(t.path)),s.serverResponse=i.serverResponse,s}return n}function Z4(t,e){const n=e.fullServerUrl(),r=j4(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,u){}const a=new Q4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=J4(e),a}class eU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=os.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=os.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=os.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw Ta("cannot .send() more than once");if(ki(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ta("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ta("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ta("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ta("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class tU extends eU{initXhr(){this.xhr_.responseType="text"}}function nU(){return new tU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n){this._service=e,n instanceof wn?this._location=n:this._location=wn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new _s(e,n)}get root(){const e=new wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Y4(this._location.path)}get storage(){return this._service}get parent(){const e=G4(this._location.path);if(e===null)return null;const n=new wn(this._location.bucket,e);return new _s(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw D4(e)}}function rU(t){t._throwIfRoot("deleteObject");const e=Z4(t.storage,t._location);return t.storage.makeRequestWithTokens(e,nU)}function iU(t,e){const n=K4(t._location.path,e),r=new wn(t._location.bucket,n);return new _s(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(t){return/^[A-Za-z]+:\/\//.test(t)}function oU(t,e){return new _s(t,e)}function iP(t,e){if(t instanceof _v){const n=t;if(n._bucket==null)throw N4();const r=new _s(n,n._bucket);return e!=null?iP(r,e):r}else return e!==void 0?iU(t,e):t}function aU(t,e){if(e&&sU(e)){if(t instanceof _v)return oU(t,e);throw xm("To use ref(service, url), the first argument must be a Storage instance.")}else return iP(t,e)}function WT(t,e){const n=e==null?void 0:e[nP];return n==null?null:wn.makeFromBucketSpec(n,t)}function lU(t,e,n,r={}){t.host=`${e}:${n}`;const i=ki(e);i&&(_y(`https://${t.host}/b`),wy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:FI(s,t.app.options.projectId))}class _v{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=tP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=w4,this._maxUploadRetryTime=T4,this._requests=new Set,i!=null?this._bucket=wn.makeFromBucketSpec(i,this._host):this._bucket=WT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=wn.makeFromBucketSpec(this._url,e):this._bucket=WT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$T("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$T("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _s(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new M4(rP());{const o=H4(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const qT="@firebase/storage",HT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP="storage";function uU(t){return t=Pe(t),rU(t)}function cU(t,e){return t=Pe(t),aU(t,e)}function dU(t=Ey(),e){t=Pe(t);const r=Gd(t,sP).getImmediate({identifier:e}),i=LI("storage");return i&&hU(r,...i),r}function hU(t,e,n,r={}){lU(t,e,n,r)}function fU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new _v(n,r,i,e,Es)}function pU(){ps(new yi(sP,fU,"PUBLIC").setMultipleInstances(!0)),Gn(qT,HT,""),Gn(qT,HT,"esm2020")}pU();var mU="firebase",gU="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gn(mU,gU,"app");const Em={apiKey:"AIzaSyC9KhPz1omdPoxfZgTFtlJhkllgiwa9yyQ",authDomain:"known-dating-e5f04.firebaseapp.com",projectId:"known-dating-e5f04",storageBucket:"known-dating-e5f04.firebasestorage.app",messagingSenderId:"1063923761424",appId:"1:1063923761424:web:93addbdfc0e177f8dfa595"};if(!Em.apiKey||!Em.projectId)throw new Error("Firebase configuration is missing. Please set environment variables.");const wv=$I(Em),me=QV(wv),pe=s4(wv),yU=dU(wv);class vU{constructor(){zh(this,"isDevelopment",!1);zh(this,"isProduction",!0)}formatMessage(e,n,r,i){return{level:e,message:n,error:r?{name:r.name,message:r.message,stack:r.stack}:void 0,context:i,timestamp:new Date().toISOString()}}log(e,n,r,i){const s=this.formatMessage(e,n,r,i);if(this.isDevelopment){const o=e==="error"?console.error:e==="warn"?console.warn:e==="info"?console.info:console.log;r?o(`[${e.toUpperCase()}] ${n}`,r,i||""):o(`[${e.toUpperCase()}] ${n}`,i||"")}this.isProduction&&e==="error"&&console.error(JSON.stringify(s))}debug(e,n){this.isDevelopment&&this.log("debug",e,void 0,n)}info(e,n){this.log("info",e,void 0,n)}warn(e,n,r){this.log("warn",e,n,r)}error(e,n,r){this.log("error",e,n,r)}}const X=new vU,to=t=>t?t.toDate?t.toDate().toISOString():t instanceof Date?t.toISOString():(typeof t=="string"&&t.includes("T")&&t.includes("Z"),t):new Date().toISOString(),zi=(t,e)=>({id:e,email:t.email||"",name:t.name||"",age:t.age||0,gender:t.gender||"",bio:t.bio||null,location:t.location||null,photos:t.photos||[],interested_in:t.interested_in||[],age_min:t.age_min,age_max:t.age_max,distance_max:t.distance_max,founder_status:t.founder_status||null,industry:t.industry||null,funding_status:t.funding_status||null,company_name:t.company_name||null,company_stage:t.company_stage||null,role:t.role||null,founding_story:t.founding_story||null,biggest_challenge:t.biggest_challenge||null,work_life_balance:t.work_life_balance||null,ideal_date_night:t.ideal_date_night||null,view_on_exit:t.view_on_exit||null,date_people_who_talk_work:t.date_people_who_talk_work||null,how_destress:t.how_destress||null,coffee_order:t.coffee_order||null,hustle_quote:t.hustle_quote||null,created_at:to(t.created_at)||new Date().toISOString(),updated_at:to(t.updated_at)});class _U{async register(e){try{const n=await NM(me,e.email,e.password);await VM(n.user,{displayName:e.name});const r={email:e.email,name:e.name,age:e.age,gender:e.gender,bio:e.bio||null,location:e.location||null,photos:[],interested_in:e.interested_in||[],age_min:18,age_max:100,distance_max:50,created_at:Bn(),updated_at:Bn()};await kf(lt(pe,"users",n.user.uid),r);const i=await en(lt(pe,"users",n.user.uid)),s=zi(i.data(),n.user.uid);return{token:await n.user.getIdToken(),user:s}}catch(n){throw new Error(n.message||"Failed to register")}}async login(e,n){var r,i,s,o,a,l,u,d,h;try{if(!me)throw new Error("Firebase Authentication is not initialized. Please check your Firebase configuration.");const f=tr.isNativePlatform()&&tr.getPlatform()==="ios",y=f?6e4:2e4;if(console.log(" Attempting login with email:",e),console.log(" Platform:",f?"iOS":"Web"),console.log(" Timeout:",y,"ms"),console.log(" Auth object:",{app:(r=me.app)==null?void 0:r.name,currentUser:((i=me.currentUser)==null?void 0:i.uid)||"none",authDomain:(o=(s=me.app)==null?void 0:s.options)==null?void 0:o.authDomain,apiKey:(l=(a=me.app)==null?void 0:a.options)!=null&&l.apiKey?"***"+me.app.options.apiKey.slice(-4):"missing"}),f){console.log(" iOS detected - trying REST API workaround...");try{const E=(d=(u=me.app)==null?void 0:u.options)==null?void 0:d.apiKey;if(!E)throw new Error("Firebase API key not found");console.log(" Calling Firebase REST API directly...");const k=await fetch(`https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${E}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:n,returnSecureToken:!0})});if(console.log(" REST API response status:",k.status),!k.ok){const Y=await k.json();if(console.error(" REST API error:",Y),Y.error){const Z=Y.error.message;throw Z.includes("EMAIL_NOT_FOUND")?new Error("No account found with this email. Please sign up first."):Z.includes("INVALID_PASSWORD")?new Error("Incorrect password. Please try again."):Z.includes("USER_DISABLED")?new Error("This account has been disabled."):new Error(Y.error.message||"Authentication failed")}throw new Error("Authentication failed")}const M=await k.json();console.log(" REST API success! Got idToken and localId from response");const S=M.idToken,x=M.localId;if(!S||!x)throw new Error("Invalid response from Firebase REST API");console.log(" Using REST API response directly (bypassing SDK)..."),console.log(" User UID:",x),console.log(" Fetching user profile from Firestore via REST API...");const R=`https://firestore.googleapis.com/v1/projects/known-dating-e5f04/databases/(default)/documents/users/${x}`,N=fetch(R,{method:"GET",headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"}}),D=new Promise((Y,Z)=>setTimeout(()=>Z(new Error("Firestore user profile fetch timed out")),15e3));let A;try{const Y=await Promise.race([N,D]);if(!Y.ok){if(Y.status===404)throw new Error("User profile not found. Please contact support.");if(Y.status===403)throw new Error("Permission denied. Please check Firestore security rules.");{const re=await Y.text();throw new Error(`Firestore error: ${Y.status} - ${re}`)}}const Z=await Y.json();if(console.log(" Got user profile from Firestore REST API"),!Z.fields)throw new Error("User profile not found. Please contact support.");A={};for(const[re,F]of Object.entries(Z.fields)){const z=F;z.stringValue!==void 0?A[re]=z.stringValue:z.integerValue!==void 0?A[re]=parseInt(z.integerValue):z.doubleValue!==void 0?A[re]=parseFloat(z.doubleValue):z.booleanValue!==void 0?A[re]=z.booleanValue:z.arrayValue!==void 0?A[re]=((h=z.arrayValue.values)==null?void 0:h.map($=>$.stringValue!==void 0?$.stringValue:$.integerValue!==void 0?parseInt($.integerValue):$.doubleValue!==void 0?parseFloat($.doubleValue):$.booleanValue!==void 0?$.booleanValue:($.nullValue!==void 0,null)))||[]:z.timestampValue!==void 0?A[re]=z.timestampValue:z.nullValue!==void 0&&(A[re]=null)}}catch(Y){console.error(" Firestore REST API fetch failed:",Y.message),console.log(" Creating minimal user object from REST API response...");const Z={id:x,email:e,name:e.split("@")[0],age:0,gender:"",bio:null,location:null,photos:[],interested_in:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return console.log(" Authentication successful via REST API (minimal profile)!"),{token:S,user:Z}}const G=zi(A,x);return console.log(" Authentication successful via REST API!"),console.log(" Note: auth.currentUser may not be set, but token is valid"),{token:S,user:G}}catch(E){if(console.error(" REST API workaround failed:",E),console.error(" REST API error details:",{message:E.message,code:E.code,stack:E.stack}),E.message&&(E.message.includes("No account found")||E.message.includes("Incorrect password")||E.message.includes("disabled")))throw E;console.log(" Falling back to SDK method...")}}console.log(" Creating signInWithEmailAndPassword promise...");const T=DM(me,e,n);console.log(" Promise created, waiting for response..."),T.catch(E=>{console.error(" Login promise rejected immediately:",E)});let b=null;if(f){let E=0;b=setInterval(()=>{E+=5e3,console.log(` Still waiting... ${E}ms elapsed`)},5e3)}const I=new Promise((E,k)=>setTimeout(()=>{b&&clearInterval(b),console.error(" Login timeout after",y,"ms"),console.error(" This usually means Firebase Auth request never completed"),k(new Error(f?`Login timed out on iOS device. Possible causes:
1. Network connectivity issue
2. Firebase Auth API not reachable from iOS
3. Check if device has internet (try Safari)
4. Try restarting the app`:`Login timed out. Please check:
1. Firebase Authentication  Email/Password is ENABLED
2. Your internet connection`))},y)),w=await Promise.race([T,I]);if(b&&clearInterval(b),console.log(" Login promise resolved!"),!w||!w.user)throw new Error("Invalid response from Firebase Authentication");console.log(" User credential received, fetching user profile...");const g=await en(lt(pe,"users",w.user.uid));if(!g.exists())throw new Error("User profile not found. Please contact support.");const v=zi(g.data(),w.user.uid);return{token:await w.user.getIdToken(),user:v}}catch(f){console.error(" Login error details:",{code:f.code,message:f.message,stack:f.stack});let y="Invalid credentials";throw f.code==="auth/user-not-found"?y="No account found with this email. Please sign up first.":f.code==="auth/wrong-password"?y="Incorrect password. Please try again.":f.code==="auth/network-request-failed"?y="Network error. Please check your internet connection and try again.":f.code==="auth/too-many-requests"?y="Too many failed login attempts. Please try again later.":f.code==="auth/invalid-email"?y="Invalid email address. Please check and try again.":f.code==="auth/operation-not-allowed"?y="Email/Password authentication is not enabled. Please enable it in Firebase Console.":(f.message&&f.message.includes("timed out")||f.message)&&(y=f.message),new Error(y)}}async getCurrentUser(){const e=me.currentUser;if(!e)throw new Error("Not authenticated");const n=await en(lt(pe,"users",e.uid));if(!n.exists())throw new Error("User profile not found");return zi(n.data(),e.uid)}async logout(){await UM(me)}async getDiscoverUsers(e=20){var C,R;const n=me.currentUser;if(!n)throw new Error("Not authenticated");const i=(await en(lt(pe,"users",n.uid))).data();if(!i)throw new Error("User not found");const s=await en(lt(pe,"compatibility",n.uid)),o=s.exists()?((C=s.data())==null?void 0:C.answers)||[]:[],a=Rt(pe,"swipes"),l=Zt(a,Tt("swiper_id","==",n.uid)),u=await hn(l),d=new Set;u.forEach(N=>{d.add(N.data().swiped_id)});const h=Rt(pe,"blocks"),f=Zt(h,Tt("blocker_id","==",n.uid)),y=await hn(f),T=new Set;y.forEach(N=>{T.add(N.data().blocked_id)});const{calculateMatchCompatibility:b}=await Sl(async()=>{const{calculateMatchCompatibility:N}=await import("./compatibilityMatching-FUgQoGFs.js");return{calculateMatchCompatibility:N}},[]),I=Rt(pe,"users"),g=(i.interested_in||[]).map(N=>Zt(I,Tt("gender","==",N),FT(50))),v=await Promise.all(g.map(N=>hn(N))),E=new Map;v.forEach(N=>{N.forEach(D=>{var G;const A=D.data();(G=A.interested_in)!=null&&G.includes(i.gender)&&E.set(D.id,{id:D.id,data:A})})});const k=[];E.forEach((N,D)=>{D!==n.uid&&(d.has(D)||T.has(D)||k.push(N))});const M=k.map(N=>en(lt(pe,"compatibility",N.id)).catch(()=>null)),S=await Promise.all(M),x=[];for(let N=0;N<k.length;N++){const{id:D,data:A}=k[N],G=S[N];try{const Y=G!=null&&G.exists()?((R=G.data())==null?void 0:R.answers)||[]:[],Z=o.length>0&&Y.length>0?b(o,Y).overall:50;x.push({user:{id:D,name:A.name||"",age:A.age||0,gender:A.gender||"",bio:A.bio||null,location:A.location||null,photos:A.photos||[],distance:null,founder_status:A.founder_status||null,industry:A.industry||null,funding_status:A.funding_status||null,company_name:A.company_name||null,company_stage:A.company_stage||null,role:A.role||null,founding_story:A.founding_story||null,biggest_challenge:A.biggest_challenge||null,work_life_balance:A.work_life_balance||null,ideal_date_night:A.ideal_date_night||null,view_on_exit:A.view_on_exit||null,date_people_who_talk_work:A.date_people_who_talk_work||null,how_destress:A.how_destress||null,coffee_order:A.coffee_order||null,hustle_quote:A.hustle_quote||null},compatibilityScore:Z})}catch(Y){X.error(`Error calculating compatibility for user ${D}`,Y,{userId:D});continue}}return x.sort((N,D)=>D.compatibilityScore-N.compatibilityScore),x.slice(0,e).map(N=>N.user)}async getUserProfile(e){const n=await en(lt(pe,"users",e));if(!n.exists())throw new Error("User not found");return zi(n.data(),e)}async updateProfile(e){var b;const n=localStorage.getItem("known_user"),r=localStorage.getItem("known_token");if(!n||!r){const I=me.currentUser;if(!I)throw new Error("Not authenticated");const w=lt(pe,"users",I.uid),g={...e,updated_at:Bn()};delete g.id,delete g.created_at,await m4(w,g);const v=await en(w);return zi(v.data(),I.uid)}const s=JSON.parse(n).id;if(!s)throw new Error("User ID not found");const a=`https://firestore.googleapis.com/v1/projects/known-dating-e5f04/databases/(default)/documents/users/${s}`,l={...e};delete l.id,delete l.created_at;const u={};for(const[I,w]of Object.entries(l))w!=null&&(typeof w=="string"?u[I]={stringValue:w}:typeof w=="number"?Number.isInteger(w)?u[I]={integerValue:w.toString()}:u[I]={doubleValue:w.toString()}:typeof w=="boolean"?u[I]={booleanValue:w}:Array.isArray(w)&&(u[I]={arrayValue:{values:w.map(g=>typeof g=="string"?{stringValue:g}:typeof g=="number"?{integerValue:g.toString()}:typeof g=="boolean"?{booleanValue:g}:{nullValue:null})}}));u.updated_at={timestampValue:new Date().toISOString()};const d={fields:u},h=await fetch(a,{method:"PATCH",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(d)});if(!h.ok){const I=await h.text();throw new Error(`Failed to update profile: ${h.status} - ${I}`)}const f=await fetch(a,{method:"GET",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!f.ok)throw new Error(`Failed to fetch updated profile: ${f.status}`);const y=await f.json(),T={};if(y.fields)for(const[I,w]of Object.entries(y.fields)){const g=w;g.stringValue!==void 0?T[I]=g.stringValue:g.integerValue!==void 0?T[I]=parseInt(g.integerValue):g.doubleValue!==void 0?T[I]=parseFloat(g.doubleValue):g.booleanValue!==void 0?T[I]=g.booleanValue:g.arrayValue!==void 0?T[I]=((b=g.arrayValue.values)==null?void 0:b.map(v=>v.stringValue||v.integerValue||v.doubleValue||v.booleanValue||null))||[]:g.timestampValue!==void 0?T[I]=g.timestampValue:g.nullValue!==void 0&&(T[I]=null)}return zi(T,s)}async swipe(e,n){const r=me.currentUser;if(!r)throw new Error("Not authenticated");const i=e,s=Rt(pe,"swipes");if(await wa(s,{swiper_id:r.uid,swiped_id:i,direction:n,created_at:Bn()}),n==="right"){const o=Zt(s,Tt("swiper_id","==",i),Tt("swiped_id","==",r.uid),Tt("direction","==","right"));if(!(await hn(o)).empty){const l=Rt(pe,"matches"),u=await wa(l,{user1_id:r.uid,user2_id:i,created_at:Bn()}),h=(await en(lt(pe,"users",i))).data();return{success:!0,match:{id:u.id,user1_id:r.uid,user2_id:e,user_id:e,name:(h==null?void 0:h.name)||"",age:(h==null?void 0:h.age)||0,photos:(h==null?void 0:h.photos)||[],created_at:new Date().toISOString()}}}}return{success:!0,match:null}}async getMatches(){const e=me.currentUser;if(!e)throw new Error("Not authenticated");const n=Rt(pe,"matches"),r=Zt(n,Tt("user1_id","==",e.uid)),i=Zt(n,Tt("user2_id","==",e.uid)),[s,o]=await Promise.all([hn(r),hn(i)]),a=[],l=async u=>{const d=u.data(),h=d.user1_id===e.uid?d.user2_id:d.user1_id,y=(await en(lt(pe,"users",h))).data();if(y){const T=Rt(pe,"messages"),b=Zt(T,Tt("match_id","==",u.id),Af("created_at","desc"),FT(1)),I=await hn(b);let w,g;if(!I.empty){const v=I.docs[0].data();w=v.content,g=to(v.created_at)}a.push({id:u.id,user1_id:d.user1_id,user2_id:d.user2_id,user_id:h,name:y.name||"",age:y.age||0,photos:y.photos||[],created_at:to(d.created_at),last_message:w,last_message_time:g})}};return await Promise.all([...s.docs.map(l),...o.docs.map(l)]),a}async getMessages(e){const n=Rt(pe,"messages"),r=Zt(n,Tt("match_id","==",e),Af("created_at","asc")),i=await hn(r),s=[];return i.forEach(o=>{const a=o.data();s.push({id:o.id,sender_id:a.sender_id,sender_name:a.sender_name||"",content:a.content||"",created_at:to(a.created_at),read:a.read||!1})}),s}async sendMessage(e,n){const r=me.currentUser;if(!r)throw new Error("Not authenticated");const s=(await en(lt(pe,"users",r.uid))).data(),o=Rt(pe,"messages");return{id:(await wa(o,{match_id:e,sender_id:r.uid,sender_name:(s==null?void 0:s.name)||"",content:n,read:!1,created_at:Bn()})).id,sender_id:r.uid,sender_name:(s==null?void 0:s.name)||"",content:n,created_at:new Date().toISOString(),read:!1}}subscribeToMessages(e,n){const r=Rt(pe,"messages"),i=Zt(r,Tt("match_id","==",e),Af("created_at","asc"));return y4(i,o=>{const a=[];o.forEach(l=>{const u=l.data();a.push({id:l.id,sender_id:u.sender_id,sender_name:u.sender_name||"",content:u.content||"",created_at:to(u.created_at),read:u.read||!1})}),n(a)})}async uploadPhotos(e){const n=localStorage.getItem("known_user"),r=localStorage.getItem("known_token");let i;if(n&&r)i=JSON.parse(n).id;else{const u=me.currentUser;if(!u)throw new Error("Not authenticated");i=u.uid}if(!i)throw new Error("User ID not found");const s="known-dating-e5f04.firebasestorage.app";let o=r;if(!o&&me.currentUser&&(o=await me.currentUser.getIdToken()),!o)throw new Error("No authentication token available");const a=e.map(async u=>{try{const d=`users/${i}/photos/${Date.now()}_${u.name.replace(/[^a-zA-Z0-9._-]/g,"_")}`,h=`https://firebasestorage.googleapis.com/v0/b/${s}/o`;X.info("Uploading photo to Firebase Storage",{fileName:d,fileSize:u.size,fileType:u.type});const f=`${h}?name=${encodeURIComponent(d)}&uploadType=media`,y=await fetch(f,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":u.type||"image/jpeg"},body:u});if(!y.ok){const I=await y.text();throw X.error("Firebase Storage upload failed",new Error(`Status: ${y.status}, Error: ${I}`)),new Error(`Failed to upload photo: ${y.status} - ${I}`)}const T=await y.json();X.info("Photo uploaded successfully",{uploadData:T});let b;if(T.downloadTokens)b=`https://firebasestorage.googleapis.com/v0/b/${s}/o/${encodeURIComponent(d)}?alt=media&token=${T.downloadTokens}`;else if(T.mediaLink)b=T.mediaLink;else if(T.selfLink){const I=T.selfLink.split("/"),w=I[I.length-1];b=`https://firebasestorage.googleapis.com/v0/b/${s}/o/${w}?alt=media`}else b=`https://firebasestorage.googleapis.com/v0/b/${s}/o/${encodeURIComponent(d)}?alt=media`;return X.info("Photo download URL generated",{downloadUrl:b}),b}catch(d){throw X.error("Error uploading photo",d,{fileName:u.name}),d}});return{photos:await Promise.all(a)}}async deletePhoto(e){try{const n=cU(yU,e);await uU(n)}catch(n){X.error("Error deleting photo",n,{photoUrl:e})}}async registerDeviceToken(e){const n=me.currentUser;if(!n)throw new Error("Not authenticated");const r=lt(pe,"users",n.uid,"tokens",e);await kf(r,{token:e,created_at:Bn()})}async deleteAccount(){const e=me.currentUser;if(!e)throw new Error("Not authenticated");await g4(lt(pe,"users",e.uid)),await e.delete()}async getUserStats(){const e=me.currentUser;if(!e)throw new Error("Not authenticated");const n=Rt(pe,"matches"),r=Zt(n,Tt("user1_id","==",e.uid)),i=Zt(n,Tt("user2_id","==",e.uid)),[s,o]=await Promise.all([hn(r),hn(i)]);return{matches:s.size+o.size,profileViews:0,likes:0}}async reportUser(e,n,r){const i=me.currentUser;if(!i)throw new Error("Not authenticated");const s=Rt(pe,"reports");return await wa(s,{reporter_id:i.uid,reported_id:e,reason:n,details:r||null,created_at:Bn()}),{success:!0,message:"Report submitted successfully"}}async blockUser(e){const n=me.currentUser;if(!n)throw new Error("Not authenticated");const r=Rt(pe,"blocks");return await wa(r,{blocker_id:n.uid,blocked_id:e,created_at:Bn()}),{success:!0,message:"User blocked successfully"}}async unblockUser(e){const n=me.currentUser;if(!n)throw new Error("Not authenticated");const r=Rt(pe,"blocks"),i=Zt(r,Tt("blocker_id","==",n.uid),Tt("blocked_id","==",e)),s=await hn(i),o=_4(pe);return s.forEach(a=>{o.delete(a.ref)}),await o.commit(),{success:!0,message:"User unblocked successfully"}}async getBlockedUsers(){const e=me.currentUser;if(!e)throw new Error("Not authenticated");const n=Rt(pe,"blocks"),r=Zt(n,Tt("blocker_id","==",e.uid)),i=await hn(r),s=[];return i.forEach(o=>{s.push(o.data().blocked_id)}),s.map(o=>({id:o}))}onAuthStateChanged(e){return jM(me,e)}async getToken(){const e=me.currentUser;return e?e.getIdToken():null}async getCompatibilityProfile(){const e=me.currentUser;if(!e)throw new Error("Not authenticated");const n=await en(lt(pe,"compatibility",e.uid));return n.exists()?n.data():null}async saveCompatibilityAnswer(e,n){const r=me.currentUser;if(!r)throw new Error("Not authenticated");const i=lt(pe,"compatibility",r.uid),s=await en(i),a=(s.exists()?s.data():{answers:[]}).answers||[],l=a.findIndex(u=>u.questionId===e);l>=0?a[l]={questionId:e,answer:n,answeredAt:new Date().toISOString()}:a.push({questionId:e,answer:n,answeredAt:new Date().toISOString()}),await kf(i,{userId:r.uid,answers:a,lastUpdated:Bn()},{merge:!0})}}const Ae=new _U,wU=t=>(t.startsWith("http://")||t.startsWith("https://")||t.startsWith("data:"),t);class TU{setToken(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")}async register(e){return Ae.register(e)}async login(e,n){const r=await Ae.login(e,n);return r.token&&this.setToken(r.token),r}async getCurrentUser(){return Ae.getCurrentUser()}async getDiscoverUsers(){return Ae.getDiscoverUsers()}async getUserProfile(e){return Ae.getUserProfile(e)}async updateProfile(e){return Ae.updateProfile(e)}async swipe(e,n){return Ae.swipe(e,n)}async getMatches(){return Ae.getMatches()}async getMessages(e){return Ae.getMessages(e)}async sendMessage(e,n){return Ae.sendMessage(e,n)}async registerDeviceToken(e){return Ae.registerDeviceToken(e)}async deleteAccount(){return Ae.deleteAccount()}async getUserStats(){return Ae.getUserStats()}async uploadPhotos(e){return Ae.uploadPhotos(e)}async deletePhoto(e){return Ae.deletePhoto(e)}async reportUser(e,n,r){return Ae.reportUser(e,n,r)}async blockUser(e){return Ae.blockUser(e)}async unblockUser(e){return Ae.unblockUser(e)}async getBlockedUsers(){return Ae.getBlockedUsers()}}const ve=new TU,Vs=Xl("PushNotifications",{});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ve=(t,e)=>{const n=V.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},d)=>V.createElement("svg",{ref:d,...xU,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${EU(t)}`,a].join(" "),...u},[...e.map(([h,f])=>V.createElement(h,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=Ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=Ve("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=Ve("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=Ve("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=Ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=Ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=Ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=Ve("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=Ve("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=Ve("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=Ve("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=Ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=Ve("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=Ve("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=Ve("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=Ve("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=Ve("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=Ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=Ve("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=Ve("Sliders",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=Ve("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=Ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=Ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function LU(t){t.CapacitorUtils.Synapse=new Proxy({},{get(e,n){return new Proxy({},{get(r,i){return(s,o,a)=>{const l=t.Capacitor.Plugins[n];if(l===void 0){a(new Error(`Capacitor plugin ${n} not found`));return}if(typeof l[i]!="function"){a(new Error(`Method ${i} not found in Capacitor plugin ${n}`));return}(async()=>{try{const u=await l[i](s);o(u)}catch(u){a(u)}})()}}})}})}function jU(t){t.CapacitorUtils.Synapse=new Proxy({},{get(e,n){return t.cordova.plugins[n]}})}function UU(t=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!t?LU(window):window.cordova!==void 0&&jU(window))}const FU=Xl("Geolocation",{web:()=>Sl(()=>import("./web-CljVjA4c.js"),[]).then(t=>new t.GeolocationWeb)});UU();function BU({onComplete:t,onSkip:e}){const[n,r]=V.useState(!1),[i,s]=V.useState(""),o=async()=>{try{if(r(!0),s(""),tr.isNativePlatform()){const l=await FU.getCurrentPosition(),{latitude:u,longitude:d}=l.coords,h=await a(u,d);t(h)}else{if(!navigator.geolocation){s("Geolocation is not supported by your browser");return}navigator.geolocation.getCurrentPosition(async l=>{const{latitude:u,longitude:d}=l.coords,h=await a(u,d);t(h)},()=>{s("Unable to get your location. You can add it manually in your profile."),setTimeout(()=>e(),2e3)})}}catch(l){X.error("Location permission error",l),s("Unable to get your location. You can add it manually in your profile."),setTimeout(()=>e(),2e3)}finally{r(!1)}},a=async(l,u)=>{try{const h=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${l}&lon=${u}`)).json();if(h.address){const f=h.address.city||h.address.town||h.address.village,y=h.address.state;return f&&y?`${f}, ${y}`:"Location found"}return"Location found"}catch(d){return X.error("Reverse geocoding error",d,{lat:l,lon:u}),`${l.toFixed(4)}, ${u.toFixed(4)}`}};return m.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:m.jsx("div",{className:"bg-white rounded-2xl max-w-md w-full p-8",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-4",children:m.jsx(Do,{className:"w-8 h-8 text-primary"})}),m.jsx("h2",{className:"text-2xl font-bold text-dark mb-2",children:"Enable Location"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Help us find people near you for better matches"}),i&&m.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg text-sm",children:i}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("button",{onClick:o,disabled:n,className:"w-full px-6 py-3 bg-primary text-white rounded-lg font-semibold hover:bg-primary/90 transition disabled:opacity-50",children:n?"Getting location...":"Allow Location Access"}),m.jsx("button",{onClick:e,className:"w-full px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition",children:"Skip for now"})]}),m.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"You can always update your location in your profile settings"})]})})})}const lP=V.createContext(void 0);function zU({children:t}){const[e,n]=V.useState(null),[r,i]=V.useState(!0),[s,o]=V.useState(!1),[a,l]=V.useState(!1),u=(g,v)=>{try{localStorage.setItem("known_user",JSON.stringify(g)),localStorage.setItem("known_token",v)}catch(E){X.error("Failed to store auth data",E)}},d=()=>{try{localStorage.removeItem("known_user"),localStorage.removeItem("known_token")}catch(g){X.error("Failed to clear auth data",g)}},h=()=>{try{const g=localStorage.getItem("known_user"),v=localStorage.getItem("known_token");if(g&&v)return{user:JSON.parse(g),token:v}}catch(g){X.error("Failed to load stored auth data",g),d()}return{user:null,token:null}};V.useEffect(()=>{if(tr.isNativePlatform())return f(),Vs.addListener("registration",g=>{X.info("Push notification token registered",{token:g.value}),ve.registerDeviceToken(g.value)}),Vs.addListener("registrationError",g=>{X.error("Push notification registration failed",new Error(g.error||"Registration failed"))}),Vs.addListener("pushNotificationReceived",g=>{X.info("Push notification received",{notification:g})}),()=>{Vs.removeAllListeners()}},[]),V.useEffect(()=>{let g=!0,v=null;const E=h();E.user&&E.token&&(X.info("Found stored auth data, using it"),g&&(n(E.user),ve.setToken(E.token),i(!1)));const k=setTimeout(()=>{g&&!E.user&&(X.error("Firebase auth state check timed out, setting loading to false",new Error("Auth timeout")),i(!1),n(null))},1e4);try{v=Ae.onAuthStateChanged(async M=>{if(g){if(clearTimeout(k),M)try{const S=await Ae.getCurrentUser(),x=await M.getIdToken();g&&(n(S),ve.setToken(x),u(S,x))}catch(S){X.error("Failed to get user data after auth state change",S),g&&(n(null),ve.setToken(null),d())}else{if(s&&g){n(null),ve.setToken(null);return}const S=h();!S.user&&g?(n(null),ve.setToken(null),d()):S.user&&g&&(n(S.user),ve.setToken(S.token||null))}g&&i(!1)}})}catch(M){X.error("Failed to set up auth state listener",M),clearTimeout(k),g&&i(!1)}return()=>{g=!1,clearTimeout(k),v&&v()}},[]);const f=async()=>{try{(await Vs.requestPermissions()).receive==="granted"&&await Vs.register()}catch(g){X.error("Error initializing push notifications",g)}},y=async(g,v)=>{try{const{token:E,user:k}=await ve.login(g,v);ve.setToken(E),n(k),u(k,E),setTimeout(()=>{window.location.href="/compatibility"},100)}catch(E){throw X.error("Login failed",E),E}},T=async g=>{try{const{token:v,user:E}=await ve.register(g);ve.setToken(v),n(E),u(E,v),setTimeout(()=>{window.location.href="/compatibility"},100)}catch(v){throw X.error("Registration failed",v),v}},b=async()=>{X.info("Starting logout process"),o(!0),X.info("Clearing auth data"),d(),n(null),ve.setToken(null);try{X.info("Signing out from Firebase"),await Ae.logout(),X.info("Firebase sign out successful")}catch(g){X.error("Firebase logout failed, but local state cleared",g)}finally{X.info("Logout process completed"),setTimeout(()=>{o(!1)},2e3)}},I=g=>{n(g)},w=async g=>{if(l(!1),g&&e)try{const v=await ve.updateProfile({location:g});n(v)}catch(v){X.error("Failed to update user location",v)}};return m.jsxs(lP.Provider,{value:{user:e,loading:r,login:y,register:T,logout:b,updateUser:I},children:[t,a&&m.jsx(BU,{onComplete:w,onSkip:()=>l(!1)})]})}function Mi(){const t=V.useContext(lP);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const $U="/images/logo.png",WU="/images/logo.svg";function qU(){const t=Bo(),e=[{path:"/compatibility",icon:NU,label:"Questions"},{path:"/matches",icon:xv,label:"Matches"},{path:"/profile",icon:Fs,label:"Profile"}];return m.jsx("nav",{className:"fixed top-0 left-0 right-0 bg-white/90 backdrop-blur-sm border-b border-icy-200 z-40 nav-safe-area shadow-sm",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4",children:m.jsxs("div",{className:"flex items-center justify-between h-16",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"relative",children:m.jsx("img",{src:$U,alt:"Known",className:"w-10 h-10 object-contain",onError:n=>{const r=n.target;r.src.endsWith(".png")&&(r.src=WU)}})}),m.jsx("span",{className:"text-xl font-bold text-dark",children:"Known"})]}),m.jsx("div",{className:"flex gap-1",children:e.map(n=>{const r=n.icon,i=t.pathname===n.path;return m.jsxs(mr,{to:n.path,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition ${i?"bg-primary text-white":"text-gray-600 hover:bg-gray-100"}`,children:[m.jsx(r,{className:"w-5 h-5"}),m.jsx("span",{className:"hidden sm:inline font-medium",children:n.label})]},n.path)})})]})})})}function Ev(t){if(!t||typeof t!="string")return{valid:!1,error:"Email is required"};const e=t.trim().toLowerCase();return e.length===0?{valid:!1,error:"Email cannot be empty"}:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?e.length>254?{valid:!1,error:"Email address is too long"}:{valid:!0}:{valid:!1,error:"Please enter a valid email address"}}function Iv(t){return!t||typeof t!="string"?{valid:!1,error:"Password is required"}:t.length<6?{valid:!1,error:"Password must be at least 6 characters"}:t.length>128?{valid:!1,error:"Password is too long"}:{valid:!0}}function uP(t){if(!t||typeof t!="string")return{valid:!1,error:"Name is required"};const e=t.trim();return e.length===0?{valid:!1,error:"Name cannot be empty"}:e.length<2?{valid:!1,error:"Name must be at least 2 characters"}:e.length>50?{valid:!1,error:"Name is too long"}:/[<>{}[\]\\\/]/.test(e)?{valid:!1,error:"Name contains invalid characters"}:{valid:!0}}function cP(t){const e=typeof t=="string"?parseInt(t,10):t;return isNaN(e)?{valid:!1,error:"Age must be a number"}:e<18?{valid:!1,error:"You must be at least 18 years old"}:e>120?{valid:!1,error:"Please enter a valid age"}:{valid:!0}}function dP(t){const e=["male","female","non-binary","other"];return!t||typeof t!="string"?{valid:!1,error:"Gender is required"}:e.includes(t.toLowerCase())?{valid:!0}:{valid:!1,error:"Please select a valid gender"}}function hP(t){if(!Array.isArray(t))return{valid:!1,error:"Interested in must be an array"};if(t.length===0)return{valid:!1,error:"Please select at least one preference"};const e=["male","female","non-binary","other"];for(const n of t)if(!e.includes(n.toLowerCase()))return{valid:!1,error:"Invalid gender preference"};return{valid:!0}}function HU(t){if(!t||typeof t!="string")return{valid:!1,error:"Message cannot be empty"};const e=t.trim();return e.length===0?{valid:!1,error:"Message cannot be empty"}:e.length>2e3?{valid:!1,error:"Message is too long (max 2000 characters)"}:{valid:!0}}function GU(t){if(!t||typeof t!="string")return{valid:!1,error:"Answer cannot be empty"};const e=t.trim();return e.length===0?{valid:!1,error:"Answer cannot be empty"}:e.length<10?{valid:!1,error:"Please provide a more detailed answer (at least 10 characters)"}:e.length>5e3?{valid:!1,error:"Answer is too long (max 5000 characters)"}:{valid:!0}}const fP=Object.freeze(Object.defineProperty({__proto__:null,validateAge:cP,validateCompatibilityAnswer:GU,validateEmail:Ev,validateGender:dP,validateInterestedIn:hP,validateMessage:HU,validateName:uP,validatePassword:Iv},Symbol.toStringTag,{value:"Module"}));function KU(){const[t,e]=V.useState(""),[n,r]=V.useState(""),[i,s]=V.useState(""),[o,a]=V.useState(!1),{login:l}=Mi(),u=async d=>{d.preventDefault(),s("");const h=Ev(t);if(!h.valid){s(h.error||"Invalid email");return}const f=Iv(n);if(!f.valid){s(f.error||"Invalid password");return}a(!0),s("");try{await l(t.trim().toLowerCase(),n)}catch(y){console.error("Login error:",y),s(y.message||"Failed to login. Please check your credentials and try again."),a(!1)}};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-icy-100 via-white to-icy-200 flex items-center justify-center px-4 relative",children:m.jsxs("div",{className:"max-w-md w-full bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-8 border border-icy-200 relative z-10",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary rounded-full mb-4",children:m.jsx(lu,{className:"w-8 h-8 text-white",fill:"currentColor"})}),m.jsx("h1",{className:"text-3xl font-bold text-dark mb-2",children:"Welcome Back to Known"}),m.jsx("p",{className:"text-gray-600",children:"Log in to connect with people who share your values."})]}),i&&m.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:i}),m.jsxs("form",{onSubmit:u,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),m.jsx("input",{type:"text",inputMode:"email",value:t,onChange:d=>e(d.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition",placeholder:"your@email.com"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),m.jsx("input",{type:"password",value:n,onChange:d=>r(d.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition",placeholder:""})]}),m.jsx("button",{type:"submit",disabled:o,className:"w-full bg-primary text-white py-3 rounded-lg font-semibold hover:bg-primary/90 transition disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Logging in...":"Log In"})]}),m.jsxs("p",{className:"mt-6 text-center text-gray-600",children:["Don't have an account?"," ",m.jsx(mr,{to:"/register",className:"text-primary font-semibold hover:underline",children:"Sign up"})]}),m.jsxs("p",{className:"mt-4 text-center text-xs text-gray-500",children:["By continuing, you agree to our"," ",m.jsx(mr,{to:"/terms",className:"text-primary font-semibold hover:underline",children:"Terms of Service"})," ","and acknowledge our"," ",m.jsx(mr,{to:"/privacy",className:"text-primary font-semibold hover:underline",children:"Privacy Policy"}),"."]})]})})}function YU(){const[t,e]=V.useState(""),[n,r]=V.useState(!1),[i,s]=V.useState(!1),{register:o}=Mi(),[a,l]=V.useState({email:"",password:"",name:"",age:"25",gender:"",interested_in:[]}),u=async h=>{h.preventDefault(),e("");const f=Ev(a.email);if(!f.valid){e(f.error||"Invalid email");return}const y=Iv(a.password);if(!y.valid){e(y.error||"Invalid password");return}const T=uP(a.name);if(!T.valid){e(T.error||"Invalid name");return}const b=cP(a.age);if(!b.valid){e(b.error||"Invalid age");return}const I=dP(a.gender);if(!I.valid){e(I.error||"Invalid gender");return}const w=hP(a.interested_in);if(!w.valid){e(w.error||"Invalid preferences");return}if(!i){e("You must accept the Terms of Service to create an account");return}r(!0);try{await o({email:a.email.trim().toLowerCase(),password:a.password,name:a.name.trim(),age:parseInt(a.age),gender:a.gender,interested_in:a.interested_in})}catch(g){e(g.message||"Failed to register. Please try again."),r(!1)}},d=h=>{l(f=>({...f,interested_in:f.interested_in.includes(h)?f.interested_in.filter(y=>y!==h):[...f.interested_in,h]}))};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-icy-100 via-white to-icy-200 flex items-center justify-center px-4 relative",children:m.jsxs("div",{className:"max-w-md w-full bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-8 border border-icy-200 relative z-10",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary rounded-full mb-4",children:m.jsx(lu,{className:"w-8 h-8 text-white",fill:"currentColor"})}),m.jsx("h1",{className:"text-3xl font-bold text-dark mb-2",children:"Join Known"}),m.jsx("p",{className:"text-gray-600",children:"Create your account to get started"})]}),t&&m.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:t}),m.jsxs("form",{onSubmit:u,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),m.jsx("input",{type:"text",value:a.name,onChange:h=>l({...a,name:h.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition",placeholder:"Your name",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),m.jsx("input",{type:"email",inputMode:"email",value:a.email,onChange:h=>l({...a,email:h.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition",placeholder:"your@email.com",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),m.jsx("input",{type:"password",value:a.password,onChange:h=>l({...a,password:h.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition",placeholder:"Create a password",required:!0,minLength:6})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age"}),m.jsx("input",{type:"number",value:a.age,onChange:h=>l({...a,age:h.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition",placeholder:"25",min:"18",max:"100",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),m.jsxs("select",{value:a.gender,onChange:h=>l({...a,gender:h.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition",required:!0,children:[m.jsx("option",{value:"",children:"Select gender"}),m.jsx("option",{value:"male",children:"Male"}),m.jsx("option",{value:"female",children:"Female"}),m.jsx("option",{value:"non-binary",children:"Non-binary"}),m.jsx("option",{value:"other",children:"Other"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Interested in dating"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:["male","female","non-binary","other"].map(h=>m.jsx("button",{type:"button",onClick:()=>d(h),className:`px-4 py-2 rounded-lg border transition ${a.interested_in.includes(h)?"bg-primary text-white border-primary":"bg-white text-gray-700 border-gray-300 hover:border-primary"}`,children:h.charAt(0).toUpperCase()+h.slice(1).replace("-"," ")},h))}),a.interested_in.length===0&&m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select at least one"})]}),m.jsxs("div",{className:"flex items-start gap-2",children:[m.jsx("input",{type:"checkbox",id:"terms",checked:i,onChange:h=>s(h.target.checked),className:"mt-1",required:!0}),m.jsxs("label",{htmlFor:"terms",className:"text-sm text-gray-700",children:["I agree to the"," ",m.jsx(mr,{to:"/terms",target:"_blank",className:"text-primary font-semibold hover:underline",children:"Terms of Service"})," ","and acknowledge the"," ",m.jsx(mr,{to:"/privacy",target:"_blank",className:"text-primary font-semibold hover:underline",children:"Privacy Policy"}),". I understand that Known has zero tolerance for objectionable content or abusive behavior."]})]}),m.jsx("button",{type:"submit",disabled:n||!i,className:"w-full px-6 py-3 bg-primary text-white rounded-lg font-semibold hover:bg-primary/90 transition shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Creating Account...":"Create Account"})]}),m.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600",children:["Already have an account?"," ",m.jsx(mr,{to:"/login",className:"text-primary font-semibold hover:underline",children:"Sign in"})]})]})})}const Sv=V.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),yh=V.createContext({}),bv=V.createContext(null),vh=typeof document<"u",pP=vh?V.useLayoutEffect:V.useEffect,mP=V.createContext({strict:!1}),Pv=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),QU="framerAppearId",gP="data-"+Pv(QU);function XU(t,e,n,r){const{visualElement:i}=V.useContext(yh),s=V.useContext(mP),o=V.useContext(bv),a=V.useContext(Sv).reducedMotion,l=V.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;V.useInsertionEffect(()=>{u&&u.update(n,o)});const d=V.useRef(!!(n[gP]&&!window.HandoffComplete));return pP(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),V.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function no(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function JU(t,e,n){return V.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):no(n)&&(n.current=r))},[e])}function Ol(t){return typeof t=="string"||Array.isArray(t)}function _h(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Cv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Av=["initial",...Cv];function wh(t){return _h(t.animate)||Av.some(e=>Ol(t[e]))}function yP(t){return!!(wh(t)||t.variants)}function ZU(t,e){if(wh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ol(n)?n:void 0,animate:Ol(r)?r:void 0}}return t.inherit!==!1?e:{}}function eF(t){const{initial:e,animate:n}=ZU(t,V.useContext(yh));return V.useMemo(()=>({initial:e,animate:n}),[KT(e),KT(n)])}function KT(t){return Array.isArray(t)?t.join(" "):t}const YT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ll={};for(const t in YT)Ll[t]={isEnabled:e=>YT[t].some(n=>!!e[n])};function tF(t){for(const e in t)Ll[e]={...Ll[e],...t[e]}}const vP=V.createContext({}),_P=V.createContext({}),nF=Symbol.for("motionComponentSymbol");function rF({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&tF(t);function s(a,l){let u;const d={...V.useContext(Sv),...a,layoutId:iF(a)},{isStatic:h}=d,f=eF(a),y=r(a,h);if(!h&&vh){f.visualElement=XU(i,y,d,e);const T=V.useContext(_P),b=V.useContext(mP).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,b,t,T))}return V.createElement(yh.Provider,{value:f},u&&f.visualElement?V.createElement(u,{visualElement:f.visualElement,...d}):null,n(i,a,JU(y,f.visualElement,l),y,h,f.visualElement))}const o=V.forwardRef(s);return o[nF]=i,o}function iF({layoutId:t}){const e=V.useContext(vP).id;return e&&t!==void 0?e+"-"+t:t}function sF(t){function e(r,i={}){return rF(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const oF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kv(t){return typeof t!="string"||t.includes("-")?!1:!!(oF.indexOf(t)>-1||/[A-Z]/.test(t))}const _d={};function aF(t){Object.assign(_d,t)}const uu=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ps=new Set(uu);function wP(t,{layout:e,layoutId:n}){return Ps.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!_d[t]||t==="opacity")}const Xt=t=>!!(t&&t.getVelocity),lF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},uF=uu.length;function cF(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<uF;o++){const a=uu[o];if(t[a]!==void 0){const l=lF[a]||a;s+=`${l}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const TP=t=>e=>typeof e=="string"&&e.startsWith(t),xP=TP("--"),Im=TP("var(--"),dF=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,hF=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ii=(t,e,n)=>Math.min(Math.max(n,t),e),Cs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Za={...Cs,transform:t=>Ii(0,1,t)},Xu={...Cs,default:1},el=t=>Math.round(t*1e5)/1e5,Th=/(-)?([\d]*\.?[\d])+/g,EP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,fF=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function cu(t){return typeof t=="string"}const du=t=>({test:e=>cu(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Br=du("deg"),er=du("%"),ee=du("px"),pF=du("vh"),mF=du("vw"),QT={...er,parse:t=>er.parse(t)/100,transform:t=>er.transform(t*100)},XT={...Cs,transform:Math.round},IP={borderWidth:ee,borderTopWidth:ee,borderRightWidth:ee,borderBottomWidth:ee,borderLeftWidth:ee,borderRadius:ee,radius:ee,borderTopLeftRadius:ee,borderTopRightRadius:ee,borderBottomRightRadius:ee,borderBottomLeftRadius:ee,width:ee,maxWidth:ee,height:ee,maxHeight:ee,size:ee,top:ee,right:ee,bottom:ee,left:ee,padding:ee,paddingTop:ee,paddingRight:ee,paddingBottom:ee,paddingLeft:ee,margin:ee,marginTop:ee,marginRight:ee,marginBottom:ee,marginLeft:ee,rotate:Br,rotateX:Br,rotateY:Br,rotateZ:Br,scale:Xu,scaleX:Xu,scaleY:Xu,scaleZ:Xu,skew:Br,skewX:Br,skewY:Br,distance:ee,translateX:ee,translateY:ee,translateZ:ee,x:ee,y:ee,z:ee,perspective:ee,transformPerspective:ee,opacity:Za,originX:QT,originY:QT,originZ:ee,zIndex:XT,fillOpacity:Za,strokeOpacity:Za,numOctaves:XT};function Rv(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let l=!1,u=!1,d=!0;for(const h in e){const f=e[h];if(xP(h)){s[h]=f;continue}const y=IP[h],T=hF(f,y);if(Ps.has(h)){if(l=!0,o[h]=T,!d)continue;f!==(y.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,a[h]=T):i[h]=T}if(e.transform||(l||r?i.transform=cF(t.transform,n,d,r):i.transform&&(i.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:y=0}=a;i.transformOrigin=`${h} ${f} ${y}`}}const Nv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function SP(t,e,n){for(const r in e)!Xt(e[r])&&!wP(r,n)&&(t[r]=e[r])}function gF({transformTemplate:t},e,n){return V.useMemo(()=>{const r=Nv();return Rv(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function yF(t,e,n){const r=t.style||{},i={};return SP(i,r,t),Object.assign(i,gF(t,e,n)),t.transformValues?t.transformValues(i):i}function vF(t,e,n){const r={},i=yF(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const _F=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||_F.has(t)}let bP=t=>!wd(t);function wF(t){t&&(bP=e=>e.startsWith("on")?!wd(e):t(e))}try{wF(require("@emotion/is-prop-valid").default)}catch{}function TF(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(bP(i)||n===!0&&wd(i)||!e&&!wd(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function JT(t,e,n){return typeof t=="string"?t:ee.transform(e+n*t)}function xF(t,e,n){const r=JT(e,t.x,t.width),i=JT(n,t.y,t.height);return`${r} ${i}`}const EF={offset:"stroke-dashoffset",array:"stroke-dasharray"},IF={offset:"strokeDashoffset",array:"strokeDasharray"};function SF(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?EF:IF;t[s.offset]=ee.transform(-r);const o=ee.transform(e),a=ee.transform(n);t[s.array]=`${o} ${a}`}function Dv(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},d,h,f){if(Rv(t,u,d,f),h){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:T,dimensions:b}=t;y.transform&&(b&&(T.transform=y.transform),delete y.transform),b&&(i!==void 0||s!==void 0||T.transform)&&(T.transformOrigin=xF(b,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),o!==void 0&&SF(y,o,a,l,!1)}const PP=()=>({...Nv(),attrs:{}}),Mv=t=>typeof t=="string"&&t.toLowerCase()==="svg";function bF(t,e,n,r){const i=V.useMemo(()=>{const s=PP();return Dv(s,e,{enableHardwareAcceleration:!1},Mv(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};SP(s,t.style,t),i.style={...s,...i.style}}return i}function PF(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(kv(n)?bF:vF)(r,s,o,n),d={...TF(r,typeof n=="string",t),...l,ref:i},{children:h}=r,f=V.useMemo(()=>Xt(h)?h.get():h,[h]);return V.createElement(n,{...d,children:f})}}function CP(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const AP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function kP(t,e,n,r){CP(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(AP.has(i)?i:Pv(i),e.attrs[i])}function Vv(t,e){const{style:n}=t,r={};for(const i in n)(Xt(n[i])||e.style&&Xt(e.style[i])||wP(i,t))&&(r[i]=n[i]);return r}function RP(t,e){const n=Vv(t,e);for(const r in t)if(Xt(t[r])||Xt(e[r])){const i=uu.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function Ov(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function Lv(t){const e=V.useRef(null);return e.current===null&&(e.current=t()),e.current}const Td=t=>Array.isArray(t),CF=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),AF=t=>Td(t)?t[t.length-1]||0:t;function Ic(t){const e=Xt(t)?t.get():t;return CF(e)?e.toValue():e}function kF({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:RF(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const NP=t=>(e,n)=>{const r=V.useContext(yh),i=V.useContext(bv),s=()=>kF(t,e,r,i);return n?s():Lv(s)};function RF(t,e,n,r){const i={},s=r(t,{});for(const f in s)i[f]=Ic(s[f]);let{initial:o,animate:a}=t;const l=wh(t),u=yP(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const h=d?a:o;return h&&typeof h!="boolean"&&!_h(h)&&(Array.isArray(h)?h:[h]).forEach(y=>{const T=Ov(t,y);if(!T)return;const{transitionEnd:b,transition:I,...w}=T;for(const g in w){let v=w[g];if(Array.isArray(v)){const E=d?v.length-1:0;v=v[E]}v!==null&&(i[g]=v)}for(const g in b)i[g]=b[g]}),i}const ze=t=>t;class ZT{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function NF(t){let e=new ZT,n=new ZT,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,d=!1)=>{const h=d&&i,f=h?e:n;return u&&o.add(l),f.add(l)&&h&&i&&(r=e.order.length),l},cancel:l=>{n.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const d=e.order[u];d(l),o.has(d)&&(a.schedule(d),t())}i=!1,s&&(s=!1,a.process(l))}};return a}const Ju=["prepare","read","update","preRender","render","postRender"],DF=40;function MF(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Ju.reduce((h,f)=>(h[f]=NF(()=>n=!0),h),{}),o=h=>s[h].process(i),a=()=>{const h=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(h-i.timestamp,DF),1),i.timestamp=h,i.isProcessing=!0,Ju.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},l=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:Ju.reduce((h,f)=>{const y=s[f];return h[f]=(T,b=!1,I=!1)=>(n||l(),y.schedule(T,b,I)),h},{}),cancel:h=>Ju.forEach(f=>s[f].cancel(h)),state:i,steps:s}}const{schedule:xe,cancel:ir,state:xt,steps:Df}=MF(typeof requestAnimationFrame<"u"?requestAnimationFrame:ze,!0),VF={useVisualState:NP({scrapeMotionValuesFromProps:RP,createRenderState:PP,onMount:(t,e,{renderState:n,latestValues:r})=>{xe.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),xe.render(()=>{Dv(n,r,{enableHardwareAcceleration:!1},Mv(e.tagName),t.transformTemplate),kP(e,n)})}})},OF={useVisualState:NP({scrapeMotionValuesFromProps:Vv,createRenderState:Nv})};function LF(t,{forwardMotionProps:e=!1},n,r){return{...kv(t)?VF:OF,preloadedFeatures:n,useRender:PF(e),createVisualElement:r,Component:t}}function fr(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const DP=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function xh(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const jF=t=>e=>DP(e)&&t(e,xh(e));function vr(t,e,n,r){return fr(t,e,jF(n),r)}const UF=(t,e)=>n=>e(t(n)),pi=(...t)=>t.reduce(UF);function MP(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const ex=MP("dragHorizontal"),tx=MP("dragVertical");function VP(t){let e=!1;if(t==="y")e=tx();else if(t==="x")e=ex();else{const n=ex(),r=tx();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function OP(){const t=VP(!0);return t?(t(),!1):!0}class Vi{constructor(e){this.isMounted=!1,this.node=e}update(){}}function nx(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||OP())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&xe.update(()=>a[r](s,o))};return vr(t.current,n,i,{passive:!t.getProps()[r]})}class FF extends Vi{mount(){this.unmount=pi(nx(this.node,!0),nx(this.node,!1))}unmount(){}}class BF extends Vi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pi(fr(this.node.current,"focus",()=>this.onFocus()),fr(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const LP=(t,e)=>e?t===e?!0:LP(t,e.parentElement):!1;function Mf(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,xh(n))}class zF extends Vi{constructor(){super(...arguments),this.removeStartListeners=ze,this.removeEndListeners=ze,this.removeAccessibleListeners=ze,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=vr(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();xe.update(()=>{!h&&!LP(this.node.current,a.target)?d&&d(a,l):u&&u(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=vr(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=pi(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Mf("up",(l,u)=>{const{onTap:d}=this.node.getProps();d&&xe.update(()=>d(l,u))})};this.removeEndListeners(),this.removeEndListeners=fr(this.node.current,"keyup",o),Mf("down",(a,l)=>{this.startPress(a,l)})},n=fr(this.node.current,"keydown",e),r=()=>{this.isPressing&&Mf("cancel",(s,o)=>this.cancelPress(s,o))},i=fr(this.node.current,"blur",r);this.removeAccessibleListeners=pi(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&xe.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!OP()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&xe.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=vr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=fr(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=pi(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Sm=new WeakMap,Vf=new WeakMap,$F=t=>{const e=Sm.get(t.target);e&&e(t)},WF=t=>{t.forEach($F)};function qF({root:t,...e}){const n=t||document;Vf.has(n)||Vf.set(n,{});const r=Vf.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(WF,{root:t,...e})),r[i]}function HF(t,e,n){const r=qF(e);return Sm.set(t,n),r.observe(t),()=>{Sm.delete(t),r.unobserve(t)}}const GF={some:0,all:1};class KF extends Vi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:GF[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(l)};return HF(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(YF(e,n))&&this.startObserver()}unmount(){}}function YF({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const QF={inView:{Feature:KF},tap:{Feature:zF},focus:{Feature:BF},hover:{Feature:FF}};function jP(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function XF(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function JF(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Eh(t,e,n){const r=t.getProps();return Ov(r,e,n!==void 0?n:r.custom,XF(t),JF(t))}let jv=ze;const as=t=>t*1e3,_r=t=>t/1e3,ZF={current:!1},UP=t=>Array.isArray(t)&&typeof t[0]=="number";function FP(t){return!!(!t||typeof t=="string"&&BP[t]||UP(t)||Array.isArray(t)&&t.every(FP))}const La=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,BP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:La([0,.65,.55,1]),circOut:La([.55,0,1,.45]),backIn:La([.31,.01,.66,-.59]),backOut:La([.33,1.53,.69,.99])};function zP(t){if(t)return UP(t)?La(t):Array.isArray(t)?t.map(zP):BP[t]}function e3(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:n};l&&(u.offset=l);const d=zP(a);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function t3(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const $P=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,n3=1e-7,r3=12;function i3(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=$P(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>n3&&++a<r3);return o}function hu(t,e,n,r){if(t===e&&n===r)return ze;const i=s=>i3(s,0,1,t,n);return s=>s===0||s===1?s:$P(i(s),e,r)}const s3=hu(.42,0,1,1),o3=hu(0,0,.58,1),WP=hu(.42,0,.58,1),a3=t=>Array.isArray(t)&&typeof t[0]!="number",qP=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,HP=t=>e=>1-t(1-e),Uv=t=>1-Math.sin(Math.acos(t)),GP=HP(Uv),l3=qP(Uv),KP=hu(.33,1.53,.69,.99),Fv=HP(KP),u3=qP(Fv),c3=t=>(t*=2)<1?.5*Fv(t):.5*(2-Math.pow(2,-10*(t-1))),d3={linear:ze,easeIn:s3,easeInOut:WP,easeOut:o3,circIn:Uv,circInOut:l3,circOut:GP,backIn:Fv,backInOut:u3,backOut:KP,anticipate:c3},rx=t=>{if(Array.isArray(t)){jv(t.length===4);const[e,n,r,i]=t;return hu(e,n,r,i)}else if(typeof t=="string")return d3[t];return t},Bv=(t,e)=>n=>!!(cu(n)&&fF.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),YP=(t,e,n)=>r=>{if(!cu(r))return r;const[i,s,o,a]=r.match(Th);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},h3=t=>Ii(0,255,t),Of={...Cs,transform:t=>Math.round(h3(t))},es={test:Bv("rgb","red"),parse:YP("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Of.transform(t)+", "+Of.transform(e)+", "+Of.transform(n)+", "+el(Za.transform(r))+")"};function f3(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const bm={test:Bv("#"),parse:f3,transform:es.transform},ro={test:Bv("hsl","hue"),parse:YP("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+er.transform(el(e))+", "+er.transform(el(n))+", "+el(Za.transform(r))+")"},Nt={test:t=>es.test(t)||bm.test(t)||ro.test(t),parse:t=>es.test(t)?es.parse(t):ro.test(t)?ro.parse(t):bm.parse(t),transform:t=>cu(t)?t:t.hasOwnProperty("red")?es.transform(t):ro.transform(t)},Re=(t,e,n)=>-n*t+n*e+t;function Lf(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function p3({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Lf(l,a,t+1/3),s=Lf(l,a,t),o=Lf(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const jf=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},m3=[bm,es,ro],g3=t=>m3.find(e=>e.test(t));function ix(t){const e=g3(t);let n=e.parse(t);return e===ro&&(n=p3(n)),n}const QP=(t,e)=>{const n=ix(t),r=ix(e),i={...n};return s=>(i.red=jf(n.red,r.red,s),i.green=jf(n.green,r.green,s),i.blue=jf(n.blue,r.blue,s),i.alpha=Re(n.alpha,r.alpha,s),es.transform(i))};function y3(t){var e,n;return isNaN(t)&&cu(t)&&(((e=t.match(Th))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(EP))===null||n===void 0?void 0:n.length)||0)>0}const XP={regex:dF,countKey:"Vars",token:"${v}",parse:ze},JP={regex:EP,countKey:"Colors",token:"${c}",parse:Nt.parse},ZP={regex:Th,countKey:"Numbers",token:"${n}",parse:Cs.parse};function Uf(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function xd(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Uf(n,XP),Uf(n,JP),Uf(n,ZP),n}function eC(t){return xd(t).values}function tC(t){const{values:e,numColors:n,numVars:r,tokenised:i}=xd(t),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(XP.token,o[l]):l<r+n?a=a.replace(JP.token,Nt.transform(o[l])):a=a.replace(ZP.token,el(o[l]));return a}}const v3=t=>typeof t=="number"?0:t;function _3(t){const e=eC(t);return tC(t)(e.map(v3))}const Si={test:y3,parse:eC,createTransformer:tC,getAnimatableNone:_3},nC=(t,e)=>n=>`${n>0?e:t}`;function rC(t,e){return typeof t=="number"?n=>Re(t,e,n):Nt.test(t)?QP(t,e):t.startsWith("var(")?nC(t,e):sC(t,e)}const iC=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>rC(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},w3=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=rC(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},sC=(t,e)=>{const n=Si.createTransformer(e),r=xd(t),i=xd(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?pi(iC(r.values,i.values),n):nC(t,e)},jl=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},sx=(t,e)=>n=>Re(t,e,n);function T3(t){return typeof t=="number"?sx:typeof t=="string"?Nt.test(t)?QP:sC:Array.isArray(t)?iC:typeof t=="object"?w3:sx}function x3(t,e,n){const r=[],i=n||T3(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ze:e;a=pi(l,a)}r.push(a)}return r}function zv(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(jv(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=x3(e,r,i),a=o.length,l=u=>{let d=0;if(a>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=jl(t[d],t[d+1],u);return o[d](h)};return n?u=>l(Ii(t[0],t[s-1],u)):l}function E3(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=jl(0,e,r);t.push(Re(n,1,i))}}function I3(t){const e=[0];return E3(e,t.length-1),e}function S3(t,e){return t.map(n=>n*e)}function b3(t,e){return t.map(()=>e||WP).splice(0,t.length-1)}function Ed({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=a3(r)?r.map(rx):rx(r),s={done:!1,value:e[0]},o=S3(n&&n.length===e.length?n:I3(e),t),a=zv(o,e,{ease:Array.isArray(i)?i:b3(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}function oC(t,e){return e?t*(1e3/e):0}const P3=5;function aC(t,e,n){const r=Math.max(e-P3,0);return oC(n-t(r),e-r)}const Ff=.001,C3=.01,A3=10,k3=.05,R3=1;function N3({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s,o=1-e;o=Ii(k3,R3,o),t=Ii(C3,A3,_r(t)),o<1?(i=u=>{const d=u*o,h=d*t,f=d-n,y=Pm(u,o),T=Math.exp(-h);return Ff-f/y*T},s=u=>{const h=u*o*t,f=h*n+n,y=Math.pow(o,2)*Math.pow(u,2)*t,T=Math.exp(-h),b=Pm(Math.pow(u,2),o);return(-i(u)+Ff>0?-1:1)*((f-y)*T)/b}):(i=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-Ff+d*h},s=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const a=5/t,l=M3(i,s,a);if(t=as(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const D3=12;function M3(t,e,n){let r=n;for(let i=1;i<D3;i++)r=r-t(r)/e(r);return r}function Pm(t,e){return t*Math.sqrt(1-e*e)}const V3=["duration","bounce"],O3=["stiffness","damping","mass"];function ox(t,e){return e.some(n=>t[n]!==void 0)}function L3(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!ox(t,O3)&&ox(t,V3)){const n=N3(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function lC({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=L3({...r,velocity:-_r(r.velocity||0)}),y=h||0,T=l/(2*Math.sqrt(a*u)),b=s-i,I=_r(Math.sqrt(a/u)),w=Math.abs(b)<5;n||(n=w?.01:2),e||(e=w?.005:.5);let g;if(T<1){const v=Pm(I,T);g=E=>{const k=Math.exp(-T*I*E);return s-k*((y+T*I*b)/v*Math.sin(v*E)+b*Math.cos(v*E))}}else if(T===1)g=v=>s-Math.exp(-I*v)*(b+(y+I*b)*v);else{const v=I*Math.sqrt(T*T-1);g=E=>{const k=Math.exp(-T*I*E),M=Math.min(v*E,300);return s-k*((y+T*I*b)*Math.sinh(M)+v*b*Math.cosh(M))/v}}return{calculatedDuration:f&&d||null,next:v=>{const E=g(v);if(f)o.done=v>=d;else{let k=y;v!==0&&(T<1?k=aC(g,v,E):k=0);const M=Math.abs(k)<=n,S=Math.abs(s-E)<=e;o.done=M&&S}return o.value=o.done?s:E,o}}}function ax({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:d}){const h=t[0],f={done:!1,value:h},y=x=>a!==void 0&&x<a||l!==void 0&&x>l,T=x=>a===void 0?l:l===void 0||Math.abs(a-x)<Math.abs(l-x)?a:l;let b=n*e;const I=h+b,w=o===void 0?I:o(I);w!==I&&(b=w-h);const g=x=>-b*Math.exp(-x/r),v=x=>w+g(x),E=x=>{const C=g(x),R=v(x);f.done=Math.abs(C)<=u,f.value=f.done?w:R};let k,M;const S=x=>{y(f.value)&&(k=x,M=lC({keyframes:[f.value,T(f.value)],velocity:aC(v,x,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:d}))};return S(0),{calculatedDuration:null,next:x=>{let C=!1;return!M&&k===void 0&&(C=!0,E(x),S(x)),k!==void 0&&x>k?M.next(x-k):(!C&&E(x),f)}}}const j3=t=>{const e=({timestamp:n})=>t(n);return{start:()=>xe.update(e,!0),stop:()=>ir(e),now:()=>xt.isProcessing?xt.timestamp:performance.now()}},lx=2e4;function ux(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<lx;)e+=n,r=t.next(e);return e>=lx?1/0:e}const U3={decay:ax,inertia:ax,tween:Ed,keyframes:Ed,spring:lC};function Id({autoplay:t=!0,delay:e=0,driver:n=j3,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:d,onUpdate:h,...f}){let y=1,T=!1,b,I;const w=()=>{I=new Promise(Q=>{b=Q})};w();let g;const v=U3[i]||Ed;let E;v!==Ed&&typeof r[0]!="number"&&(E=zv([0,100],r,{clamp:!1}),r=[0,100]);const k=v({...f,keyframes:r});let M;a==="mirror"&&(M=v({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let S="idle",x=null,C=null,R=null;k.calculatedDuration===null&&s&&(k.calculatedDuration=ux(k));const{calculatedDuration:N}=k;let D=1/0,A=1/0;N!==null&&(D=N+o,A=D*(s+1)-o);let G=0;const Y=Q=>{if(C===null)return;y>0&&(C=Math.min(C,Q)),y<0&&(C=Math.min(Q-A/y,C)),x!==null?G=x:G=Math.round(Q-C)*y;const ie=G-e*(y>=0?1:-1),We=y>=0?ie<0:ie>A;G=Math.max(ie,0),S==="finished"&&x===null&&(G=A);let Qe=G,Bt=k;if(s){const On=Math.min(G,A)/D;let Ln=Math.floor(On),zt=On%1;!zt&&On>=1&&(zt=1),zt===1&&Ln--,Ln=Math.min(Ln,s+1),!!(Ln%2)&&(a==="reverse"?(zt=1-zt,o&&(zt-=o/D)):a==="mirror"&&(Bt=M)),Qe=Ii(0,1,zt)*D}const Xe=We?{done:!1,value:r[0]}:Bt.next(Qe);E&&(Xe.value=E(Xe.value));let{done:ot}=Xe;!We&&N!==null&&(ot=y>=0?G>=A:G<=0);const In=x===null&&(S==="finished"||S==="running"&&ot);return h&&h(Xe.value),In&&F(),Xe},Z=()=>{g&&g.stop(),g=void 0},re=()=>{S="idle",Z(),b(),w(),C=R=null},F=()=>{S="finished",d&&d(),Z(),b()},z=()=>{if(T)return;g||(g=n(Y));const Q=g.now();l&&l(),x!==null?C=Q-x:(!C||S==="finished")&&(C=Q),S==="finished"&&w(),R=C,x=null,S="running",g.start()};t&&z();const $={then(Q,ie){return I.then(Q,ie)},get time(){return _r(G)},set time(Q){Q=as(Q),G=Q,x!==null||!g||y===0?x=Q:C=g.now()-Q/y},get duration(){const Q=k.calculatedDuration===null?ux(k):k.calculatedDuration;return _r(Q)},get speed(){return y},set speed(Q){Q===y||!g||(y=Q,$.time=_r(G))},get state(){return S},play:z,pause:()=>{S="paused",x=G},stop:()=>{T=!0,S!=="idle"&&(S="idle",u&&u(),re())},cancel:()=>{R!==null&&Y(R),re()},complete:()=>{S="finished"},sample:Q=>(C=0,Y(Q))};return $}function F3(t){let e;return()=>(e===void 0&&(e=t()),e)}const B3=F3(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),z3=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Zu=10,$3=2e4,W3=(t,e)=>e.type==="spring"||t==="backgroundColor"||!FP(e.ease);function q3(t,e,{onUpdate:n,onComplete:r,...i}){if(!(B3()&&z3.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,u=!1;const d=()=>{l=new Promise(v=>{a=v})};d();let{keyframes:h,duration:f=300,ease:y,times:T}=i;if(W3(e,i)){const v=Id({...i,repeat:0,delay:0});let E={done:!1,value:h[0]};const k=[];let M=0;for(;!E.done&&M<$3;)E=v.sample(M),k.push(E.value),M+=Zu;T=void 0,h=k,f=M-Zu,y="linear"}const b=e3(t.owner.current,e,h,{...i,duration:f,ease:y,times:T}),I=()=>{u=!1,b.cancel()},w=()=>{u=!0,xe.update(I),a(),d()};return b.onfinish=()=>{u||(t.set(t3(h,i)),r&&r(),w())},{then(v,E){return l.then(v,E)},attachTimeline(v){return b.timeline=v,b.onfinish=null,ze},get time(){return _r(b.currentTime||0)},set time(v){b.currentTime=as(v)},get speed(){return b.playbackRate},set speed(v){b.playbackRate=v},get duration(){return _r(f)},play:()=>{o||(b.play(),ir(I))},pause:()=>b.pause(),stop:()=>{if(o=!0,b.playState==="idle")return;const{currentTime:v}=b;if(v){const E=Id({...i,autoplay:!1});t.setWithVelocity(E.sample(v-Zu).value,E.sample(v).value,Zu)}w()},complete:()=>{u||b.finish()},cancel:w}}function H3({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:ze,pause:ze,stop:ze,then:s=>(s(),Promise.resolve()),cancel:ze,complete:ze});return e?Id({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const G3={type:"spring",stiffness:500,damping:25,restSpeed:10},K3=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Y3={type:"keyframes",duration:.8},Q3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},X3=(t,{keyframes:e})=>e.length>2?Y3:Ps.has(t)?t.startsWith("scale")?K3(e[1]):G3:Q3,Cm=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Si.test(e)||e==="0")&&!e.startsWith("url(")),J3=new Set(["brightness","contrast","saturate","opacity"]);function Z3(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Th)||[];if(!r)return t;const i=n.replace(r,"");let s=J3.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const e6=/([a-z-]*)\(.*?\)/g,Am={...Si,getAnimatableNone:t=>{const e=t.match(e6);return e?e.map(Z3).join(" "):t}},t6={...IP,color:Nt,backgroundColor:Nt,outlineColor:Nt,fill:Nt,stroke:Nt,borderColor:Nt,borderTopColor:Nt,borderRightColor:Nt,borderBottomColor:Nt,borderLeftColor:Nt,filter:Am,WebkitFilter:Am},$v=t=>t6[t];function uC(t,e){let n=$v(t);return n!==Am&&(n=Si),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const cC=t=>/^0[^.\s]+$/.test(t);function n6(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||cC(t)}function r6(t,e,n,r){const i=Cm(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const l=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),n6(s[u])&&l.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(i&&l.length&&a)for(let u=0;u<l.length;u++){const d=l[u];s[d]=uC(e,a)}return s}function i6({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...d}){return!!Object.keys(d).length}function Wv(t,e){return t[e]||t.default||t}const s6={skipAnimations:!1},qv=(t,e,n,r={})=>i=>{const s=Wv(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-as(o);const l=r6(e,t,n,s),u=l[0],d=l[l.length-1],h=Cm(t,u),f=Cm(t,d);let y={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:T=>{e.set(T),s.onUpdate&&s.onUpdate(T)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(i6(s)||(y={...y,...X3(t,y)}),y.duration&&(y.duration=as(y.duration)),y.repeatDelay&&(y.repeatDelay=as(y.repeatDelay)),!h||!f||ZF.current||s.type===!1||s6.skipAnimations)return H3(y);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const T=q3(e,t,y);if(T)return T}return Id(y)};function Sd(t){return!!(Xt(t)&&t.add)}const dC=t=>/^\-?\d*\.?\d+$/.test(t);function Hv(t,e){t.indexOf(e)===-1&&t.push(e)}function Gv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Kv{constructor(){this.subscriptions=[]}add(e){return Hv(this.subscriptions,e),()=>Gv(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const o6=t=>!isNaN(parseFloat(t)),tl={current:void 0};class a6{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=xt;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,xe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>xe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=o6(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Kv);const r=this.events[e].add(n);return e==="change"?()=>{r(),xe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return tl.current&&tl.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?oC(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ws(t,e){return new a6(t,e)}const hC=t=>e=>e.test(t),l6={test:t=>t==="auto",parse:t=>t},fC=[Cs,ee,er,Br,mF,pF,l6],xa=t=>fC.find(hC(t)),u6=[...fC,Nt,Si],c6=t=>u6.find(hC(t));function d6(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ws(n))}function h6(t,e){const n=Eh(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=AF(s[o]);d6(t,o,a)}}function f6(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],u=e[l];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(i=(r=n[l])!==null&&r!==void 0?r:t.readValue(l))!==null&&i!==void 0?i:e[l]),d!=null&&(typeof d=="string"&&(dC(d)||cC(d))?d=parseFloat(d):!c6(d)&&Si.test(u)&&(d=uC(l,u)),t.addValue(l,ws(d,{owner:t})),n[l]===void 0&&(n[l]=d),d!==null&&t.setBaseTarget(l,d))}}function p6(t,e){return e?(e[t]||e.default||e).from:void 0}function m6(t,e,n){const r={};for(const i in t){const s=p6(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function g6({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function y6(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function pC(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const l=t.getValue("willChange");r&&(s=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const f=t.getValue(h),y=a[h];if(!f||y===void 0||d&&g6(d,h))continue;const T={delay:n,elapsed:0,...Wv(s||{},h)};if(window.HandoffAppearAnimations){const w=t.getProps()[gP];if(w){const g=window.HandoffAppearAnimations(w,h,f,xe);g!==null&&(T.elapsed=g,T.isHandoff=!0)}}let b=!T.isHandoff&&!y6(f,y);if(T.type==="spring"&&(f.getVelocity()||T.velocity)&&(b=!1),f.animation&&(b=!1),b)continue;f.start(qv(h,f,y,t.shouldReduceMotion&&Ps.has(h)?{type:!1}:T));const I=f.animation;Sd(l)&&(l.add(h),I.then(()=>l.remove(h))),u.push(I)}return o&&Promise.all(u).then(()=>{o&&h6(t,o)}),u}function km(t,e,n={}){const r=Eh(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(pC(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return v6(t,e,u+l,d,h,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function v6(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(_6).forEach((u,d)=>{u.notify("AnimationStart",e),o.push(km(u,e,{...s,delay:n+l(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function _6(t,e){return t.sortNodePosition(e)}function w6(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>km(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=km(t,e,n);else{const i=typeof e=="function"?Eh(t,e,n.custom):e;r=Promise.all(pC(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const T6=[...Cv].reverse(),x6=Cv.length;function E6(t){return e=>Promise.all(e.map(({animation:n,options:r})=>w6(t,n,r)))}function I6(t){let e=E6(t);const n=b6();let r=!0;const i=(l,u)=>{const d=Eh(t,u);if(d){const{transition:h,transitionEnd:f,...y}=d;l={...l,...y,...f}}return l};function s(l){e=l(t)}function o(l,u){const d=t.getProps(),h=t.getVariantContext(!0)||{},f=[],y=new Set;let T={},b=1/0;for(let w=0;w<x6;w++){const g=T6[w],v=n[g],E=d[g]!==void 0?d[g]:h[g],k=Ol(E),M=g===u?v.isActive:null;M===!1&&(b=w);let S=E===h[g]&&E!==d[g]&&k;if(S&&r&&t.manuallyAnimateOnMount&&(S=!1),v.protectedKeys={...T},!v.isActive&&M===null||!E&&!v.prevProp||_h(E)||typeof E=="boolean")continue;let C=S6(v.prevProp,E)||g===u&&v.isActive&&!S&&k||w>b&&k,R=!1;const N=Array.isArray(E)?E:[E];let D=N.reduce(i,{});M===!1&&(D={});const{prevResolvedValues:A={}}=v,G={...A,...D},Y=Z=>{C=!0,y.has(Z)&&(R=!0,y.delete(Z)),v.needsAnimating[Z]=!0};for(const Z in G){const re=D[Z],F=A[Z];if(T.hasOwnProperty(Z))continue;let z=!1;Td(re)&&Td(F)?z=!jP(re,F):z=re!==F,z?re!==void 0?Y(Z):y.add(Z):re!==void 0&&y.has(Z)?Y(Z):v.protectedKeys[Z]=!0}v.prevProp=E,v.prevResolvedValues=D,v.isActive&&(T={...T,...D}),r&&t.blockInitialAnimation&&(C=!1),C&&(!S||R)&&f.push(...N.map(Z=>({animation:Z,options:{type:g,...l}})))}if(y.size){const w={};y.forEach(g=>{const v=t.getBaseTarget(g);v!==void 0&&(w[g]=v)}),f.push({animation:w})}let I=!!f.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(f):Promise.resolve()}function a(l,u,d){var h;if(n[l].isActive===u)return Promise.resolve();(h=t.variantChildren)===null||h===void 0||h.forEach(y=>{var T;return(T=y.animationState)===null||T===void 0?void 0:T.setActive(l,u)}),n[l].isActive=u;const f=o(d,l);for(const y in n)n[y].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function S6(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!jP(e,t):!1}function $i(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function b6(){return{animate:$i(!0),whileInView:$i(),whileHover:$i(),whileTap:$i(),whileDrag:$i(),whileFocus:$i(),exit:$i()}}class P6 extends Vi{constructor(e){super(e),e.animationState||(e.animationState=I6(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),_h(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let C6=0;class A6 extends Vi{constructor(){super(...arguments),this.id=C6++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const k6={animation:{Feature:P6},exit:{Feature:A6}},cx=(t,e)=>Math.abs(t-e);function R6(t,e){const n=cx(t.x,e.x),r=cx(t.y,e.y);return Math.sqrt(n**2+r**2)}class mC{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=zf(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,y=R6(h.offset,{x:0,y:0})>=3;if(!f&&!y)return;const{point:T}=h,{timestamp:b}=xt;this.history.push({...T,timestamp:b});const{onStart:I,onMove:w}=this.handlers;f||(I&&I(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Bf(f,this.transformPagePoint),xe.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:y,onSessionEnd:T,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=zf(h.type==="pointercancel"?this.lastMoveEventInfo:Bf(f,this.transformPagePoint),this.history);this.startEvent&&y&&y(h,I),T&&T(h,I)},!DP(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=xh(e),a=Bf(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=xt;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,zf(a,this.history)),this.removeListeners=pi(vr(this.contextWindow,"pointermove",this.handlePointerMove),vr(this.contextWindow,"pointerup",this.handlePointerUp),vr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ir(this.updatePoint)}}function Bf(t,e){return e?{point:e(t.point)}:t}function dx(t,e){return{x:t.x-e.x,y:t.y-e.y}}function zf({point:t},e){return{point:t,delta:dx(t,gC(e)),offset:dx(t,N6(e)),velocity:D6(e,.1)}}function N6(t){return t[0]}function gC(t){return t[t.length-1]}function D6(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=gC(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>as(e)));)n--;if(!r)return{x:0,y:0};const s=_r(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ln(t){return t.max-t.min}function Rm(t,e=0,n=.01){return Math.abs(t-e)<=n}function hx(t,e,n,r=.5){t.origin=r,t.originPoint=Re(e.min,e.max,t.origin),t.scale=ln(n)/ln(e),(Rm(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Re(n.min,n.max,t.origin)-t.originPoint,(Rm(t.translate)||isNaN(t.translate))&&(t.translate=0)}function nl(t,e,n,r){hx(t.x,e.x,n.x,r?r.originX:void 0),hx(t.y,e.y,n.y,r?r.originY:void 0)}function fx(t,e,n){t.min=n.min+e.min,t.max=t.min+ln(e)}function M6(t,e,n){fx(t.x,e.x,n.x),fx(t.y,e.y,n.y)}function px(t,e,n){t.min=e.min-n.min,t.max=t.min+ln(e)}function rl(t,e,n){px(t.x,e.x,n.x),px(t.y,e.y,n.y)}function V6(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Re(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Re(n,t,r.max):Math.min(t,n)),t}function mx(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function O6(t,{top:e,left:n,bottom:r,right:i}){return{x:mx(t.x,n,i),y:mx(t.y,e,r)}}function gx(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function L6(t,e){return{x:gx(t.x,e.x),y:gx(t.y,e.y)}}function j6(t,e){let n=.5;const r=ln(t),i=ln(e);return i>r?n=jl(e.min,e.max-r,t.min):r>i&&(n=jl(t.min,t.max-i,e.min)),Ii(0,1,n)}function U6(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Nm=.35;function F6(t=Nm){return t===!1?t=0:t===!0&&(t=Nm),{x:yx(t,"left","right"),y:yx(t,"top","bottom")}}function yx(t,e,n){return{min:vx(t,e),max:vx(t,n)}}function vx(t,e){return typeof t=="number"?t:t[e]||0}const _x=()=>({translate:0,scale:1,origin:0,originPoint:0}),io=()=>({x:_x(),y:_x()}),wx=()=>({min:0,max:0}),He=()=>({x:wx(),y:wx()});function mn(t){return[t("x"),t("y")]}function yC({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function B6({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function z6(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function $f(t){return t===void 0||t===1}function Dm({scale:t,scaleX:e,scaleY:n}){return!$f(t)||!$f(e)||!$f(n)}function Ki(t){return Dm(t)||vC(t)||t.z||t.rotate||t.rotateX||t.rotateY}function vC(t){return Tx(t.x)||Tx(t.y)}function Tx(t){return t&&t!=="0%"}function bd(t,e,n){const r=t-n,i=e*r;return n+i}function xx(t,e,n,r,i){return i!==void 0&&(t=bd(t,i,r)),bd(t,n,r)+e}function Mm(t,e=0,n=1,r,i){t.min=xx(t.min,e,n,r,i),t.max=xx(t.max,e,n,r,i)}function _C(t,{x:e,y:n}){Mm(t.x,e.translate,e.scale,e.originPoint),Mm(t.y,n.translate,n.scale,n.originPoint)}function $6(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&so(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,_C(t,o)),r&&Ki(s.latestValues)&&so(t,s.latestValues))}e.x=Ex(e.x),e.y=Ex(e.y)}function Ex(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Wr(t,e){t.min=t.min+e,t.max=t.max+e}function Ix(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=Re(t.min,t.max,s);Mm(t,e[n],e[r],o,e.scale)}const W6=["x","scaleX","originX"],q6=["y","scaleY","originY"];function so(t,e){Ix(t.x,e,W6),Ix(t.y,e,q6)}function wC(t,e){return yC(z6(t.getBoundingClientRect(),e))}function H6(t,e,n){const r=wC(t,n),{scroll:i}=e;return i&&(Wr(r.x,i.offset.x),Wr(r.y,i.offset.y)),r}const TC=({current:t})=>t?t.ownerDocument.defaultView:null,G6=new WeakMap;class K6{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=He(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(xh(d,"page").point)},s=(d,h)=>{const{drag:f,dragPropagation:y,onDragStart:T}=this.getProps();if(f&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=VP(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),mn(I=>{let w=this.getAxisMotionValue(I).get()||0;if(er.test(w)){const{projection:g}=this.visualElement;if(g&&g.layout){const v=g.layout.layoutBox[I];v&&(w=ln(v)*(parseFloat(w)/100))}}this.originPoint[I]=w}),T&&xe.update(()=>T(d,h),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:y,onDirectionLock:T,onDrag:b}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:I}=h;if(y&&this.currentDirection===null){this.currentDirection=Y6(I),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",h.point,I),this.updateAxis("y",h.point,I),this.visualElement.render(),b&&b(d,h)},a=(d,h)=>this.stop(d,h),l=()=>mn(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new mC(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:TC(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&xe.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!ec(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=V6(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&no(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=O6(i.layoutBox,n):this.constraints=!1,this.elastic=F6(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&mn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=U6(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!no(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=H6(r,i.root,this.visualElement.getTransformPagePoint());let o=L6(i.layout.layoutBox,s);if(n){const a=n(B6(o));this.hasMutatedConstraints=!!a,a&&(o=yC(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=mn(d=>{if(!ec(d,n,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const f=i?200:1e6,y=i?40:1e7,T={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(d,T)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(qv(e,r,0,n))}stopAnimation(){mn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){mn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){mn(n=>{const{drag:r}=this.getProps();if(!ec(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Re(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!no(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};mn(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=j6({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),mn(o=>{if(!ec(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Re(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;G6.set(this.visualElement,this);const e=this.visualElement.current,n=vr(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();no(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=fr(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(mn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Nm,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function ec(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Y6(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Q6 extends Vi{constructor(e){super(e),this.removeGroupControls=ze,this.removeListeners=ze,this.controls=new K6(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ze}unmount(){this.removeGroupControls(),this.removeListeners()}}const Sx=t=>(e,n)=>{t&&xe.update(()=>t(e,n))};class X6 extends Vi{constructor(){super(...arguments),this.removePointerDownListener=ze}onPointerDown(e){this.session=new mC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:TC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Sx(e),onStart:Sx(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&xe.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=vr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function J6(){const t=V.useContext(bv);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=V.useId();return V.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const Sc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function bx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ea={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ee.test(t))t=parseFloat(t);else return t;const n=bx(t,e.target.x),r=bx(t,e.target.y);return`${n}% ${r}%`}},Z6={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Si.parse(t);if(i.length>5)return r;const s=Si.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=Re(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class e5 extends Ad.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;aF(t5),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Sc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||xe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function xC(t){const[e,n]=J6(),r=V.useContext(vP);return Ad.createElement(e5,{...t,layoutGroup:r,switchLayoutGroup:V.useContext(_P),isPresent:e,safeToRemove:n})}const t5={borderRadius:{...Ea,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ea,borderTopRightRadius:Ea,borderBottomLeftRadius:Ea,borderBottomRightRadius:Ea,boxShadow:Z6},EC=["TopLeft","TopRight","BottomLeft","BottomRight"],n5=EC.length,Px=t=>typeof t=="string"?parseFloat(t):t,Cx=t=>typeof t=="number"||ee.test(t);function r5(t,e,n,r,i,s){i?(t.opacity=Re(0,n.opacity!==void 0?n.opacity:1,i5(r)),t.opacityExit=Re(e.opacity!==void 0?e.opacity:1,0,s5(r))):s&&(t.opacity=Re(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<n5;o++){const a=`border${EC[o]}Radius`;let l=Ax(e,a),u=Ax(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Cx(l)===Cx(u)?(t[a]=Math.max(Re(Px(l),Px(u),r),0),(er.test(u)||er.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Re(e.rotate||0,n.rotate||0,r))}function Ax(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const i5=IC(0,.5,GP),s5=IC(.5,.95,ze);function IC(t,e,n){return r=>r<t?0:r>e?1:n(jl(t,e,r))}function kx(t,e){t.min=e.min,t.max=e.max}function fn(t,e){kx(t.x,e.x),kx(t.y,e.y)}function Rx(t,e,n,r,i){return t-=e,t=bd(t,1/n,r),i!==void 0&&(t=bd(t,1/i,r)),t}function o5(t,e=0,n=1,r=.5,i,s=t,o=t){if(er.test(e)&&(e=parseFloat(e),e=Re(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Re(s.min,s.max,r);t===s&&(a-=e),t.min=Rx(t.min,e,n,a,i),t.max=Rx(t.max,e,n,a,i)}function Nx(t,e,[n,r,i],s,o){o5(t,e[n],e[r],e[i],e.scale,s,o)}const a5=["x","scaleX","originX"],l5=["y","scaleY","originY"];function Dx(t,e,n,r){Nx(t.x,e,a5,n?n.x:void 0,r?r.x:void 0),Nx(t.y,e,l5,n?n.y:void 0,r?r.y:void 0)}function Mx(t){return t.translate===0&&t.scale===1}function SC(t){return Mx(t.x)&&Mx(t.y)}function u5(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function bC(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Vx(t){return ln(t.x)/ln(t.y)}class c5{constructor(){this.members=[]}add(e){Hv(this.members,e),e.scheduleRender()}remove(e){if(Gv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ox(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:l,rotateX:u,rotateY:d}=n;l&&(r+=`rotate(${l}deg) `),u&&(r+=`rotateX(${u}deg) `),d&&(r+=`rotateY(${d}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const d5=(t,e)=>t.depth-e.depth;class h5{constructor(){this.children=[],this.isDirty=!1}add(e){Hv(this.children,e),this.isDirty=!0}remove(e){Gv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(d5),this.isDirty=!1,this.children.forEach(e)}}function f5(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ir(r),t(s-e))};return xe.read(r,!0),()=>ir(r)}function p5(t){window.MotionDebug&&window.MotionDebug.record(t)}function m5(t){return t instanceof SVGElement&&t.tagName!=="svg"}function g5(t,e,n){const r=Xt(t)?t:ws(t);return r.start(qv("",r,e,n)),r.animation}const Lx=["","X","Y","Z"],y5={visibility:"hidden"},jx=1e3;let v5=0;const Yi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function PC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=v5++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Yi.totalNodes=Yi.resolvedTargetDeltas=Yi.recalculatedProjection=0,this.nodes.forEach(T5),this.nodes.forEach(b5),this.nodes.forEach(P5),this.nodes.forEach(x5),p5(Yi)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new h5)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Kv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=m5(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=f5(f,250),Sc.hasAnimatedSinceResize&&(Sc.hasAnimatedSinceResize=!1,this.nodes.forEach(Fx))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:y,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||d.getDefaultTransition()||N5,{onLayoutAnimationStart:I,onLayoutAnimationComplete:w}=d.getProps(),g=!this.targetLayout||!bC(this.targetLayout,T)||y,v=!f&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,v);const E={...Wv(b,"layout"),onPlay:I,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else f||Fx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ir(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(C5),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ux);return}this.isUpdating||this.nodes.forEach(I5),this.isUpdating=!1,this.nodes.forEach(S5),this.nodes.forEach(_5),this.nodes.forEach(w5),this.clearAllSnapshots();const a=performance.now();xt.delta=Ii(0,1e3/60,a-xt.timestamp),xt.timestamp=a,xt.isProcessing=!0,Df.update.process(xt),Df.preRender.process(xt),Df.render.process(xt),xt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(E5),this.sharedNodes.forEach(A5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=He(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!SC(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(a||Ki(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),D5(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return He();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Wr(a.x,l.offset.x),Wr(a.y,l.offset.y)),a}removeElementScroll(o){const a=He();fn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){fn(a,o);const{scroll:f}=this.root;f&&(Wr(a.x,-f.offset.x),Wr(a.y,-f.offset.y))}Wr(a.x,d.offset.x),Wr(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const l=He();fn(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&so(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ki(d.latestValues)&&so(l,d.latestValues)}return Ki(this.latestValues)&&so(l,this.latestValues),l}removeTransform(o){const a=He();fn(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ki(u.latestValues))continue;Dm(u.latestValues)&&u.updateSnapshot();const d=He(),h=u.measurePageBox();fn(d,h),Dx(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Ki(this.latestValues)&&Dx(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=xt.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=He(),this.relativeTargetOrigin=He(),rl(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=He(),this.targetWithTransforms=He()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),M6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fn(this.target,this.layout.layoutBox),_C(this.target,this.targetDelta)):fn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=He(),this.relativeTargetOrigin=He(),rl(this.relativeTargetOrigin,this.target,y.target),fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Yi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Dm(this.parent.latestValues)||vC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===xt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;fn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,y=this.treeScale.y;$6(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:T}=a;if(!T){this.projectionTransform&&(this.projectionDelta=io(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=io(),this.projectionDeltaWithTransform=io());const b=this.projectionTransform;nl(this.projectionDelta,this.layoutCorrected,T,this.latestValues),this.projectionTransform=Ox(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==f||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T)),Yi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=io();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=He(),y=l?l.source:void 0,T=this.layout?this.layout.source:void 0,b=y!==T,I=this.getStack(),w=!I||I.members.length<=1,g=!!(b&&!w&&this.options.crossfade===!0&&!this.path.some(R5));this.animationProgress=0;let v;this.mixTargetDelta=E=>{const k=E/1e3;Bx(h.x,o.x,k),Bx(h.y,o.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rl(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),k5(this.relativeTarget,this.relativeTargetOrigin,f,k),v&&u5(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=He()),fn(v,this.relativeTarget)),b&&(this.animationValues=d,r5(d,u,this.latestValues,k,g,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ir(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xe.update(()=>{Sc.hasAnimatedSinceResize=!0,this.currentAnimation=g5(0,jx,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(jx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:d}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&CC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||He();const h=ln(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=ln(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}fn(a,l),so(a,d),nl(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new c5),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let d=0;d<Lx.length;d++){const h="rotate"+Lx[d];l[h]&&(u[h]=l[h],o.setStaticValue(h,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return y5;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Ic(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Ic(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ki(this.latestValues)&&(b.transform=d?d({},""):"none",this.hasProjected=!1),b}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=Ox(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:y,y:T}=this.projectionDelta;u.transformOrigin=`${y.origin*100}% ${T.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in _d){if(f[b]===void 0)continue;const{correct:I,applyTo:w}=_d[b],g=u.transform==="none"?f[b]:I(f[b],h);if(w){const v=w.length;for(let E=0;E<v;E++)u[w[E]]=g}else u[b]=g}return this.options.layoutId&&(u.pointerEvents=h===this?Ic(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Ux),this.root.sharedNodes.clear()}}}function _5(t){t.updateLayout()}function w5(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?mn(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],y=ln(f);f.min=r[h].min,f.max=f.min+y}):CC(s,n.layoutBox,r)&&mn(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],y=ln(r[h]);f.max=f.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+y)});const a=io();nl(a,r,n.layoutBox);const l=io();o?nl(l,t.applyTransform(i,!0),n.measuredBox):nl(l,r,n.layoutBox);const u=!SC(a);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:y}=h;if(f&&y){const T=He();rl(T,n.layoutBox,f.layoutBox);const b=He();rl(b,r,y.layoutBox),bC(T,b)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=T,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function T5(t){Yi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function x5(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function E5(t){t.clearSnapshot()}function Ux(t){t.clearMeasurements()}function I5(t){t.isLayoutDirty=!1}function S5(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Fx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function b5(t){t.resolveTargetDelta()}function P5(t){t.calcProjection()}function C5(t){t.resetRotation()}function A5(t){t.removeLeadSnapshot()}function Bx(t,e,n){t.translate=Re(e.translate,0,n),t.scale=Re(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function zx(t,e,n,r){t.min=Re(e.min,n.min,r),t.max=Re(e.max,n.max,r)}function k5(t,e,n,r){zx(t.x,e.x,n.x,r),zx(t.y,e.y,n.y,r)}function R5(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const N5={duration:.45,ease:[.4,0,.1,1]},$x=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Wx=$x("applewebkit/")&&!$x("chrome/")?Math.round:ze;function qx(t){t.min=Wx(t.min),t.max=Wx(t.max)}function D5(t){qx(t.x),qx(t.y)}function CC(t,e,n){return t==="position"||t==="preserve-aspect"&&!Rm(Vx(e),Vx(n),.2)}const M5=PC({attachResizeListener:(t,e)=>fr(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Wf={current:void 0},AC=PC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Wf.current){const t=new M5({});t.mount(window),t.setOptions({layoutScroll:!0}),Wf.current=t}return Wf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),V5={pan:{Feature:X6},drag:{Feature:Q6,ProjectionNode:AC,MeasureLayout:xC}},O5=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function L5(t){const e=O5.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Vm(t,e,n=1){const[r,i]=L5(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return dC(o)?parseFloat(o):o}else return Im(i)?Vm(i,e,n+1):i}function j5(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!Im(s))return;const o=Vm(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!Im(s))continue;const o=Vm(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const U5=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),kC=t=>U5.has(t),F5=t=>Object.keys(t).some(kC),Hx=t=>t===Cs||t===ee,Gx=(t,e)=>parseFloat(t.split(", ")[e]),Kx=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return Gx(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?Gx(s[1],t):0}},B5=new Set(["x","y","z"]),z5=uu.filter(t=>!B5.has(t));function $5(t){const e=[];return z5.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Vo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Kx(4,13),y:Kx(5,14)};Vo.translateX=Vo.x;Vo.translateY=Vo.y;const W5=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=Vo[u](r,s)}),e.render();const l=e.measureViewportBox();return n.forEach(u=>{const d=e.getValue(u);d&&d.jump(a[u]),t[u]=Vo[u](l,s)}),t},q5=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(kC);let s=[],o=!1;const a=[];if(i.forEach(l=>{const u=t.getValue(l);if(!t.hasValue(l))return;let d=n[l],h=xa(d);const f=e[l];let y;if(Td(f)){const T=f.length,b=f[0]===null?1:0;d=f[b],h=xa(d);for(let I=b;I<T&&f[I]!==null;I++)y?jv(xa(f[I])===y):y=xa(f[I])}else y=xa(f);if(h!==y)if(Hx(h)&&Hx(y)){const T=u.get();typeof T=="string"&&u.set(parseFloat(T)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&y===ee&&(e[l]=f.map(parseFloat))}else h!=null&&h.transform&&(y!=null&&y.transform)&&(d===0||f===0)?d===0?u.set(y.transform(d)):e[l]=h.transform(f):(o||(s=$5(t),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],u.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=W5(e,t,a);return s.length&&s.forEach(([d,h])=>{t.getValue(d).set(h)}),t.render(),vh&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function H5(t,e,n,r){return F5(e)?q5(t,e,n,r):{target:e,transitionEnd:r}}const G5=(t,e,n,r)=>{const i=j5(t,e,r);return e=i.target,r=i.transitionEnd,H5(t,e,n,r)},Om={current:null},RC={current:!1};function K5(){if(RC.current=!0,!!vh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Om.current=t.matches;t.addListener(e),e()}else Om.current=!1}function Y5(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(Xt(s))t.addValue(i,s),Sd(r)&&r.add(i);else if(Xt(o))t.addValue(i,ws(s,{owner:t})),Sd(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,ws(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const Yx=new WeakMap,NC=Object.keys(Ll),Q5=NC.length,Qx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],X5=Av.length;class J5{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>xe.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=wh(n),this.isVariantNode=yP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{});for(const h in d){const f=d[h];a[h]!==void 0&&Xt(f)&&(f.set(a[h],!1),Sd(u)&&u.add(h))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Yx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),RC.current||K5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Om.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Yx.delete(this.current),this.projection&&this.projection.unmount(),ir(this.notifyUpdate),ir(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Ps.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&xe.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let l=0;l<Q5;l++){const u=NC[l],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:y}=Ll[u];f&&(o=f),d(n)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),y&&(a=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:y}=n;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!d||h&&no(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:f,layoutRoot:y})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):He()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Qx.length;r++){const i=Qx[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=Y5(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<X5;r++){const i=Av[r],s=this.props[i];(Ol(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ws(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=Ov(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Xt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Kv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class DC extends J5{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=m6(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){f6(this,r,o);const a=G5(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function Z5(t){return window.getComputedStyle(t)}class e9 extends DC{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Ps.has(n)){const r=$v(n);return r&&r.default||0}else{const r=Z5(e),i=(xP(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return wC(e,n)}build(e,n,r,i){Rv(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Vv(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Xt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){CP(e,n,r,i)}}class t9 extends DC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ps.has(n)){const r=$v(n);return r&&r.default||0}return n=AP.has(n)?n:Pv(n),e.getAttribute(n)}measureInstanceViewportBox(){return He()}scrapeMotionValuesFromProps(e,n){return RP(e,n)}build(e,n,r,i){Dv(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){kP(e,n,r,i)}mount(e){this.isSVGTag=Mv(e.tagName),super.mount(e)}}const n9=(t,e)=>kv(t)?new t9(e,{enableHardwareAcceleration:!1}):new e9(e,{enableHardwareAcceleration:!0}),r9={layout:{ProjectionNode:AC,MeasureLayout:xC}},i9={...k6,...QF,...V5,...r9},il=sF((t,e)=>LF(t,e,i9,n9));function MC(t){const e=Lv(()=>ws(t)),{isStatic:n}=V.useContext(Sv);if(n){const[,r]=V.useState(t);V.useEffect(()=>e.on("change",r),[])}return e}const s9=t=>t&&typeof t=="object"&&t.mix,o9=t=>s9(t)?t.mix:void 0;function a9(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],s=t[2+n],o=t[3+n],a=zv(i,s,{mixer:o9(s[0]),...o});return e?a(r):a}function VC(t,e){const n=MC(e()),r=()=>n.set(e());return r(),pP(()=>{const i=()=>xe.update(r,!1,!0),s=t.map(o=>o.on("change",i));return()=>{s.forEach(o=>o()),ir(r)}}),n}function l9(t){tl.current=[],t();const e=VC(tl.current,t);return tl.current=void 0,e}function tc(t,e,n,r){if(typeof t=="function")return l9(t);const i=typeof e=="function"?e:a9(e,n,r);return Array.isArray(t)?Xx(t,i):Xx([t],([s])=>i(s))}function Xx(t,e){const n=Lv(()=>[]);return VC(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function u9({match:t,onClose:e}){const n=kr(),r=t.photos[0]||"https://via.placeholder.com/200",i=()=>{n(`/chat/${t.id}`),e()};return m.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:m.jsxs(il.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl p-8 max-w-md w-full text-center relative",children:[m.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:m.jsx(Mo,{className:"w-6 h-6"})}),m.jsx(il.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"inline-flex items-center justify-center w-20 h-20 bg-primary rounded-full mb-6",children:m.jsx(lu,{className:"w-10 h-10 text-white",fill:"currentColor"})}),m.jsx("h2",{className:"text-3xl font-bold text-dark mb-2",children:"It's a Match!"}),m.jsxs("p",{className:"text-gray-600 mb-6",children:["You and ",t.name," liked each other"]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("img",{src:r,alt:t.name,className:"w-32 h-32 rounded-full object-cover mx-auto border-4 border-primary"}),m.jsxs("p",{className:"mt-3 font-semibold text-lg",children:[t.name,", ",t.age]})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("button",{onClick:e,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition",children:"Keep Swiping"}),m.jsxs("button",{onClick:i,className:"flex-1 px-6 py-3 bg-primary text-white rounded-lg font-semibold hover:bg-primary/90 transition flex items-center justify-center gap-2",children:[m.jsx(xv,{className:"w-5 h-5"}),"Send Message"]})]})]})})}function c9({user:t,onClose:e}){const[n,r]=V.useState(0),i=t.photos.length>0?t.photos:["https://via.placeholder.com/400x600?text=No+Photo"],s=()=>{r(a=>(a+1)%i.length)},o=()=>{r(a=>(a-1+i.length)%i.length)};return m.jsxs("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:e,children:[m.jsx("button",{type:"button",onClick:a=>{a.stopPropagation(),e()},className:"fixed z-[60] w-12 h-12 bg-white rounded-full flex items-center justify-center hover:bg-gray-100 active:bg-gray-200 transition shadow-lg",style:{top:"calc(env(safe-area-inset-top, 0px) + 16px)",right:"calc(env(safe-area-inset-right, 0px) + 16px)",touchAction:"manipulation",WebkitTapHighlightColor:"transparent"},children:m.jsx(Mo,{className:"w-6 h-6 text-gray-800"})}),m.jsxs("div",{className:"relative bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",onClick:a=>a.stopPropagation(),children:[m.jsxs("div",{className:"relative aspect-[3/4] bg-gray-900",children:[m.jsx("img",{src:i[n],alt:t.name,className:"w-full h-full object-cover"}),i.length>1&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:o,className:"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/80 rounded-full flex items-center justify-center hover:bg-white transition",children:m.jsx(PU,{className:"w-6 h-6 text-gray-800"})}),m.jsx("button",{onClick:s,className:"absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/80 rounded-full flex items-center justify-center hover:bg-white transition",children:m.jsx(CU,{className:"w-6 h-6 text-gray-800"})}),m.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-1.5",children:i.map((a,l)=>m.jsx("button",{onClick:()=>r(l),className:`w-2 h-2 rounded-full transition ${l===n?"bg-white w-6":"bg-white/50"}`},l))})]})]}),m.jsxs("div",{className:"p-6 space-y-4 max-h-64 overflow-y-auto",children:[m.jsx("div",{children:m.jsxs("h2",{className:"text-3xl font-bold text-dark",children:[t.name,", ",t.age]})}),t.location&&m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(Do,{className:"w-5 h-5 mr-2 text-primary"}),m.jsx("span",{children:t.location})]}),t.bio&&m.jsxs("div",{className:"flex items-start text-gray-700",children:[m.jsx(Tv,{className:"w-5 h-5 mr-2 mt-0.5 text-primary flex-shrink-0"}),m.jsx("p",{className:"text-sm leading-relaxed",children:t.bio})]}),t.gender&&m.jsxs("div",{className:"text-sm text-gray-600",children:[m.jsx("span",{className:"font-semibold",children:"Gender:"})," ",m.jsx("span",{className:"capitalize",children:t.gender})]})]})]})]})}function d9(){const[t,e]=V.useState([]),[n,r]=V.useState(0),[i,s]=V.useState(!0),[o,a]=V.useState(null),[l,u]=V.useState(!1),[d,h]=V.useState(!1);V.useEffect(()=>{f()},[]);const f=async()=>{try{s(!0);const b=await ve.getDiscoverUsers();e(b),r(0)}catch(b){X.error("Failed to load discover users",b)}finally{s(!1)}},y=t[n],T=async b=>{if(y)try{const I=await ve.swipe(y.id,b);I.match&&(a(I.match),u(!0)),r(w=>w+1),n>=t.length-3&&f()}catch(I){X.error("Swipe error",I,{swipedId:y.id,direction:b})}};return i&&t.length===0?m.jsx("div",{className:"flex items-center justify-center h-screen",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Finding matches..."})]})}):y?m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-icy-100 via-white to-icy-200 p-4 page-with-nav relative",children:[m.jsx("div",{className:"max-w-lg mx-auto relative z-10",children:m.jsx(h9,{user:y,onSwipe:T,onShowDetail:()=>h(!0)})}),l&&o&&m.jsx(u9,{match:o,onClose:()=>u(!1)}),d&&y&&m.jsx(c9,{user:y,onClose:()=>h(!1)})]}):m.jsx("div",{className:"flex items-center justify-center h-screen px-4",children:m.jsxs("div",{className:"text-center max-w-md",children:[m.jsx(lu,{className:"w-12 h-12 mx-auto mb-4 text-primary"}),m.jsx("h2",{className:"text-2xl font-bold text-dark mb-2",children:"Complete Your Compatibility Profile"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Answer 25 core compatibility questions to start discovering meaningful matches. The chat interface makes it easy and thoughtful."}),m.jsx("button",{onClick:()=>window.location.href="/compatibility",className:"px-6 py-3 bg-primary text-white rounded-lg font-semibold hover:bg-primary/90 transition",children:"Start Compatibility Questions"})]})})}function h9({user:t,onSwipe:e,onShowDetail:n}){const[r,i]=V.useState(0),s=V.useRef(null),o=MC(0),a=tc(o,[-200,200],[-30,30]),l=tc(o,[-200,-100,0,100,200],[0,1,1,1,0]),[u,d]=V.useState(!0),h=(w,g)=>{const v=s.current;if(v){const E=v.scrollTop===0,k=Math.abs(g.offset.x)>Math.abs(g.offset.y)*1.2;if(!E||!k){d(!1);return}d(!0)}},f=(w,g)=>{s.current&&Math.abs(g.offset.y)>Math.abs(g.offset.x)*.7&&o.set(0)},y=(w,g)=>{Math.abs(g.offset.x)>100&&Math.abs(g.offset.x)>Math.abs(g.offset.y)*1.2?e(g.offset.x>0?"right":"left"):o.set(0)},T=t.photos.length>0?t.photos:["https://via.placeholder.com/400x600?text=No+Photo"],b=T[r],I=w=>{w.stopPropagation();const g=w.currentTarget.getBoundingClientRect(),v=w.clientX-g.left,E=g.width;v>E/2?i(k=>(k+1)%T.length):i(k=>(k-1+T.length)%T.length)};return m.jsxs(il.div,{style:{x:u?o:0,rotate:u?a:0,opacity:l},drag:u?"x":!1,dragConstraints:{left:0,right:0},dragElastic:.2,onDragStart:h,onDrag:f,onDragEnd:y,className:"relative w-full h-[calc(100vh-12rem)] bg-white rounded-2xl shadow-2xl overflow-hidden cursor-grab active:cursor-grabbing flex flex-col",children:[m.jsxs("div",{ref:s,className:"flex-1 overflow-y-auto overscroll-contain min-h-0",style:{touchAction:"pan-y pan-x",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",scrollBehavior:"smooth"},onScroll:()=>{const w=s.current;w&&w.scrollTop===0&&d(!0)},children:[T.length>0&&m.jsxs("div",{className:"relative w-full aspect-[3/4] bg-gray-200 flex-shrink-0",children:[m.jsx("img",{src:b,alt:t.name,className:"w-full h-full object-cover cursor-pointer",onClick:I}),T.length>1&&m.jsx("div",{className:"absolute top-4 left-0 right-0 flex gap-1 px-4",children:T.map((w,g)=>m.jsx("div",{className:`flex-1 h-1 rounded-full transition-all ${g===r?"bg-white":"bg-white/40"}`},g))}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent pointer-events-none"}),m.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:[m.jsxs("h2",{className:"text-3xl font-bold mb-2",children:[t.name,", ",t.age]}),(t.location||t.distance)&&m.jsxs("div",{className:"flex items-center text-white/90",children:[m.jsx(Do,{className:"w-4 h-4 mr-1"}),m.jsx("span",{className:"text-sm",children:t.distance!==null&&t.distance!==void 0?`${t.distance} miles away`:t.location})]})]})]}),T.length===0&&m.jsxs("div",{className:"bg-gradient-to-br from-orange-500 via-red-500 to-red-800 p-6 text-white flex-shrink-0",children:[m.jsxs("h2",{className:"text-3xl font-bold mb-2",children:[t.name,", ",t.age]}),(t.location||t.distance)&&m.jsxs("div",{className:"flex items-center text-white/90",children:[m.jsx(Do,{className:"w-4 h-4 mr-1"}),m.jsx("span",{className:"text-sm",children:t.distance!==null&&t.distance!==void 0?`${t.distance} miles away`:t.location})]})]}),m.jsxs("div",{className:"p-6 space-y-6 bg-white",children:[t.bio&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-base font-bold text-gray-900 mb-2",children:"About"}),m.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:t.bio})]}),m.jsxs("div",{className:"flex justify-center gap-6 pt-6 pb-4 border-t border-gray-200",children:[m.jsx("button",{onClick:w=>{w.stopPropagation(),e("left")},className:"w-16 h-16 bg-white rounded-full shadow-lg flex items-center justify-center active:scale-95 transition transform border-2 border-red-100",children:m.jsx(Mo,{className:"w-8 h-8 text-red-500"})}),m.jsx("button",{onClick:w=>{w.stopPropagation(),n()},className:"w-16 h-16 bg-white rounded-full shadow-lg flex items-center justify-center active:scale-95 transition transform border-2 border-gray-100",children:m.jsx(Tv,{className:"w-8 h-8 text-gray-600"})}),m.jsx("button",{onClick:w=>{w.stopPropagation(),e("right")},className:"w-16 h-16 bg-white rounded-full shadow-lg flex items-center justify-center active:scale-95 transition transform border-2 border-primary/20",children:m.jsx(lu,{className:"w-8 h-8 text-primary",fill:"currentColor"})})]})]})]}),m.jsx(il.div,{style:{opacity:tc(o,[0,100],[0,1])},className:"absolute top-8 right-8 bg-primary text-white px-6 py-3 rounded-lg font-bold text-2xl rotate-12 border-4 border-primary pointer-events-none",children:"LIKE"}),m.jsx(il.div,{style:{opacity:tc(o,[-100,0],[1,0])},className:"absolute top-8 left-8 bg-red-500 text-white px-6 py-3 rounded-lg font-bold text-2xl -rotate-12 border-4 border-red-500 pointer-events-none",children:"NOPE"})]})}function Lm(t){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lm(t)}function Vn(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function bt(t){Vn(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Lm(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var f9={};function p9(){return f9}function Jx(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function bc(t,e){Vn(2,arguments);var n=bt(t),r=bt(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function m9(t,e){Vn(2,arguments);var n=bt(t),r=bt(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function g9(t,e){return Vn(2,arguments),bt(t).getTime()-bt(e).getTime()}var y9={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},v9="trunc";function _9(t){return y9[v9]}function w9(t){Vn(1,arguments);var e=bt(t);return e.setHours(23,59,59,999),e}function T9(t){Vn(1,arguments);var e=bt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function x9(t){Vn(1,arguments);var e=bt(t);return w9(e).getTime()===T9(e).getTime()}function E9(t,e){Vn(2,arguments);var n=bt(t),r=bt(e),i=bc(n,r),s=Math.abs(m9(n,r)),o;if(s<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*s);var a=bc(n,r)===-i;x9(bt(t))&&s===1&&bc(t,r)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function I9(t,e,n){Vn(2,arguments);var r=g9(t,e)/1e3;return _9()(r)}var S9={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},b9=function(e,n,r){var i,s=S9[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function qf(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var P9={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},C9={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},A9={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},k9={date:qf({formats:P9,defaultWidth:"full"}),time:qf({formats:C9,defaultWidth:"full"}),dateTime:qf({formats:A9,defaultWidth:"full"})},R9={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},N9=function(e,n,r,i){return R9[e]};function Ia(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{var a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[l]||t.values[a]}var u=t.argumentCallback?t.argumentCallback(e):e;return i[u]}}var D9={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},M9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},V9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},O9={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},L9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},j9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},U9=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},F9={ordinalNumber:U9,era:Ia({values:D9,defaultWidth:"wide"}),quarter:Ia({values:M9,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Ia({values:V9,defaultWidth:"wide"}),day:Ia({values:O9,defaultWidth:"wide"}),dayPeriod:Ia({values:L9,defaultWidth:"wide",formattingValues:j9,defaultFormattingWidth:"wide"})};function Sa(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?z9(a,function(h){return h.test(o)}):B9(a,function(h){return h.test(o)}),u;u=t.valueCallback?t.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;var d=e.slice(o.length);return{value:u,rest:d}}}function B9(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function z9(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function $9(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}var W9=/^(\d+)(th|st|nd|rd)?/i,q9=/\d+/i,H9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},G9={any:[/^b/i,/^(a|c)/i]},K9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Y9={any:[/1/i,/2/i,/3/i,/4/i]},Q9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},X9={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},J9={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Z9={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},eB={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tB={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nB={ordinalNumber:$9({matchPattern:W9,parsePattern:q9,valueCallback:function(e){return parseInt(e,10)}}),era:Sa({matchPatterns:H9,defaultMatchWidth:"wide",parsePatterns:G9,defaultParseWidth:"any"}),quarter:Sa({matchPatterns:K9,defaultMatchWidth:"wide",parsePatterns:Y9,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Sa({matchPatterns:Q9,defaultMatchWidth:"wide",parsePatterns:X9,defaultParseWidth:"any"}),day:Sa({matchPatterns:J9,defaultMatchWidth:"wide",parsePatterns:Z9,defaultParseWidth:"any"}),dayPeriod:Sa({matchPatterns:eB,defaultMatchWidth:"any",parsePatterns:tB,defaultParseWidth:"any"})},rB={code:"en-US",formatDistance:b9,formatLong:k9,formatRelative:N9,localize:F9,match:nB,options:{weekStartsOn:0,firstWeekContainsDate:1}};function OC(t,e){if(t==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function iB(t){return OC({},t)}var Zx=1440,sB=2520,Hf=43200,oB=86400;function aB(t,e,n){var r,i;Vn(2,arguments);var s=p9(),o=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:s.locale)!==null&&r!==void 0?r:rB;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=bc(t,e);if(isNaN(a))throw new RangeError("Invalid time value");var l=OC(iB(n),{addSuffix:!!(n!=null&&n.addSuffix),comparison:a}),u,d;a>0?(u=bt(e),d=bt(t)):(u=bt(t),d=bt(e));var h=I9(d,u),f=(Jx(d)-Jx(u))/1e3,y=Math.round((h-f)/60),T;if(y<2)return n!=null&&n.includeSeconds?h<5?o.formatDistance("lessThanXSeconds",5,l):h<10?o.formatDistance("lessThanXSeconds",10,l):h<20?o.formatDistance("lessThanXSeconds",20,l):h<40?o.formatDistance("halfAMinute",0,l):h<60?o.formatDistance("lessThanXMinutes",1,l):o.formatDistance("xMinutes",1,l):y===0?o.formatDistance("lessThanXMinutes",1,l):o.formatDistance("xMinutes",y,l);if(y<45)return o.formatDistance("xMinutes",y,l);if(y<90)return o.formatDistance("aboutXHours",1,l);if(y<Zx){var b=Math.round(y/60);return o.formatDistance("aboutXHours",b,l)}else{if(y<sB)return o.formatDistance("xDays",1,l);if(y<Hf){var I=Math.round(y/Zx);return o.formatDistance("xDays",I,l)}else if(y<oB)return T=Math.round(y/Hf),o.formatDistance("aboutXMonths",T,l)}if(T=E9(d,u),T<12){var w=Math.round(y/Hf);return o.formatDistance("xMonths",w,l)}else{var g=T%12,v=Math.floor(T/12);return g<3?o.formatDistance("aboutXYears",v,l):g<9?o.formatDistance("overXYears",v,l):o.formatDistance("almostXYears",v+1,l)}}function lB(t,e){return Vn(1,arguments),aB(t,Date.now(),e)}function uB(){const[t,e]=V.useState([]),[n,r]=V.useState(!0),i=kr();V.useEffect(()=>{s()},[]);const s=async()=>{try{const o=await ve.getMatches();e(o)}catch(o){X.error("Failed to load matches",o)}finally{r(!1)}};return n?m.jsx("div",{className:"flex items-center justify-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):t.length===0?m.jsx("div",{className:"flex items-center justify-center h-screen px-4 relative z-10",children:m.jsxs("div",{className:"text-center max-w-md",children:[m.jsx("h2",{className:"text-2xl font-bold text-dark mb-2",children:"No matches yet"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Start swiping to meet your next partner in building."}),m.jsx("button",{onClick:()=>i("/app"),className:"px-6 py-3 bg-primary text-white rounded-lg font-semibold hover:bg-primary/90 transition",children:"Start Swiping"})]})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-icy-100 via-white to-icy-200 page-with-nav pb-8 px-4 relative",children:m.jsxs("div",{className:"max-w-2xl mx-auto relative z-10 pt-4",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[m.jsx(kU,{className:"w-6 h-6 text-primary"}),m.jsx("h1",{className:"text-3xl font-bold text-dark",children:"Your Matches"})]}),m.jsx("div",{className:"space-y-3",children:t.map(o=>m.jsx(cB,{match:o,onClick:()=>i(`/chat/${o.id}`)},o.id))})]})})}function cB({match:t,onClick:e}){const n=t.photos[0]||"https://via.placeholder.com/100";return m.jsxs("div",{onClick:e,className:"bg-white rounded-xl shadow-sm hover:shadow-md transition cursor-pointer p-4 flex items-center gap-4 active:scale-[0.98]",children:[m.jsx("img",{src:n,alt:t.name,className:"w-20 h-20 rounded-full object-cover flex-shrink-0 border-2 border-gray-100"}),m.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[m.jsxs("h3",{className:"font-semibold text-lg text-dark mb-1 truncate",children:[t.name,", ",t.age]}),t.last_message?m.jsx("p",{className:"text-gray-600 text-sm truncate leading-relaxed",children:t.last_message}):m.jsx("p",{className:"text-gray-400 text-sm italic",children:"No messages yet"})]}),m.jsxs("div",{className:"flex flex-col items-end gap-2 flex-shrink-0",children:[t.last_message_time&&m.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:lB(new Date(t.last_message_time),{addSuffix:!0})}),m.jsx(xv,{className:"w-5 h-5 text-primary flex-shrink-0"})]})]})}var jm={exports:{}},LC={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(LC);var Oe=LC.exports,Um={exports:{}},Fm={exports:{}},jC={exports:{}};(function(t){function e(n){"@babel/helpers - typeof";return t.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(jC);var UC=jC.exports,Bm={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r,i){if(i.length<r)throw new TypeError(r+" argument"+(r>1?"s":"")+" required, but only "+i.length+" present")}t.exports=e.default})(Bm,Bm.exports);var Ft=Bm.exports;(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r=n(UC),i=n(Ft);function s(o){return(0,i.default)(1,arguments),o instanceof Date||(0,r.default)(o)==="object"&&Object.prototype.toString.call(o)==="[object Date]"}t.exports=e.default})(Fm,Fm.exports);var dB=Fm.exports,zm={exports:{}};(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r=n(UC),i=n(Ft);function s(o){(0,i.default)(1,arguments);var a=Object.prototype.toString.call(o);return o instanceof Date||(0,r.default)(o)==="object"&&a==="[object Date]"?new Date(o.getTime()):typeof o=="number"||a==="[object Number]"?new Date(o):((typeof o=="string"||a==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}t.exports=e.default})(zm,zm.exports);var or=zm.exports;(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var r=n(dB),i=n(or),s=n(Ft);function o(a){if((0,s.default)(1,arguments),!(0,r.default)(a)&&typeof a!="number")return!1;var l=(0,i.default)(a);return!isNaN(Number(l))}t.exports=e.default})(Um,Um.exports);var hB=Um.exports,$m={exports:{}},Wm={exports:{}},qm={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){if(r===null||r===!0||r===!1)return NaN;var i=Number(r);return isNaN(i)?i:i<0?Math.ceil(i):Math.floor(i)}t.exports=e.default})(qm,qm.exports);var As=qm.exports;const fB=Ul(As);(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var r=n(As),i=n(or),s=n(Ft);function o(a,l){(0,s.default)(2,arguments);var u=(0,i.default)(a).getTime(),d=(0,r.default)(l);return new Date(u+d)}t.exports=e.default})(Wm,Wm.exports);var pB=Wm.exports;(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var r=n(pB),i=n(Ft),s=n(As);function o(a,l){(0,i.default)(2,arguments);var u=(0,s.default)(l);return(0,r.default)(a,-u)}t.exports=e.default})($m,$m.exports);var mB=$m.exports,Hm={exports:{}},Gm={exports:{}};(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var r=n(or),i=n(Ft),s=864e5;function o(a){(0,i.default)(1,arguments);var l=(0,r.default)(a),u=l.getTime();l.setUTCMonth(0,1),l.setUTCHours(0,0,0,0);var d=l.getTime(),h=u-d;return Math.floor(h/s)+1}t.exports=e.default})(Gm,Gm.exports);var gB=Gm.exports,Km={exports:{}},Ym={exports:{}};(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r=n(or),i=n(Ft);function s(o){(0,i.default)(1,arguments);var a=1,l=(0,r.default)(o),u=l.getUTCDay(),d=(u<a?7:0)+u-a;return l.setUTCDate(l.getUTCDate()-d),l.setUTCHours(0,0,0,0),l}t.exports=e.default})(Ym,Ym.exports);var Yv=Ym.exports,Qm={exports:{}},Xm={exports:{}};(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var r=n(or),i=n(Ft),s=n(Yv);function o(a){(0,i.default)(1,arguments);var l=(0,r.default)(a),u=l.getUTCFullYear(),d=new Date(0);d.setUTCFullYear(u+1,0,4),d.setUTCHours(0,0,0,0);var h=(0,s.default)(d),f=new Date(0);f.setUTCFullYear(u,0,4),f.setUTCHours(0,0,0,0);var y=(0,s.default)(f);return l.getTime()>=h.getTime()?u+1:l.getTime()>=y.getTime()?u:u-1}t.exports=e.default})(Xm,Xm.exports);var FC=Xm.exports;(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var r=n(FC),i=n(Yv),s=n(Ft);function o(a){(0,s.default)(1,arguments);var l=(0,r.default)(a),u=new Date(0);u.setUTCFullYear(l,0,4),u.setUTCHours(0,0,0,0);var d=(0,i.default)(u);return d}t.exports=e.default})(Qm,Qm.exports);var yB=Qm.exports;(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var r=n(or),i=n(Yv),s=n(yB),o=n(Ft),a=6048e5;function l(u){(0,o.default)(1,arguments);var d=(0,r.default)(u),h=(0,i.default)(d).getTime()-(0,s.default)(d).getTime();return Math.round(h/a)+1}t.exports=e.default})(Km,Km.exports);var vB=Km.exports,Jm={exports:{}},Zm={exports:{}},ks={};Object.defineProperty(ks,"__esModule",{value:!0});ks.getDefaultOptions=_B;ks.setDefaultOptions=wB;var BC={};function _B(){return BC}function wB(t){BC=t}(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var r=n(or),i=n(Ft),s=n(As),o=ks;function a(l,u){var d,h,f,y,T,b,I,w;(0,i.default)(1,arguments);var g=(0,o.getDefaultOptions)(),v=(0,s.default)((d=(h=(f=(y=u==null?void 0:u.weekStartsOn)!==null&&y!==void 0?y:u==null||(T=u.locale)===null||T===void 0||(b=T.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&f!==void 0?f:g.weekStartsOn)!==null&&h!==void 0?h:(I=g.locale)===null||I===void 0||(w=I.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&d!==void 0?d:0);if(!(v>=0&&v<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var E=(0,r.default)(l),k=E.getUTCDay(),M=(k<v?7:0)+k-v;return E.setUTCDate(E.getUTCDate()-M),E.setUTCHours(0,0,0,0),E}t.exports=e.default})(Zm,Zm.exports);var Qv=Zm.exports,eg={exports:{}},tg={exports:{}};(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var r=n(or),i=n(Ft),s=n(Qv),o=n(As),a=ks;function l(u,d){var h,f,y,T,b,I,w,g;(0,i.default)(1,arguments);var v=(0,r.default)(u),E=v.getUTCFullYear(),k=(0,a.getDefaultOptions)(),M=(0,o.default)((h=(f=(y=(T=d==null?void 0:d.firstWeekContainsDate)!==null&&T!==void 0?T:d==null||(b=d.locale)===null||b===void 0||(I=b.options)===null||I===void 0?void 0:I.firstWeekContainsDate)!==null&&y!==void 0?y:k.firstWeekContainsDate)!==null&&f!==void 0?f:(w=k.locale)===null||w===void 0||(g=w.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&h!==void 0?h:1);if(!(M>=1&&M<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=new Date(0);S.setUTCFullYear(E+1,0,M),S.setUTCHours(0,0,0,0);var x=(0,s.default)(S,d),C=new Date(0);C.setUTCFullYear(E,0,M),C.setUTCHours(0,0,0,0);var R=(0,s.default)(C,d);return v.getTime()>=x.getTime()?E+1:v.getTime()>=R.getTime()?E:E-1}t.exports=e.default})(tg,tg.exports);var zC=tg.exports;(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var r=n(zC),i=n(Ft),s=n(Qv),o=n(As),a=ks;function l(u,d){var h,f,y,T,b,I,w,g;(0,i.default)(1,arguments);var v=(0,a.getDefaultOptions)(),E=(0,o.default)((h=(f=(y=(T=d==null?void 0:d.firstWeekContainsDate)!==null&&T!==void 0?T:d==null||(b=d.locale)===null||b===void 0||(I=b.options)===null||I===void 0?void 0:I.firstWeekContainsDate)!==null&&y!==void 0?y:v.firstWeekContainsDate)!==null&&f!==void 0?f:(w=v.locale)===null||w===void 0||(g=w.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&h!==void 0?h:1),k=(0,r.default)(u,d),M=new Date(0);M.setUTCFullYear(k,0,E),M.setUTCHours(0,0,0,0);var S=(0,s.default)(M,d);return S}t.exports=e.default})(eg,eg.exports);var TB=eg.exports;(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var r=n(or),i=n(Qv),s=n(TB),o=n(Ft),a=6048e5;function l(u,d){(0,o.default)(1,arguments);var h=(0,r.default)(u),f=(0,i.default)(h,d).getTime()-(0,s.default)(h,d).getTime();return Math.round(f/a)+1}t.exports=e.default})(Jm,Jm.exports);var xB=Jm.exports,ng={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r,i){for(var s=r<0?"-":"",o=Math.abs(r).toString();o.length<i;)o="0"+o;return s+o}t.exports=e.default})(ng,ng.exports);var $C=ng.exports,rg={exports:{}};(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n($C),i={y:function(a,l){var u=a.getUTCFullYear(),d=u>0?u:1-u;return(0,r.default)(l==="yy"?d%100:d,l.length)},M:function(a,l){var u=a.getUTCMonth();return l==="M"?String(u+1):(0,r.default)(u+1,2)},d:function(a,l){return(0,r.default)(a.getUTCDate(),l.length)},a:function(a,l){var u=a.getUTCHours()/12>=1?"pm":"am";switch(l){case"a":case"aa":return u.toUpperCase();case"aaa":return u;case"aaaaa":return u[0];case"aaaa":default:return u==="am"?"a.m.":"p.m."}},h:function(a,l){return(0,r.default)(a.getUTCHours()%12||12,l.length)},H:function(a,l){return(0,r.default)(a.getUTCHours(),l.length)},m:function(a,l){return(0,r.default)(a.getUTCMinutes(),l.length)},s:function(a,l){return(0,r.default)(a.getUTCSeconds(),l.length)},S:function(a,l){var u=l.length,d=a.getUTCMilliseconds(),h=Math.floor(d*Math.pow(10,u-3));return(0,r.default)(h,l.length)}},s=i;e.default=s,t.exports=e.default})(rg,rg.exports);var EB=rg.exports;(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(gB),i=n(vB),s=n(FC),o=n(xB),a=n(zC),l=n($C),u=n(EB),d={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},h={G:function(w,g,v){var E=w.getUTCFullYear()>0?1:0;switch(g){case"G":case"GG":case"GGG":return v.era(E,{width:"abbreviated"});case"GGGGG":return v.era(E,{width:"narrow"});case"GGGG":default:return v.era(E,{width:"wide"})}},y:function(w,g,v){if(g==="yo"){var E=w.getUTCFullYear(),k=E>0?E:1-E;return v.ordinalNumber(k,{unit:"year"})}return u.default.y(w,g)},Y:function(w,g,v,E){var k=(0,a.default)(w,E),M=k>0?k:1-k;if(g==="YY"){var S=M%100;return(0,l.default)(S,2)}return g==="Yo"?v.ordinalNumber(M,{unit:"year"}):(0,l.default)(M,g.length)},R:function(w,g){var v=(0,s.default)(w);return(0,l.default)(v,g.length)},u:function(w,g){var v=w.getUTCFullYear();return(0,l.default)(v,g.length)},Q:function(w,g,v){var E=Math.ceil((w.getUTCMonth()+1)/3);switch(g){case"Q":return String(E);case"QQ":return(0,l.default)(E,2);case"Qo":return v.ordinalNumber(E,{unit:"quarter"});case"QQQ":return v.quarter(E,{width:"abbreviated",context:"formatting"});case"QQQQQ":return v.quarter(E,{width:"narrow",context:"formatting"});case"QQQQ":default:return v.quarter(E,{width:"wide",context:"formatting"})}},q:function(w,g,v){var E=Math.ceil((w.getUTCMonth()+1)/3);switch(g){case"q":return String(E);case"qq":return(0,l.default)(E,2);case"qo":return v.ordinalNumber(E,{unit:"quarter"});case"qqq":return v.quarter(E,{width:"abbreviated",context:"standalone"});case"qqqqq":return v.quarter(E,{width:"narrow",context:"standalone"});case"qqqq":default:return v.quarter(E,{width:"wide",context:"standalone"})}},M:function(w,g,v){var E=w.getUTCMonth();switch(g){case"M":case"MM":return u.default.M(w,g);case"Mo":return v.ordinalNumber(E+1,{unit:"month"});case"MMM":return v.month(E,{width:"abbreviated",context:"formatting"});case"MMMMM":return v.month(E,{width:"narrow",context:"formatting"});case"MMMM":default:return v.month(E,{width:"wide",context:"formatting"})}},L:function(w,g,v){var E=w.getUTCMonth();switch(g){case"L":return String(E+1);case"LL":return(0,l.default)(E+1,2);case"Lo":return v.ordinalNumber(E+1,{unit:"month"});case"LLL":return v.month(E,{width:"abbreviated",context:"standalone"});case"LLLLL":return v.month(E,{width:"narrow",context:"standalone"});case"LLLL":default:return v.month(E,{width:"wide",context:"standalone"})}},w:function(w,g,v,E){var k=(0,o.default)(w,E);return g==="wo"?v.ordinalNumber(k,{unit:"week"}):(0,l.default)(k,g.length)},I:function(w,g,v){var E=(0,i.default)(w);return g==="Io"?v.ordinalNumber(E,{unit:"week"}):(0,l.default)(E,g.length)},d:function(w,g,v){return g==="do"?v.ordinalNumber(w.getUTCDate(),{unit:"date"}):u.default.d(w,g)},D:function(w,g,v){var E=(0,r.default)(w);return g==="Do"?v.ordinalNumber(E,{unit:"dayOfYear"}):(0,l.default)(E,g.length)},E:function(w,g,v){var E=w.getUTCDay();switch(g){case"E":case"EE":case"EEE":return v.day(E,{width:"abbreviated",context:"formatting"});case"EEEEE":return v.day(E,{width:"narrow",context:"formatting"});case"EEEEEE":return v.day(E,{width:"short",context:"formatting"});case"EEEE":default:return v.day(E,{width:"wide",context:"formatting"})}},e:function(w,g,v,E){var k=w.getUTCDay(),M=(k-E.weekStartsOn+8)%7||7;switch(g){case"e":return String(M);case"ee":return(0,l.default)(M,2);case"eo":return v.ordinalNumber(M,{unit:"day"});case"eee":return v.day(k,{width:"abbreviated",context:"formatting"});case"eeeee":return v.day(k,{width:"narrow",context:"formatting"});case"eeeeee":return v.day(k,{width:"short",context:"formatting"});case"eeee":default:return v.day(k,{width:"wide",context:"formatting"})}},c:function(w,g,v,E){var k=w.getUTCDay(),M=(k-E.weekStartsOn+8)%7||7;switch(g){case"c":return String(M);case"cc":return(0,l.default)(M,g.length);case"co":return v.ordinalNumber(M,{unit:"day"});case"ccc":return v.day(k,{width:"abbreviated",context:"standalone"});case"ccccc":return v.day(k,{width:"narrow",context:"standalone"});case"cccccc":return v.day(k,{width:"short",context:"standalone"});case"cccc":default:return v.day(k,{width:"wide",context:"standalone"})}},i:function(w,g,v){var E=w.getUTCDay(),k=E===0?7:E;switch(g){case"i":return String(k);case"ii":return(0,l.default)(k,g.length);case"io":return v.ordinalNumber(k,{unit:"day"});case"iii":return v.day(E,{width:"abbreviated",context:"formatting"});case"iiiii":return v.day(E,{width:"narrow",context:"formatting"});case"iiiiii":return v.day(E,{width:"short",context:"formatting"});case"iiii":default:return v.day(E,{width:"wide",context:"formatting"})}},a:function(w,g,v){var E=w.getUTCHours(),k=E/12>=1?"pm":"am";switch(g){case"a":case"aa":return v.dayPeriod(k,{width:"abbreviated",context:"formatting"});case"aaa":return v.dayPeriod(k,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return v.dayPeriod(k,{width:"narrow",context:"formatting"});case"aaaa":default:return v.dayPeriod(k,{width:"wide",context:"formatting"})}},b:function(w,g,v){var E=w.getUTCHours(),k;switch(E===12?k=d.noon:E===0?k=d.midnight:k=E/12>=1?"pm":"am",g){case"b":case"bb":return v.dayPeriod(k,{width:"abbreviated",context:"formatting"});case"bbb":return v.dayPeriod(k,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return v.dayPeriod(k,{width:"narrow",context:"formatting"});case"bbbb":default:return v.dayPeriod(k,{width:"wide",context:"formatting"})}},B:function(w,g,v){var E=w.getUTCHours(),k;switch(E>=17?k=d.evening:E>=12?k=d.afternoon:E>=4?k=d.morning:k=d.night,g){case"B":case"BB":case"BBB":return v.dayPeriod(k,{width:"abbreviated",context:"formatting"});case"BBBBB":return v.dayPeriod(k,{width:"narrow",context:"formatting"});case"BBBB":default:return v.dayPeriod(k,{width:"wide",context:"formatting"})}},h:function(w,g,v){if(g==="ho"){var E=w.getUTCHours()%12;return E===0&&(E=12),v.ordinalNumber(E,{unit:"hour"})}return u.default.h(w,g)},H:function(w,g,v){return g==="Ho"?v.ordinalNumber(w.getUTCHours(),{unit:"hour"}):u.default.H(w,g)},K:function(w,g,v){var E=w.getUTCHours()%12;return g==="Ko"?v.ordinalNumber(E,{unit:"hour"}):(0,l.default)(E,g.length)},k:function(w,g,v){var E=w.getUTCHours();return E===0&&(E=24),g==="ko"?v.ordinalNumber(E,{unit:"hour"}):(0,l.default)(E,g.length)},m:function(w,g,v){return g==="mo"?v.ordinalNumber(w.getUTCMinutes(),{unit:"minute"}):u.default.m(w,g)},s:function(w,g,v){return g==="so"?v.ordinalNumber(w.getUTCSeconds(),{unit:"second"}):u.default.s(w,g)},S:function(w,g){return u.default.S(w,g)},X:function(w,g,v,E){var k=E._originalDate||w,M=k.getTimezoneOffset();if(M===0)return"Z";switch(g){case"X":return y(M);case"XXXX":case"XX":return T(M);case"XXXXX":case"XXX":default:return T(M,":")}},x:function(w,g,v,E){var k=E._originalDate||w,M=k.getTimezoneOffset();switch(g){case"x":return y(M);case"xxxx":case"xx":return T(M);case"xxxxx":case"xxx":default:return T(M,":")}},O:function(w,g,v,E){var k=E._originalDate||w,M=k.getTimezoneOffset();switch(g){case"O":case"OO":case"OOO":return"GMT"+f(M,":");case"OOOO":default:return"GMT"+T(M,":")}},z:function(w,g,v,E){var k=E._originalDate||w,M=k.getTimezoneOffset();switch(g){case"z":case"zz":case"zzz":return"GMT"+f(M,":");case"zzzz":default:return"GMT"+T(M,":")}},t:function(w,g,v,E){var k=E._originalDate||w,M=Math.floor(k.getTime()/1e3);return(0,l.default)(M,g.length)},T:function(w,g,v,E){var k=E._originalDate||w,M=k.getTime();return(0,l.default)(M,g.length)}};function f(I,w){var g=I>0?"-":"+",v=Math.abs(I),E=Math.floor(v/60),k=v%60;if(k===0)return g+String(E);var M=w;return g+String(E)+M+(0,l.default)(k,2)}function y(I,w){if(I%60===0){var g=I>0?"-":"+";return g+(0,l.default)(Math.abs(I)/60,2)}return T(I,w)}function T(I,w){var g=w||"",v=I>0?"-":"+",E=Math.abs(I),k=(0,l.default)(Math.floor(E/60),2),M=(0,l.default)(E%60,2);return v+k+g+M}var b=h;e.default=b,t.exports=e.default})(Hm,Hm.exports);var IB=Hm.exports,ig={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(l,u){switch(l){case"P":return u.date({width:"short"});case"PP":return u.date({width:"medium"});case"PPP":return u.date({width:"long"});case"PPPP":default:return u.date({width:"full"})}},r=function(l,u){switch(l){case"p":return u.time({width:"short"});case"pp":return u.time({width:"medium"});case"ppp":return u.time({width:"long"});case"pppp":default:return u.time({width:"full"})}},i=function(l,u){var d=l.match(/(P+)(p+)?/)||[],h=d[1],f=d[2];if(!f)return n(l,u);var y;switch(h){case"P":y=u.dateTime({width:"short"});break;case"PP":y=u.dateTime({width:"medium"});break;case"PPP":y=u.dateTime({width:"long"});break;case"PPPP":default:y=u.dateTime({width:"full"});break}return y.replace("{{date}}",n(h,u)).replace("{{time}}",r(f,u))},s={p:r,P:i},o=s;e.default=o,t.exports=e.default})(ig,ig.exports);var SB=ig.exports,sg={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){var i=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return i.setUTCFullYear(r.getFullYear()),r.getTime()-i.getTime()}t.exports=e.default})(sg,sg.exports);var WC=sg.exports;const eE=Ul(WC);var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.isProtectedDayOfYearToken=CB;fu.isProtectedWeekYearToken=AB;fu.throwProtectedError=kB;var bB=["D","DD"],PB=["YY","YYYY"];function CB(t){return bB.indexOf(t)!==-1}function AB(t){return PB.indexOf(t)!==-1}function kB(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var og={exports:{}},ag={exports:{}},lg={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},r=function(o,a,l){var u,d=n[o];return typeof d=="string"?u=d:a===1?u=d.one:u=d.other.replace("{{count}}",a.toString()),l!=null&&l.addSuffix?l.comparison&&l.comparison>0?"in "+u:u+" ago":u},i=r;e.default=i,t.exports=e.default})(lg,lg.exports);var RB=lg.exports,ug={exports:{}},cg={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){return function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=i.width?String(i.width):r.defaultWidth,o=r.formats[s]||r.formats[r.defaultWidth];return o}}t.exports=e.default})(cg,cg.exports);var NB=cg.exports;(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(NB),i={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},s={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},o={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},a={date:(0,r.default)({formats:i,defaultWidth:"full"}),time:(0,r.default)({formats:s,defaultWidth:"full"}),dateTime:(0,r.default)({formats:o,defaultWidth:"full"})},l=a;e.default=l,t.exports=e.default})(ug,ug.exports);var DB=ug.exports,dg={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},r=function(o,a,l,u){return n[o]},i=r;e.default=i,t.exports=e.default})(dg,dg.exports);var MB=dg.exports,hg={exports:{}},fg={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){return function(i,s){var o=s!=null&&s.context?String(s.context):"standalone",a;if(o==="formatting"&&r.formattingValues){var l=r.defaultFormattingWidth||r.defaultWidth,u=s!=null&&s.width?String(s.width):l;a=r.formattingValues[u]||r.formattingValues[l]}else{var d=r.defaultWidth,h=s!=null&&s.width?String(s.width):r.defaultWidth;a=r.values[h]||r.values[d]}var f=r.argumentCallback?r.argumentCallback(i):i;return a[f]}}t.exports=e.default})(fg,fg.exports);var VB=fg.exports;(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(VB),i={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},s={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},o={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},a={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},l={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},u={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},d=function(T,b){var I=Number(T),w=I%100;if(w>20||w<10)switch(w%10){case 1:return I+"st";case 2:return I+"nd";case 3:return I+"rd"}return I+"th"},h={ordinalNumber:d,era:(0,r.default)({values:i,defaultWidth:"wide"}),quarter:(0,r.default)({values:s,defaultWidth:"wide",argumentCallback:function(T){return T-1}}),month:(0,r.default)({values:o,defaultWidth:"wide"}),day:(0,r.default)({values:a,defaultWidth:"wide"}),dayPeriod:(0,r.default)({values:l,defaultWidth:"wide",formattingValues:u,defaultFormattingWidth:"wide"})},f=h;e.default=f,t.exports=e.default})(hg,hg.exports);var OB=hg.exports,pg={exports:{}},mg={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(s){return function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=a.width,u=l&&s.matchPatterns[l]||s.matchPatterns[s.defaultMatchWidth],d=o.match(u);if(!d)return null;var h=d[0],f=l&&s.parsePatterns[l]||s.parsePatterns[s.defaultParseWidth],y=Array.isArray(f)?i(f,function(I){return I.test(h)}):r(f,function(I){return I.test(h)}),T;T=s.valueCallback?s.valueCallback(y):y,T=a.valueCallback?a.valueCallback(T):T;var b=o.slice(h.length);return{value:T,rest:b}}}function r(s,o){for(var a in s)if(s.hasOwnProperty(a)&&o(s[a]))return a}function i(s,o){for(var a=0;a<s.length;a++)if(o(s[a]))return a}t.exports=e.default})(mg,mg.exports);var LB=mg.exports,gg={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){return function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.match(r.matchPattern);if(!o)return null;var a=o[0],l=i.match(r.parsePattern);if(!l)return null;var u=r.valueCallback?r.valueCallback(l[0]):l[0];u=s.valueCallback?s.valueCallback(u):u;var d=i.slice(a.length);return{value:u,rest:d}}}t.exports=e.default})(gg,gg.exports);var jB=gg.exports;(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(LB),i=n(jB),s=/^(\d+)(th|st|nd|rd)?/i,o=/\d+/i,a={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},l={any:[/^b/i,/^(a|c)/i]},u={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},d={any:[/1/i,/2/i,/3/i,/4/i]},h={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},f={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},y={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},T={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},b={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},I={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},w={ordinalNumber:(0,i.default)({matchPattern:s,parsePattern:o,valueCallback:function(E){return parseInt(E,10)}}),era:(0,r.default)({matchPatterns:a,defaultMatchWidth:"wide",parsePatterns:l,defaultParseWidth:"any"}),quarter:(0,r.default)({matchPatterns:u,defaultMatchWidth:"wide",parsePatterns:d,defaultParseWidth:"any",valueCallback:function(E){return E+1}}),month:(0,r.default)({matchPatterns:h,defaultMatchWidth:"wide",parsePatterns:f,defaultParseWidth:"any"}),day:(0,r.default)({matchPatterns:y,defaultMatchWidth:"wide",parsePatterns:T,defaultParseWidth:"any"}),dayPeriod:(0,r.default)({matchPatterns:b,defaultMatchWidth:"any",parsePatterns:I,defaultParseWidth:"any"})},g=w;e.default=g,t.exports=e.default})(pg,pg.exports);var UB=pg.exports;(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(RB),i=n(DB),s=n(MB),o=n(OB),a=n(UB),l={code:"en-US",formatDistance:r.default,formatLong:i.default,formatRelative:s.default,localize:o.default,match:a.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},u=l;e.default=u,t.exports=e.default})(ag,ag.exports);var FB=ag.exports;(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(FB),i=r.default;e.default=i,t.exports=e.default})(og,og.exports);var BB=og.exports;(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=v;var r=n(hB),i=n(mB),s=n(or),o=n(IB),a=n(SB),l=n(WC),u=fu,d=n(As),h=n(Ft),f=ks,y=n(BB),T=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,b=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,I=/^'([^]*?)'?$/,w=/''/g,g=/[a-zA-Z]/;function v(k,M,S){var x,C,R,N,D,A,G,Y,Z,re,F,z,$,Q,ie,We,Qe,Bt;(0,h.default)(2,arguments);var Xe=String(M),ot=(0,f.getDefaultOptions)(),In=(x=(C=S==null?void 0:S.locale)!==null&&C!==void 0?C:ot.locale)!==null&&x!==void 0?x:y.default,On=(0,d.default)((R=(N=(D=(A=S==null?void 0:S.firstWeekContainsDate)!==null&&A!==void 0?A:S==null||(G=S.locale)===null||G===void 0||(Y=G.options)===null||Y===void 0?void 0:Y.firstWeekContainsDate)!==null&&D!==void 0?D:ot.firstWeekContainsDate)!==null&&N!==void 0?N:(Z=ot.locale)===null||Z===void 0||(re=Z.options)===null||re===void 0?void 0:re.firstWeekContainsDate)!==null&&R!==void 0?R:1);if(!(On>=1&&On<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var Ln=(0,d.default)((F=(z=($=(Q=S==null?void 0:S.weekStartsOn)!==null&&Q!==void 0?Q:S==null||(ie=S.locale)===null||ie===void 0||(We=ie.options)===null||We===void 0?void 0:We.weekStartsOn)!==null&&$!==void 0?$:ot.weekStartsOn)!==null&&z!==void 0?z:(Qe=ot.locale)===null||Qe===void 0||(Bt=Qe.options)===null||Bt===void 0?void 0:Bt.weekStartsOn)!==null&&F!==void 0?F:0);if(!(Ln>=0&&Ln<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!In.localize)throw new RangeError("locale must contain localize property");if(!In.formatLong)throw new RangeError("locale must contain formatLong property");var zt=(0,s.default)(k);if(!(0,r.default)(zt))throw new RangeError("Invalid time value");var Ko=(0,l.default)(zt),Yo=(0,i.default)(zt,Ko),pu={firstWeekContainsDate:On,weekStartsOn:Ln,locale:In,_originalDate:zt},Ih=Xe.match(b).map(function(at){var dn=at[0];if(dn==="p"||dn==="P"){var Oi=a.default[dn];return Oi(at,In.formatLong)}return at}).join("").match(T).map(function(at){if(at==="''")return"'";var dn=at[0];if(dn==="'")return E(at);var Oi=o.default[dn];if(Oi)return!(S!=null&&S.useAdditionalWeekYearTokens)&&(0,u.isProtectedWeekYearToken)(at)&&(0,u.throwProtectedError)(at,M,String(k)),!(S!=null&&S.useAdditionalDayOfYearTokens)&&(0,u.isProtectedDayOfYearToken)(at)&&(0,u.throwProtectedError)(at,M,String(k)),Oi(Yo,at,In.localize,pu);if(dn.match(g))throw new RangeError("Format string contains an unescaped latin alphabet character `"+dn+"`");return at}).join("");return Ih}function E(k){var M=k.match(I);return M?M[1].replace(w,"'"):k}t.exports=e.default})(jm,jm.exports);var zB=jm.exports;const $B=Ul(zB);function tE(t,e,n){var r=HB(t,n.timeZone,n.locale);return r.formatToParts?WB(r,e):qB(r,e)}function WB(t,e){for(var n=t.formatToParts(e),r=n.length-1;r>=0;--r)if(n[r].type==="timeZoneName")return n[r].value}function qB(t,e){var n=t.format(e).replace(/\u200E/g,""),r=/ [\w-+ ]+$/.exec(n);return r?r[0].substr(1):""}function HB(t,e,n){if(n&&!n.code)throw new Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:e,timeZoneName:t})}function GB(t,e){var n=XB(e);return n.formatToParts?YB(n,t):QB(n,t)}var KB={year:0,month:1,day:2,hour:3,minute:4,second:5};function YB(t,e){try{for(var n=t.formatToParts(e),r=[],i=0;i<n.length;i++){var s=KB[n[i].type];s>=0&&(r[s]=parseInt(n[i].value,10))}return r}catch(o){if(o instanceof RangeError)return[NaN];throw o}}function QB(t,e){var n=t.format(e),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var Gf={};function XB(t){if(!Gf[t]){var e=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=e==="06/25/2014, 00:00:00"||e==="06/25/2014 00:00:00";Gf[t]=n?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return Gf[t]}function qC(t,e,n,r,i,s,o){var a=new Date(0);return a.setUTCFullYear(t,e,n),a.setUTCHours(r,i,s,o),a}var nE=36e5,JB=6e4,Kf={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Xv(t,e,n){var r,i;if(!t||(r=Kf.timezoneZ.exec(t),r))return 0;var s;if(r=Kf.timezoneHH.exec(t),r)return s=parseInt(r[1],10),rE(s)?-(s*nE):NaN;if(r=Kf.timezoneHHMM.exec(t),r){s=parseInt(r[2],10);var o=parseInt(r[3],10);return rE(s,o)?(i=Math.abs(s)*nE+o*JB,r[1]==="+"?-i:i):NaN}if(tz(t)){e=new Date(e||Date.now());var a=n?e:ZB(e),l=yg(a,t),u=n?l:ez(e,l,t);return-u}return NaN}function ZB(t){return qC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function yg(t,e){var n=GB(t,e),r=qC(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),i=t.getTime(),s=i%1e3;return i-=s>=0?s:1e3+s,r-i}function ez(t,e,n){var r=t.getTime(),i=r-e,s=yg(new Date(i),n);if(e===s)return e;i-=s-e;var o=yg(new Date(i),n);return s===o?s:Math.max(s,o)}function rE(t,e){return-23<=t&&t<=23&&(e==null||0<=e&&e<=59)}var iE={};function tz(t){if(iE[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),iE[t]=!0,!0}catch{return!1}}var nz=60*1e3,rz={X:function(t,e,n,r){var i=Yf(r.timeZone,t);if(i===0)return"Z";switch(e){case"X":return sE(i);case"XXXX":case"XX":return Bs(i);case"XXXXX":case"XXX":default:return Bs(i,":")}},x:function(t,e,n,r){var i=Yf(r.timeZone,t);switch(e){case"x":return sE(i);case"xxxx":case"xx":return Bs(i);case"xxxxx":case"xxx":default:return Bs(i,":")}},O:function(t,e,n,r){var i=Yf(r.timeZone,t);switch(e){case"O":case"OO":case"OOO":return"GMT"+iz(i,":");case"OOOO":default:return"GMT"+Bs(i,":")}},z:function(t,e,n,r){switch(e){case"z":case"zz":case"zzz":return tE("short",t,r);case"zzzz":default:return tE("long",t,r)}}};function Yf(t,e){var n=t?Xv(t,e,!0)/nz:e.getTimezoneOffset();if(Number.isNaN(n))throw new RangeError("Invalid time zone specified: "+t);return n}function Pd(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}function Bs(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),s=Pd(Math.floor(i/60),2),o=Pd(Math.floor(i%60),2);return r+s+n+o}function sE(t,e){if(t%60===0){var n=t>0?"-":"+";return n+Pd(Math.abs(t)/60,2)}return Bs(t,e)}function iz(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(s===0)return n+String(i);var o=e;return n+String(i)+o+Pd(s,2)}var sz=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Qf=36e5,oE=6e4,oz=2,Mt={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:sz};function HC(t,e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);var n=e||{},r=n.additionalDigits==null?oz:fB(n.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var i=az(t),s=lz(i.date,r),o=s.year,a=s.restDateString,l=uz(a,o);if(isNaN(l))return new Date(NaN);if(l){var u=l.getTime(),d=0,h;if(i.time&&(d=cz(i.time),isNaN(d)))return new Date(NaN);if(i.timeZone||n.timeZone){if(h=Xv(i.timeZone||n.timeZone,new Date(u+d)),isNaN(h))return new Date(NaN)}else h=eE(new Date(u+d)),h=eE(new Date(u+d+h));return new Date(u+d+h)}else return new Date(NaN)}function az(t){var e={},n=Mt.dateTimePattern.exec(t),r;if(n?(e.date=n[1],r=n[3]):(n=Mt.datePattern.exec(t),n?(e.date=n[1],r=n[2]):(e.date=null,r=t)),r){var i=Mt.timeZone.exec(r);i?(e.time=r.replace(i[1],""),e.timeZone=i[1].trim()):e.time=r}return e}function lz(t,e){var n=Mt.YYY[e],r=Mt.YYYYY[e],i;if(i=Mt.YYYY.exec(t)||r.exec(t),i){var s=i[1];return{year:parseInt(s,10),restDateString:t.slice(s.length)}}if(i=Mt.YY.exec(t)||n.exec(t),i){var o=i[1];return{year:parseInt(o,10)*100,restDateString:t.slice(o.length)}}return{year:null}}function uz(t,e){if(e===null)return null;var n,r,i,s;if(t.length===0)return r=new Date(0),r.setUTCFullYear(e),r;if(n=Mt.MM.exec(t),n)return r=new Date(0),i=parseInt(n[1],10)-1,lE(e,i)?(r.setUTCFullYear(e,i),r):new Date(NaN);if(n=Mt.DDD.exec(t),n){r=new Date(0);var o=parseInt(n[1],10);return fz(e,o)?(r.setUTCFullYear(e,0,o),r):new Date(NaN)}if(n=Mt.MMDD.exec(t),n){r=new Date(0),i=parseInt(n[1],10)-1;var a=parseInt(n[2],10);return lE(e,i,a)?(r.setUTCFullYear(e,i,a),r):new Date(NaN)}if(n=Mt.Www.exec(t),n)return s=parseInt(n[1],10)-1,uE(e,s)?aE(e,s):new Date(NaN);if(n=Mt.WwwD.exec(t),n){s=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return uE(e,s,l)?aE(e,s,l):new Date(NaN)}return null}function cz(t){var e,n,r;if(e=Mt.HH.exec(t),e)return n=parseFloat(e[1].replace(",",".")),Xf(n)?n%24*Qf:NaN;if(e=Mt.HHMM.exec(t),e)return n=parseInt(e[1],10),r=parseFloat(e[2].replace(",",".")),Xf(n,r)?n%24*Qf+r*oE:NaN;if(e=Mt.HHMMSS.exec(t),e){n=parseInt(e[1],10),r=parseInt(e[2],10);var i=parseFloat(e[3].replace(",","."));return Xf(n,r,i)?n%24*Qf+r*oE+i*1e3:NaN}return null}function aE(t,e,n){e=e||0,n=n||0;var r=new Date(0);r.setUTCFullYear(t,0,4);var i=r.getUTCDay()||7,s=e*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}var dz=[31,28,31,30,31,30,31,31,30,31,30,31],hz=[31,29,31,30,31,30,31,31,30,31,30,31];function GC(t){return t%400===0||t%4===0&&t%100!==0}function lE(t,e,n){if(e<0||e>11)return!1;if(n!=null){if(n<1)return!1;var r=GC(t);if(r&&n>hz[e]||!r&&n>dz[e])return!1}return!0}function fz(t,e){if(e<1)return!1;var n=GC(t);return!(n&&e>366||!n&&e>365)}function uE(t,e,n){return!(e<0||e>52||n!=null&&(n<0||n>6))}function Xf(t,e,n){return!(t!=null&&(t<0||t>=25)||e!=null&&(e<0||e>=60)||n!=null&&(n<0||n>=60))}var pz=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function mz(t,e,n){var r=String(e),i=n||{},s=r.match(pz);if(s){var o=HC(i.originalDate||t,i);r=s.reduce(function(a,l){if(l[0]==="'")return a;var u=a.indexOf(l),d=a[u-1]==="'",h=a.replace(l,"'"+rz[l[0]](o,l,null,i)+"'");return d?h.substring(0,u-1)+h.substring(u+1):h},r)}return $B(t,r,i)}var vg={exports:{}},_g={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r,i){if(r==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s]);return r}t.exports=e.default})(_g,_g.exports);var gz=_g.exports;(function(t,e){var n=Oe.default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var r=n(gz);function i(s){return(0,r.default)({},s)}t.exports=e.default})(vg,vg.exports);var yz=vg.exports;const vz=Ul(yz);function _z(t,e,n){var r=HC(t,n),i=Xv(e,r,!0),s=new Date(r.getTime()-i),o=new Date(0);return o.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),o.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),o}function wz(t,e,n,r){var i=vz(r);return i.timeZone=e,i.originalDate=t,mz(_z(t,e),n,i)}function Tz(){const{matchId:t}=SN(),[e,n]=V.useState([]),[r,i]=V.useState(""),[s,o]=V.useState(null),[a,l]=V.useState(!0),[u,d]=V.useState(!1),[h,f]=V.useState(!1),{user:y}=Mi(),T=kr(),b=V.useRef(null);V.useEffect(()=>{if(!t)return;I();const k=Ae.subscribeToMessages(t,M=>{n(M),l(!1)});return()=>{k()}},[t]),V.useEffect(()=>{g()},[e]);const I=async()=>{try{const M=(await ve.getMatches()).find(S=>S.id===t);o(M||null)}catch(k){X.error("Failed to load match",k,{matchId:t})}},w=async k=>{if(k.preventDefault(),!t)return;const{validateMessage:M}=await Sl(async()=>{const{validateMessage:R}=await Promise.resolve().then(()=>fP);return{validateMessage:R}},void 0),S=M(r);if(!S.valid){alert(S.error||"Invalid message");return}const{filterContent:x}=await Sl(async()=>{const{filterContent:R}=await import("./contentFilter-C-vfEqmQ.js");return{filterContent:R}},[]),C=x(r.trim());if(C.isBlocked){alert(`Message blocked: ${C.reason||"Contains inappropriate content"}`);return}try{await ve.sendMessage(t,C.filtered),i("")}catch(R){alert(R.message||"Failed to send message. Please try again.")}},g=()=>{var k;(k=b.current)==null||k.scrollIntoView({behavior:"smooth"})},v=async k=>{if(!s||!y)return;const M=s.user1_id===y.id?s.user2_id:s.user1_id;try{const S=await ve.reportUser(M,k);alert(S.message||`User reported for: ${k}. Our team will review within 24 hours.`),f(!1),d(!1)}catch(S){X.error("Failed to report user",S,{reportedUserId:M,reason:k}),alert(S.message||"Failed to submit report. Please try again.")}},E=async()=>{if(!s||!y||!confirm("Are you sure you want to block this user? You will no longer see their messages or profile."))return;const k=s.user1_id===y.id?s.user2_id:s.user1_id;try{const M=await ve.blockUser(k);alert(M.message||"User blocked successfully."),d(!1),T("/matches")}catch(M){X.error("Failed to block user",M,{blockedUserId:k}),alert(M.message||"Failed to block user. Please try again.")}};return a?m.jsx("div",{className:"flex items-center justify-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):m.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-icy-100 via-white to-icy-200 page-with-nav relative",children:[m.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border-b border-icy-200 px-4 py-3 flex items-center gap-3 relative z-10",children:[m.jsx("button",{onClick:()=>T("/matches"),className:"text-gray-600 hover:text-gray-900",children:m.jsx(gh,{className:"w-6 h-6"})}),s&&m.jsxs(m.Fragment,{children:[m.jsx("img",{src:s.photos[0]||"https://via.placeholder.com/40",alt:s.name,className:"w-10 h-10 rounded-full object-cover"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h2",{className:"font-semibold text-dark",children:s.name}),m.jsx("p",{className:"text-xs text-gray-500",children:"Match"})]}),m.jsxs("div",{className:"relative z-50",children:[m.jsx("button",{onClick:()=>d(!u),className:"p-2 hover:bg-gray-100 rounded-full transition relative z-50",children:m.jsx(DU,{className:"w-5 h-5 text-gray-600"})}),u&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)}),m.jsxs("div",{className:"absolute right-0 top-12 bg-white rounded-lg shadow-xl border border-gray-200 py-2 w-48 z-50",children:[m.jsxs("button",{onClick:()=>{f(!0),d(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center gap-2 text-gray-700",children:[m.jsx(AU,{className:"w-4 h-4"}),"Report User"]}),m.jsxs("button",{onClick:E,className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center gap-2 text-red-600",children:[m.jsx(IU,{className:"w-4 h-4"}),"Block User"]})]})]})]})]})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-4 relative z-0",children:[e.length===0?m.jsxs("div",{className:"text-center text-gray-500 mt-12",children:[m.jsx(aP,{className:"w-10 h-10 mx-auto mb-3 text-primary animate-sparkle"}),m.jsx("p",{children:"No messages yet. Say hi!"})]}):e.map(k=>m.jsx(xz,{message:k,isOwn:k.sender_id===(y==null?void 0:y.id)},k.id)),m.jsx("div",{ref:b})]}),m.jsx("div",{className:"bg-white/90 backdrop-blur-sm border-t border-icy-200 px-4 py-3 relative z-10",children:m.jsxs("form",{onSubmit:w,className:"flex gap-2",children:[m.jsx("input",{type:"text",value:r,onChange:k=>i(k.target.value),placeholder:"Type a message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),m.jsx("button",{type:"submit",disabled:!r.trim(),className:"w-10 h-10 bg-primary text-white rounded-full flex items-center justify-center hover:bg-primary/90 transition disabled:opacity-50 disabled:cursor-not-allowed",children:m.jsx(oP,{className:"w-5 h-5"})})]})}),h&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full",children:[m.jsx("h3",{className:"text-xl font-bold text-dark mb-4",children:"Report User"}),m.jsx("p",{className:"text-gray-600 mb-4",children:"Please select a reason for reporting this user. All reports are reviewed within 24 hours."}),m.jsx("div",{className:"space-y-2 mb-6",children:["Harassment or bullying","Inappropriate content","Spam or solicitation","Fake profile","Offensive language","Other safety concern"].map(k=>m.jsx("button",{onClick:()=>v(k),className:"w-full text-left px-4 py-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition",children:k},k))}),m.jsx("button",{onClick:()=>f(!1),className:"w-full py-2 text-gray-600 hover:text-gray-900",children:"Cancel"})]})})]})}function xz({message:t,isOwn:e}){const r=wz(new Date(t.created_at),"America/New_York","h:mm a");return m.jsx("div",{className:`flex ${e?"justify-end":"justify-start"}`,children:m.jsxs("div",{className:`max-w-[70%] ${e?"order-2":"order-1"}`,children:[!e&&m.jsx("p",{className:"text-xs text-gray-500 mb-1 px-3",children:t.sender_name}),m.jsxs("div",{className:"flex items-end gap-1",children:[m.jsx("div",{className:`px-4 py-2 rounded-2xl ${e?"bg-primary text-white rounded-br-sm":"bg-white text-dark rounded-bl-sm"}`,children:m.jsx("p",{children:t.content})}),e&&m.jsx("span",{className:"text-xs",children:t.read?"":""})]}),m.jsx("p",{className:"text-xs text-gray-400 mt-1 px-3",children:r})]})})}var ts;(function(t){t.Prompt="PROMPT",t.Camera="CAMERA",t.Photos="PHOTOS"})(ts||(ts={}));var sl;(function(t){t.Rear="REAR",t.Front="FRONT"})(sl||(sl={}));var wg;(function(t){t.Uri="uri",t.Base64="base64",t.DataUrl="dataUrl"})(wg||(wg={}));class Ez extends Ny{async getPhoto(e){return new Promise(async(n,r)=>{if(e.webUseInput||e.source===ts.Photos)this.fileInputExperience(e,n,r);else if(e.source===ts.Prompt){let i=document.querySelector("pwa-action-sheet");i||(i=document.createElement("pwa-action-sheet"),document.body.appendChild(i)),i.header=e.promptLabelHeader||"Photo",i.cancelable=!1,i.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],i.addEventListener("onSelection",async s=>{s.detail===0?this.fileInputExperience(e,n,r):this.cameraExperience(e,n,r)})}else this.cameraExperience(e,n,r)})}async pickImages(e){return new Promise(async(n,r)=>{this.multipleFileInputExperience(n,r)})}async cameraExperience(e,n,r){if(customElements.get("pwa-camera-modal")){const i=document.createElement("pwa-camera-modal");i.facingMode=e.direction===sl.Front?"user":"environment",document.body.appendChild(i);try{await i.componentOnReady(),i.addEventListener("onPhoto",async s=>{const o=s.detail;o===null?r(new go("User cancelled photos app")):o instanceof Error?r(o):n(await this._getCameraPhoto(o,e)),i.dismiss(),document.body.removeChild(i)}),i.present()}catch{this.fileInputExperience(e,n,r)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(e,n,r)}fileInputExperience(e,n,r){let i=document.querySelector("#_capacitor-camera-input");const s=()=>{var o;(o=i.parentNode)===null||o===void 0||o.removeChild(i)};i||(i=document.createElement("input"),i.id="_capacitor-camera-input",i.type="file",i.hidden=!0,document.body.appendChild(i),i.addEventListener("change",o=>{const a=i.files[0];let l="jpeg";if(a.type==="image/png"?l="png":a.type==="image/gif"&&(l="gif"),e.resultType==="dataUrl"||e.resultType==="base64"){const u=new FileReader;u.addEventListener("load",()=>{if(e.resultType==="dataUrl")n({dataUrl:u.result,format:l});else if(e.resultType==="base64"){const d=u.result.split(",")[1];n({base64String:d,format:l})}s()}),u.readAsDataURL(a)}else n({webPath:URL.createObjectURL(a),format:l}),s()}),i.addEventListener("cancel",o=>{r(new go("User cancelled photos app")),s()})),i.accept="image/*",i.capture=!0,e.source===ts.Photos||e.source===ts.Prompt?i.removeAttribute("capture"):e.direction===sl.Front?i.capture="user":e.direction===sl.Rear&&(i.capture="environment"),i.click()}multipleFileInputExperience(e,n){let r=document.querySelector("#_capacitor-camera-input-multiple");const i=()=>{var s;(s=r.parentNode)===null||s===void 0||s.removeChild(r)};r||(r=document.createElement("input"),r.id="_capacitor-camera-input-multiple",r.type="file",r.hidden=!0,r.multiple=!0,document.body.appendChild(r),r.addEventListener("change",s=>{const o=[];for(let a=0;a<r.files.length;a++){const l=r.files[a];let u="jpeg";l.type==="image/png"?u="png":l.type==="image/gif"&&(u="gif"),o.push({webPath:URL.createObjectURL(l),format:u})}e({photos:o}),i()}),r.addEventListener("cancel",s=>{n(new go("User cancelled photos app")),i()})),r.accept="image/*",r.click()}_getCameraPhoto(e,n){return new Promise((r,i)=>{const s=new FileReader,o=e.type.split("/")[1];n.resultType==="uri"?r({webPath:URL.createObjectURL(e),format:o,saved:!1}):(s.readAsDataURL(e),s.onloadend=()=>{const a=s.result;n.resultType==="dataUrl"?r({dataUrl:a,format:o,saved:!1}):r({base64String:a.split(",")[1],format:o,saved:!1})},s.onerror=a=>{i(a)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const Iz=Xl("Camera",{web:()=>new Ez});function Sz({photos:t,onPhotosChange:e,maxPhotos:n=6}){const[r,i]=V.useState(!1),s=async u=>{if(u.webPath)try{const d=await fetch(u.webPath);if(!d.ok)throw new Error(`Failed to fetch image: ${d.status}`);const h=await d.blob(),f=u.webPath.split("/").pop()||"photo.jpg";return new File([h],f,{type:h.type||"image/jpeg"})}catch(d){throw X.error("Failed to fetch image from webPath",d),d}throw new Error("No valid image path found")},o=async()=>{var u;try{if(i(!0),X.info("Starting photo upload process"),tr.isNativePlatform()){const d=await Iz.getPhoto({quality:90,allowEditing:!0,resultType:wg.Base64,source:ts.Prompt}),h=d.base64String||((u=d.dataUrl)==null?void 0:u.split(",")[1]);if(h)try{const f=atob(h),y=new Array(f.length);for(let k=0;k<f.length;k++)y[k]=f.charCodeAt(k);const T=new Uint8Array(y),b=d.format==="png"?"image/png":"image/jpeg",I=new Blob([T],{type:b}),w=d.format||"jpg",g=new File([I],`photo.${w}`,{type:b});X.info("Photo converted to File, uploading...",{fileSize:g.size,fileType:g.type});const v=await ve.uploadPhotos([g]),E=t.length===0?[...v.photos]:[...t,...v.photos];e(E)}catch(f){throw X.error("Failed to convert base64 to File",f,{hasBase64:!!h}),new Error("Failed to process photo. Please try again.")}else if(d.webPath){X.warn("base64String not found, trying webPath fallback");try{const f=await s(d),y=await ve.uploadPhotos([f]),T=t.length===0?[...y.photos]:[...t,...y.photos];e(T)}catch(f){throw X.error("Failed to use webPath fallback",f),new Error("Failed to process photo. Please try again.")}}else throw X.error("No image data found",new Error("No base64String or webPath in image response")),new Error("No image data received from camera.")}else{const d=document.createElement("input");d.type="file",d.accept="image/*",d.multiple=!0,d.onchange=async h=>{const f=Array.from(h.target.files||[]);if(f.length>0){const y=n-t.length,T=f.slice(0,y);try{const b=await ve.uploadPhotos(T),I=t.length===0?[...b.photos]:[...t,...b.photos];e(I)}catch(b){X.error("Failed to upload photos",b),alert("Failed to upload photos. Please try again.")}}},d.click()}}catch(d){X.error("Failed to add photo",d),alert("Failed to add photo. Please try again.")}finally{i(!1)}},a=async u=>{const d=t[u];if(d.startsWith("/uploads/")){const h=d.split("/").pop();if(h)try{await ve.deletePhoto(h)}catch(f){X.error("Failed to delete photo from server",f,{photoUrl:d})}}e(t.filter((h,f)=>f!==u))},l=u=>{if(u===0)return;const d=[...t],[h]=d.splice(u,1);d.unshift(h),e(d)};return m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Photos (",t.length,"/",n,")"]}),m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[t.map((u,d)=>m.jsxs("div",{className:"relative aspect-square bg-gray-100 rounded-lg overflow-hidden group cursor-pointer",onClick:()=>l(d),title:d===0?"Profile picture":"Click to set as profile picture",children:[m.jsx("img",{src:wU(u),alt:`Photo ${d+1}`,className:"w-full h-full object-cover"}),m.jsx("button",{onClick:h=>{h.stopPropagation(),a(d)},className:"absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition z-10",children:m.jsx(Mo,{className:"w-4 h-4"})}),d===0&&m.jsx("div",{className:"absolute top-1 left-1 bg-primary text-white text-xs px-2 py-0.5 rounded font-semibold",children:"Profile"}),m.jsx("div",{className:"absolute bottom-1 left-1 bg-black/50 text-white text-xs px-2 py-0.5 rounded",children:d+1})]},d)),t.length<n&&m.jsx("button",{onClick:o,disabled:r,className:"aspect-square bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 flex flex-col items-center justify-center gap-2 hover:border-primary hover:bg-primary/5 transition disabled:opacity-50",children:r?m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}):m.jsxs(m.Fragment,{children:[m.jsx(SU,{className:"w-8 h-8 text-gray-400"}),m.jsx(VU,{className:"w-5 h-5 text-gray-400"})]})})]}),m.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Tap to add up to ",n," photos. The first photo is your profile picture. Click any photo to set it as your profile picture."]})]})}function bz(){const{user:t,logout:e,updateUser:n}=Mi(),[r,i]=V.useState(!1),[s,o]=V.useState(!1),[a,l]=V.useState({name:(t==null?void 0:t.name)||"",age:(t==null?void 0:t.age)||18,bio:(t==null?void 0:t.bio)||"",location:(t==null?void 0:t.location)||"",photos:(t==null?void 0:t.photos)||[]}),[u,d]=V.useState({age_min:(t==null?void 0:t.age_min)||18,age_max:(t==null?void 0:t.age_max)||99,distance_max:(t==null?void 0:t.distance_max)||50}),[h,f]=V.useState(!1),[y,T]=V.useState(!1),[b,I]=V.useState(!1),[w,g]=V.useState({matches:0,profileViews:0,likes:0}),v=kr();if(V.useEffect(()=>{if(!t)return;l({name:t.name||"",age:t.age||18,bio:t.bio||"",location:t.location||"",photos:t.photos||[]}),(async()=>{try{const N=await ve.getUserStats();g(N)}catch(N){X.error("Failed to load user stats",N)}})()},[t]),!t)return null;const E=async()=>{try{f(!0);const R=await ve.updateProfile(a);n(R),i(!1)}catch(R){X.error("Failed to update profile",R),alert("Failed to update profile. Please try again.")}finally{f(!1)}},k=()=>{l({name:t.name,age:t.age,bio:t.bio||"",location:t.location||"",photos:t.photos||[]}),i(!1)},M=async()=>{try{T(!0);const R=await ve.updateProfile(u);n(R),o(!1)}catch(R){X.error("Failed to update filters",R),alert("Failed to update filters. Please try again.")}finally{T(!1)}},S=()=>{d({age_min:t.age_min||18,age_max:t.age_max||99,distance_max:t.distance_max||50}),o(!1)},x=async()=>{try{X.info("Logout initiated"),await e(),X.info("Logout completed, navigating to login"),tr.isNativePlatform()?window.location.href="/login":v("/login",{replace:!0})}catch(R){X.error("Logout failed",R),tr.isNativePlatform()?window.location.href="/login":v("/login",{replace:!0})}},C=async()=>{if(window.confirm("Deleting your account will permanently remove your matches, messages, and profile. This action cannot be undone. Do you want to continue?"))try{I(!0),await ve.deleteAccount(),e(),v("/register")}catch(N){X.error("Failed to delete account",N),alert("Failed to delete account. Please try again.")}finally{I(!1)}};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-icy-100 via-white to-icy-200 page-with-nav pb-8 px-4 relative",children:m.jsxs("div",{className:"max-w-2xl mx-auto relative z-10",children:[m.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg overflow-hidden border border-icy-200",children:[m.jsxs("div",{className:"bg-gradient-to-r from-icy-400 via-icy-500 to-icy-600 p-6 text-white relative overflow-hidden",children:[m.jsx(aP,{className:"absolute top-2 right-2 w-8 h-8 text-white/30 animate-sparkle"}),m.jsxs("div",{className:"relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsx("h1",{className:"text-2xl font-bold",children:"My Profile"}),m.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-white/20 rounded-lg hover:bg-white/30 transition",children:[m.jsx(RU,{className:"w-4 h-4"}),"Logout"]})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center",children:m.jsx(Fs,{className:"w-10 h-10"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold",children:t.name}),m.jsx("p",{className:"text-white/80",children:t.email})]})]})]})]}),m.jsx("div",{className:"p-6 space-y-6",children:r?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-2",children:m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"The Basics"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),m.jsx("input",{type:"text",value:a.name,onChange:R=>l({...a,name:R.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age"}),m.jsx("input",{type:"number",value:a.age,onChange:R=>l({...a,age:parseInt(R.target.value)}),min:"18",max:"100",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),m.jsx("input",{type:"text",value:a.location,onChange:R=>l({...a,location:R.target.value}),placeholder:"New York, NY",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"About Me (500 characters max)"}),m.jsx("textarea",{value:a.bio,onChange:R=>l({...a,bio:R.target.value}),rows:4,maxLength:500,placeholder:"Tell us about yourself...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent outline-none resize-none"}),m.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.bio.length,"/500"]})]}),m.jsx(Sz,{photos:a.photos,onPhotosChange:R=>l({...a,photos:R})})]})]})}),m.jsxs("div",{className:"flex gap-3",children:[m.jsxs("button",{onClick:k,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition",children:[m.jsx(Mo,{className:"w-5 h-5"}),"Cancel"]}),m.jsxs("button",{onClick:E,disabled:h,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-primary text-white rounded-lg font-semibold hover:bg-primary/90 transition disabled:opacity-50",children:[m.jsx(GT,{className:"w-5 h-5"}),h?"Saving...":"Save"]})]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-3",children:"The Basics"}),m.jsx(Wi,{icon:m.jsx(Fs,{className:"w-5 h-5"}),label:"Name",value:`${t.name}, ${t.age}`}),m.jsx(Wi,{icon:m.jsx(Fs,{className:"w-5 h-5"}),label:"Gender",value:t.gender}),t.location&&m.jsx(Wi,{icon:m.jsx(Do,{className:"w-5 h-5"}),label:"Location",value:t.location}),t.bio&&m.jsx(Wi,{icon:m.jsx(Tv,{className:"w-5 h-5"}),label:"About Me",value:t.bio}),m.jsx(Wi,{icon:m.jsx(Fs,{className:"w-5 h-5"}),label:"Interested In",value:t.interested_in.join(", ")})]}),m.jsxs("button",{onClick:()=>i(!0),className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-primary text-white rounded-lg font-semibold hover:bg-primary/90 transition",children:[m.jsx(MU,{className:"w-5 h-5"}),"Edit Profile"]})]})})]}),m.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[m.jsx(Jf,{label:"Matches",value:w.matches}),m.jsx(Jf,{label:"Profile Views",value:w.profileViews}),m.jsx(Jf,{label:"Likes",value:w.likes})]}),m.jsxs("div",{className:"mt-6 bg-white rounded-2xl shadow-lg overflow-hidden",children:[m.jsxs("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 p-4 flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-primary/20 rounded-full flex items-center justify-center",children:m.jsx(OU,{className:"w-5 h-5 text-primary"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold text-dark",children:"Discovery Preferences"}),m.jsx("p",{className:"text-xs text-gray-600",children:"Who you want to see"})]})]}),!s&&m.jsx("button",{onClick:()=>o(!0),className:"px-3 py-1.5 bg-primary text-white text-sm rounded-lg hover:bg-primary/90 transition",children:"Edit"})]}),m.jsx("div",{className:"p-6",children:s?m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-semibold text-dark mb-3",children:["Age Range: ",u.age_min," - ",u.age_max]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Minimum Age"}),m.jsx("input",{type:"range",min:"18",max:"99",value:u.age_min,onChange:R=>{const N=parseInt(R.target.value);d({...u,age_min:N}),N>u.age_max&&d({...u,age_min:N,age_max:N})},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-xs text-gray-600 mb-1 block",children:"Maximum Age"}),m.jsx("input",{type:"range",min:"18",max:"99",value:u.age_max,onChange:R=>{const N=parseInt(R.target.value);d({...u,age_max:N}),N<u.age_min&&d({...u,age_min:N,age_max:N})},className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary"})]})]})]}),m.jsxs("div",{children:[m.jsxs("label",{className:"block text-sm font-semibold text-dark mb-3",children:["Maximum Distance: ",u.distance_max===100?"100+":u.distance_max," miles"]}),m.jsx("input",{type:"range",min:"1",max:"100",value:u.distance_max,onChange:R=>d({...u,distance_max:parseInt(R.target.value)}),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary"}),m.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[m.jsx("span",{children:"1 mi"}),m.jsx("span",{children:"100+ mi"})]})]}),m.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:m.jsxs("p",{className:"text-xs text-blue-800",children:[m.jsx("strong",{children:"Note:"})," Distance filtering requires location services. If location is not available, all users within your age range will be shown."]})}),m.jsxs("div",{className:"flex gap-3",children:[m.jsxs("button",{onClick:S,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-50 transition",children:[m.jsx(Mo,{className:"w-5 h-5"}),"Cancel"]}),m.jsxs("button",{onClick:M,disabled:y,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-primary text-white rounded-lg font-semibold hover:bg-primary/90 transition disabled:opacity-50",children:[m.jsx(GT,{className:"w-5 h-5"}),y?"Saving...":"Save"]})]})]}):m.jsxs("div",{className:"space-y-3",children:[m.jsx(Wi,{icon:m.jsx(Fs,{className:"w-5 h-5"}),label:"Age Range",value:`${t.age_min||18} - ${t.age_max||99} years old`}),m.jsx(Wi,{icon:m.jsx(Do,{className:"w-5 h-5"}),label:"Maximum Distance",value:`${t.distance_max||50} miles`})]})})]}),m.jsxs("div",{className:"mt-8",children:[m.jsx("button",{onClick:C,disabled:b,className:"w-full px-6 py-3 border-2 border-red-500 text-red-600 rounded-lg font-semibold hover:bg-red-50 transition disabled:opacity-50",children:b?"Deleting account...":"Delete Account"}),m.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Required for App Store approval: permanently removes your data."})]})]})})}function Wi({icon:t,label:e,value:n}){return m.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-lg",children:[m.jsx("div",{className:"text-primary mt-0.5",children:t}),m.jsxs("div",{className:"flex-1",children:[m.jsx("p",{className:"text-sm text-gray-500 mb-1",children:e}),m.jsx("p",{className:"text-dark font-medium capitalize",children:n})]})]})}function Jf({label:t,value:e}){return m.jsxs("div",{className:"bg-white rounded-lg shadow p-4 text-center",children:[m.jsx("p",{className:"text-2xl font-bold text-primary",children:e}),m.jsx("p",{className:"text-sm text-gray-600",children:t})]})}const $t=[{id:"life-1",category:"life-direction",question:"Where do you see your life in 510 years?",whyThisMatters:"Reveals long-term alignment, ambition level, and future pacing.",order:1},{id:"life-2",category:"life-direction",question:"What values guide your everyday decisions?",whyThisMatters:"Reveals long-term alignment, ambition level, and future pacing.",order:2},{id:"life-3",category:"life-direction",question:'What does "success" mean to you?',whyThisMatters:"Reveals long-term alignment, ambition level, and future pacing.",order:3},{id:"life-4",category:"life-direction",question:"How important are family and legacy to you?",whyThisMatters:"Reveals long-term alignment, ambition level, and future pacing.",order:4},{id:"life-5",category:"life-direction",question:"What kind of life do you want to build with a partner?",whyThisMatters:"Reveals long-term alignment, ambition level, and future pacing.",order:5},{id:"emotional-1",category:"emotional-readiness",question:"What did your last relationship teach you?",whyThisMatters:"Screens for maturity, accountability, and healing stage.",order:6},{id:"emotional-2",category:"emotional-readiness",question:"Why are you ready for a committed relationship now?",whyThisMatters:"Screens for maturity, accountability, and healing stage.",order:7},{id:"emotional-3",category:"emotional-readiness",question:"How do you handle conflict when emotions are high?",whyThisMatters:"Screens for maturity, accountability, and healing stage.",order:8},{id:"emotional-4",category:"emotional-readiness",question:"What personal patterns are you actively working on?",whyThisMatters:"Screens for maturity, accountability, and healing stage.",order:9},{id:"emotional-5",category:"emotional-readiness",question:"What does emotional safety mean to you?",whyThisMatters:"Screens for maturity, accountability, and healing stage.",order:10},{id:"connection-1",category:"connection-communication",question:"How do you give and receive affection?",whyThisMatters:"Identifies love language, communication style, and repair skills.",order:11},{id:"connection-2",category:"connection-communication",question:"What helps you feel understood?",whyThisMatters:"Identifies love language, communication style, and repair skills.",order:12},{id:"connection-3",category:"connection-communication",question:"How do you communicate disappointment or frustration?",whyThisMatters:"Identifies love language, communication style, and repair skills.",order:13},{id:"connection-4",category:"connection-communication",question:"What makes you feel valued in a relationship?",whyThisMatters:"Identifies love language, communication style, and repair skills.",order:14},{id:"connection-5",category:"connection-communication",question:"How do you repair after conflict?",whyThisMatters:"Identifies love language, communication style, and repair skills.",order:15},{id:"lifestyle-1",category:"lifestyle-alignment",question:"Describe your ideal weekday and weekend.",whyThisMatters:"Prevents friction around pace, habits, and priorities.",order:16},{id:"lifestyle-2",category:"lifestyle-alignment",question:"How do you balance work, relationships, and rest?",whyThisMatters:"Prevents friction around pace, habits, and priorities.",order:17},{id:"lifestyle-3",category:"lifestyle-alignment",question:"What routines are essential to your well-being?",whyThisMatters:"Prevents friction around pace, habits, and priorities.",order:18},{id:"lifestyle-4",category:"lifestyle-alignment",question:"How do you approach money and planning?",whyThisMatters:"Prevents friction around pace, habits, and priorities.",order:19},{id:"lifestyle-5",category:"lifestyle-alignment",question:"How do you feel about travel, change, and spontaneity?",whyThisMatters:"Prevents friction around pace, habits, and priorities.",order:20},{id:"commitment-1",category:"commitment-vision",question:"What does commitment mean to you?",whyThisMatters:"Clarifies expectations and relationship goals.",order:21},{id:"commitment-2",category:"commitment-vision",question:"What does a healthy partnership require from both people?",whyThisMatters:"Clarifies expectations and relationship goals.",order:22},{id:"commitment-3",category:"commitment-vision",question:"How do you envision growing together?",whyThisMatters:"Clarifies expectations and relationship goals.",order:23},{id:"commitment-4",category:"commitment-vision",question:"What would make you proud of your relationship long-term?",whyThisMatters:"Clarifies expectations and relationship goals.",order:24},{id:"commitment-5",category:"commitment-vision",question:"What are you still working on that could affect a partnership?",whyThisMatters:"Clarifies expectations and relationship goals.",order:25}],Zf={"life-direction":{title:"Life Direction",subtitle:"Who You're Becoming"},"emotional-readiness":{title:"Emotional Readiness",subtitle:"Are You Prepared?"},"connection-communication":{title:"Connection & Communication",subtitle:"How You Love"},"lifestyle-alignment":{title:"Lifestyle & Alignment",subtitle:"How You Live"},"commitment-vision":{title:"Commitment Vision",subtitle:"What You're Building"}};function Pz(){const{user:t}=Mi(),e=kr(),[n,r]=V.useState([]),[i,s]=V.useState(""),[o,a]=V.useState(0),[l,u]=V.useState(new Map),[d,h]=V.useState(!1),f=V.useRef(null),[y,T]=V.useState(!0),b=o<$t.length?$t[o]:null;V.useEffect(()=>{I()},[t]),V.useEffect(()=>{w()},[n,i]);const I=async()=>{var k;if(!(!t||!t.id)){T(!0);try{const M=localStorage.getItem("known_token");if(!M){X.error("No auth token found"),T(!1);return}const x=`https://firestore.googleapis.com/v1/projects/known-dating-e5f04/databases/(default)/documents/compatibility/${t.id}`,C=await fetch(x,{method:"GET",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"}}),R=[],N=new Map;if(C.ok){const A=await C.json();if(A.fields){const G={};for(const[Y,Z]of Object.entries(A.fields)){const re=Z;re.stringValue!==void 0?G[Y]=re.stringValue:re.integerValue!==void 0?G[Y]=parseInt(re.integerValue):re.doubleValue!==void 0?G[Y]=parseFloat(re.doubleValue):re.booleanValue!==void 0?G[Y]=re.booleanValue:re.arrayValue!==void 0?G[Y]=((k=re.arrayValue.values)==null?void 0:k.map(F=>{if(F.mapValue){const z={};for(const[$,Q]of Object.entries(F.mapValue.fields||{})){const ie=Q;ie.stringValue!==void 0?z[$]=ie.stringValue:ie.integerValue!==void 0?z[$]=parseInt(ie.integerValue):ie.doubleValue!==void 0?z[$]=parseFloat(ie.doubleValue):ie.booleanValue!==void 0?z[$]=ie.booleanValue:ie.timestampValue!==void 0&&(z[$]=ie.timestampValue)}return z}return F.stringValue||F.integerValue||F.doubleValue||F.booleanValue||null}))||[]:re.timestampValue!==void 0?G[Y]=re.timestampValue:re.nullValue!==void 0&&(G[Y]=null)}if(G.answers){let Y=null;$t.forEach(Z=>{const re=G.answers.find(F=>F.questionId===Z.id);if(re){if(Z.category!==Y){const F=Zf[Z.category];R.push({type:"category",content:`${F.title} - ${F.subtitle}`,category:Z.category,timestamp:new Date}),Y=Z.category}R.push({type:"question",content:Z.question,questionId:Z.id,timestamp:new Date}),N.set(Z.id,re.answer),R.push({type:"answer",content:re.answer,questionId:Z.id,timestamp:new Date})}})}}}else if(C.status===404)X.info("No existing compatibility profile found - new user");else{const A=await C.text();throw new Error(`Firestore error: ${C.status} - ${A}`)}r(R),u(N);const D=$t.findIndex(A=>!N.has(A.id));if(D===-1)e("/matches");else{const A=$t[D],G=D>0?$t[D-1]:null;if(!G||A.category!==G.category){const Y=Zf[A.category];R.push({type:"category",content:`${Y.title} - ${Y.subtitle}`,category:A.category,timestamp:new Date})}R.push({type:"question",content:A.question,questionId:A.id,timestamp:new Date}),r(R),a(D)}}catch(M){X.error("Failed to load compatibility answers",M)}finally{T(!1)}}},w=()=>{var k;(k=f.current)==null||k.scrollIntoView({behavior:"smooth"})},g=async()=>{if(!i.trim()||!b||d)return;const{validateCompatibilityAnswer:k}=await Sl(async()=>{const{validateCompatibilityAnswer:C}=await Promise.resolve().then(()=>fP);return{validateCompatibilityAnswer:C}},void 0),M=k(i.trim());if(!M.valid){alert(M.error||"Please provide a more detailed answer");return}const S=i.trim();h(!0);const x={type:"answer",content:S,questionId:b.id,timestamp:new Date};r(C=>[...C,x]),u(C=>new Map(C).set(b.id,S)),s("");try{if(!t||!t.id)return;const C=localStorage.getItem("known_token");if(!C)throw new Error("No auth token found");const R=new Map(l);R.set(b.id,S);const N=Array.from(R.entries()).map(([$,Q])=>({questionId:$,answer:Q,answeredAt:new Date().toISOString()})),D=new Set;$t.forEach($=>{const Q=$t.filter(We=>We.category===$.category);Q.filter(We=>R.has(We.id)).length===Q.length&&D.add($.category)});const G=`https://firestore.googleapis.com/v1/projects/known-dating-e5f04/databases/(default)/documents/compatibility/${t.id}`,Y={arrayValue:{values:N.map($=>({mapValue:{fields:{questionId:{stringValue:$.questionId},answer:{stringValue:$.answer},answeredAt:{stringValue:$.answeredAt}}}}))}},Z={arrayValue:{values:Array.from(D).map($=>({stringValue:$}))}},re={fields:{userId:{stringValue:t.id},answers:Y,completedCategories:Z,lastUpdated:{timestampValue:new Date().toISOString()}}},F=await fetch(G,{method:"PATCH",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"},body:JSON.stringify(re)});if(!F.ok){const $=await F.text();throw new Error(`Failed to save answer: ${F.status} - ${$}`)}const z=o+1;if(z<$t.length){const $=$t[z],Q=$t[o];if($.category!==Q.category){const ie=Zf[$.category];r(We=>[...We,{type:"category",content:`${ie.title} - ${ie.subtitle}`,category:$.category,timestamp:new Date}])}setTimeout(()=>{r(ie=>[...ie,{type:"question",content:$.question,questionId:$.id,timestamp:new Date}]),a(z),h(!1)},800)}else h(!1),setTimeout(()=>{e("/matches")},1500)}catch(C){X.error("Failed to save compatibility answer",C,{questionId:b.id}),h(!1),alert("Failed to save answer. Please try again.")}},E=(()=>{const k=$t.length,M=l.size;return{answered:M,total:k,percentage:M/k*100}})();return y?m.jsx("div",{className:"flex items-center justify-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):!b&&l.size===$t.length?m.jsx("div",{className:"flex items-center justify-center h-screen",children:m.jsxs("div",{className:"text-center",children:[m.jsx(bU,{className:"w-16 h-16 text-primary mx-auto mb-4"}),m.jsx("h2",{className:"text-2xl font-bold text-dark mb-2",children:"All Questions Complete!"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"Your compatibility profile is ready."}),m.jsx("button",{onClick:()=>e("/matches"),className:"px-6 py-3 bg-primary text-white rounded-lg font-semibold hover:bg-primary/90 transition",children:"View Matches"})]})}):m.jsxs("div",{className:"flex flex-col h-screen bg-gradient-to-br from-icy-100 via-white to-icy-200",children:[m.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border-b border-icy-200 px-4 py-3 flex items-center gap-3 flex-shrink-0",children:[m.jsx("button",{onClick:()=>{confirm("Are you sure you want to leave? Your progress will be saved.")&&e("/matches")},className:"text-gray-600 hover:text-gray-900",children:m.jsx(gh,{className:"w-6 h-6"})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h1",{className:"font-bold text-dark text-lg",children:"Known Dating"}),m.jsxs("p",{className:"text-xs text-gray-500",children:[E.answered," of ",E.total," questions answered"]})]}),m.jsx("div",{className:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${E.percentage}%`}})})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-4",children:[n.map((k,M)=>{if(k.type==="category")return m.jsx("div",{className:"text-center my-6",children:m.jsxs("div",{className:"inline-block bg-primary/10 px-4 py-2 rounded-full",children:[m.jsx("p",{className:"text-sm font-semibold text-primary",children:k.content.split(" - ")[0]}),m.jsx("p",{className:"text-xs text-gray-600",children:k.content.split(" - ")[1]})]})},M);if(k.type==="question"){const S=$t.find(x=>x.id===k.questionId);return m.jsx("div",{className:"flex justify-start",children:m.jsx("div",{className:"max-w-[85%]",children:m.jsxs("div",{className:"bg-white rounded-2xl rounded-bl-sm px-6 py-4 shadow-sm",children:[m.jsx("p",{className:"text-dark text-base leading-relaxed mb-2",children:k.content}),S&&m.jsxs("p",{className:"text-xs text-gray-500 italic",children:["Why this matters: ",S.whyThisMatters]})]})})},M)}return k.type==="answer"?m.jsx("div",{className:"flex justify-end",children:m.jsx("div",{className:"max-w-[85%]",children:m.jsx("div",{className:"bg-primary text-white rounded-2xl rounded-br-sm px-6 py-4 shadow-sm",children:m.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:k.content})})})},M):null}),d&&m.jsx("div",{className:"flex justify-start",children:m.jsx("div",{className:"max-w-[85%]",children:m.jsx("div",{className:"bg-gray-100 rounded-2xl rounded-bl-sm px-6 py-4",children:m.jsxs("div",{className:"flex gap-1",children:[m.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),m.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),m.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})})}),m.jsx("div",{ref:f})]}),b&&!d&&m.jsx("div",{className:"bg-white/90 backdrop-blur-sm border-t border-icy-200 px-4 py-3 flex-shrink-0",children:m.jsxs("form",{onSubmit:k=>{k.preventDefault(),g()},className:"flex gap-2",children:[m.jsx("textarea",{value:i,onChange:k=>s(k.target.value),placeholder:"Share your thoughts...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none",rows:3,autoFocus:!0,onKeyDown:k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),g())}}),m.jsx("button",{type:"submit",disabled:!i.trim()||d,className:"w-12 h-12 bg-primary text-white rounded-lg flex items-center justify-center hover:bg-primary/90 transition disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0",children:m.jsx(oP,{className:"w-5 h-5"})})]})})]})}function Cz(){const t=kr();return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-white to-secondary/10 py-12 px-4",children:m.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-3xl shadow-xl p-10 space-y-8",children:[m.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-sm font-semibold text-primary hover:text-primary/80 transition",children:[m.jsx(gh,{className:"w-4 h-4"}),"Back"]}),m.jsxs("header",{className:"space-y-2",children:[m.jsx("p",{className:"text-sm font-semibold text-primary uppercase tracking-wide",children:"Known"}),m.jsx("h1",{className:"text-3xl font-bold text-dark",children:"Terms of Service"}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Last updated on ",new Date().toLocaleDateString()]})]}),m.jsxs("section",{className:"space-y-4 text-gray-700 text-base leading-relaxed",children:[m.jsx("p",{children:"Welcome to Known. By accessing or using our application, website, or associated services (collectively, the Services), you agree to be bound by these Terms of Service. If you do not agree, please discontinue use immediately."}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"1. Eligibility"}),m.jsx("p",{children:"You must be at least 18 years old to use the Services. By creating an account, you certify that you meet this requirement and that any information you provide is accurate and up to date."})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"2. Account Responsibilities"}),m.jsx("p",{children:"You are responsible for maintaining the confidentiality of your login credentials and for all activity that occurs under your account. Notify us promptly of any unauthorized use or security breach."})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"3. Acceptable Use & Zero Tolerance Policy"}),m.jsxs("p",{children:["You agree to use the Services lawfully and respectfully. ",m.jsx("strong",{children:"Known has zero tolerance for objectionable content or abusive behavior."})," Prohibited activities include:"]}),m.jsxs("ul",{className:"list-disc list-inside ml-4 mt-2 space-y-1",children:[m.jsx("li",{children:"Harassment, bullying, or threatening behavior"}),m.jsx("li",{children:"Hate speech, discrimination, or prejudiced content"}),m.jsx("li",{children:"Sexual exploitation, nudity, or pornographic content"}),m.jsx("li",{children:"Spam, solicitation, or commercial advertising"}),m.jsx("li",{children:"Impersonation or fraudulent representation"}),m.jsx("li",{children:"Violence, self-harm, or illegal activities"}),m.jsx("li",{children:"Sharing others' personal information without consent"})]}),m.jsxs("p",{className:"mt-2",children:[m.jsx("strong",{children:"Violations will result in immediate account suspension or termination."})," All reported content is reviewed within 24 hours, and offending users are permanently removed from the platform."]})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"4. Content Ownership"}),m.jsx("p",{children:"You retain ownership of content you upload but grant Known a non-exclusive, worldwide, royalty-free license to host, display, and share that content as necessary to operate the Services. We reserve the right to remove content that violates these Terms."})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"5. Termination"}),m.jsx("p",{children:"We may suspend or terminate access to the Services at our discretion if you violate these Terms or engage in unsafe behavior. You may also delete your account at any time using the in-app settings."})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"6. Disclaimer of Warranties"}),m.jsx("p",{children:"The Services are provided as is without warranties of any kind. We do not guarantee successful matches or uninterrupted availability. Use the platform at your own risk and exercise caution when interacting with other users."})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"7. Limitation of Liability"}),m.jsx("p",{children:"To the fullest extent permitted by law, Known is not liable for any indirect, incidental, or consequential damages arising from your use of the Services."})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"8. Changes to These Terms"}),m.jsx("p",{children:"We may update these Terms occasionally. Continued use of the Services after changes take effect constitutes acceptance of the revised Terms. We recommend reviewing this page periodically."})]})]}),m.jsxs("footer",{className:"border-t border-gray-200 pt-6 text-sm text-gray-600 space-y-2",children:[m.jsxs("p",{children:["Questions about these Terms? Contact us at"," ",m.jsx("a",{href:"mailto:support@known.app",className:"text-primary font-semibold",children:"support@known.app"}),"."]}),m.jsxs("p",{children:["Looking for our privacy practices? Read the"," ",m.jsx(mr,{to:"/privacy",className:"text-primary font-semibold hover:underline",children:"Privacy Policy"}),"."]})]})]})})}function Az(){const t=kr();return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-secondary/10 via-white to-primary/10 py-12 px-4",children:m.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-3xl shadow-xl p-10 space-y-8",children:[m.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-sm font-semibold text-secondary hover:text-secondary/80 transition",children:[m.jsx(gh,{className:"w-4 h-4"}),"Back"]}),m.jsxs("header",{className:"space-y-2",children:[m.jsx("p",{className:"text-sm font-semibold text-secondary uppercase tracking-wide",children:"Known"}),m.jsx("h1",{className:"text-3xl font-bold text-dark",children:"Privacy Policy"}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Last updated on ",new Date().toLocaleDateString()]})]}),m.jsxs("section",{className:"space-y-4 text-gray-700 text-base leading-relaxed",children:[m.jsx("p",{children:'This Privacy Policy explains how Known ("we", "us", or "our") collects, uses, and protects your personal information when you use our application, website, and related services (collectively, the Services). By using the Services, you consent to the data practices described here.'}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"1. Information We Collect"}),m.jsx("p",{children:"We collect information you provide directly, such as your name, email, age, location, profile details, and photos. We may also collect usage data, device information, and approximate location in order to personalize matches and improve the Services."})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"2. How We Use Your Information"}),m.jsx("p",{children:"We use your information to provide and improve the Services, facilitate matches, communicate with you, enhance safety, and comply with legal obligations. We may send transactional emails or push notifications related to your account activity."})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"3. Sharing and Disclosure"}),m.jsx("p",{children:"We do not sell your personal information. We may share limited data with service providers that support our operations (such as hosting, analytics, or messaging) under strict confidentiality obligations. We may also disclose information if required by law or to protect the safety of our users."})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"4. Data Retention"}),m.jsx("p",{children:"We retain your information as long as your account is active or as needed to provide the Services. You may request deletion of your account at any time, after which we will remove or anonymize your personal data unless legal obligations require retention."})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"5. Your Choices"}),m.jsx("p",{children:"You can access and update your profile information in the app. You may opt out of marketing communications and request account deletion. For location or push notifications, adjust permissions in your device settings."})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"6. Security"}),m.jsx("p",{children:"We implement administrative, technical, and physical safeguards to protect your data. However, no online service can guarantee absolute security. Use good judgment when sharing information with other users."})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"7. Childrens Privacy"}),m.jsx("p",{children:"The Services are not intended for individuals under 18. We do not knowingly collect data from minors. If you believe a minor has created an account, contact us so we can remove the information."})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-dark mb-2",children:"8. Policy Updates"}),m.jsx("p",{children:"We may update this Privacy Policy periodically. Material changes will be communicated via the app or email. Continued use of the Services after changes constitutes acceptance of the updated policy."})]})]}),m.jsxs("footer",{className:"border-t border-gray-200 pt-6 text-sm text-gray-600 space-y-2",children:[m.jsxs("p",{children:["Questions about this Privacy Policy? Email us at"," ",m.jsx("a",{href:"mailto:support@known.app",className:"text-primary font-semibold",children:"support@known.app"}),"."]}),m.jsxs("p",{children:["Looking for our terms of service? Read the"," ",m.jsx(mr,{to:"/terms",className:"text-primary font-semibold hover:underline",children:"Terms of Service"}),"."]})]})]})})}function ba({children:t}){const{user:e,loading:n}=Mi();return n?m.jsx("div",{className:"flex items-center justify-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e?m.jsx(m.Fragment,{children:t}):m.jsx(Jc,{to:"/login"})}function cE({children:t}){const{user:e,loading:n}=Mi();return n?m.jsx("div",{className:"flex items-center justify-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e?m.jsx(Jc,{to:"/compatibility"}):m.jsx(m.Fragment,{children:t})}function kz(){const{user:t}=Mi();return m.jsxs(m.Fragment,{children:[t&&m.jsx(qU,{}),m.jsxs(BN,{children:[m.jsx(pn,{path:"/login",element:m.jsx(cE,{children:m.jsx(KU,{})})}),m.jsx(pn,{path:"/register",element:m.jsx(cE,{children:m.jsx(YU,{})})}),m.jsx(pn,{path:"/",element:m.jsx(Jc,{to:"/login",replace:!0})}),m.jsx(pn,{path:"/app",element:m.jsx(ba,{children:m.jsx(d9,{})})}),m.jsx(pn,{path:"/compatibility",element:m.jsx(ba,{children:m.jsx(Pz,{})})}),m.jsx(pn,{path:"/matches",element:m.jsx(ba,{children:m.jsx(uB,{})})}),m.jsx(pn,{path:"/chat/:matchId",element:m.jsx(ba,{children:m.jsx(Tz,{})})}),m.jsx(pn,{path:"/profile",element:m.jsx(ba,{children:m.jsx(bz,{})})}),m.jsx(pn,{path:"/terms",element:m.jsx(Cz,{})}),m.jsx(pn,{path:"/privacy",element:m.jsx(Az,{})}),m.jsx(pn,{path:"/policy",element:m.jsx(Jc,{to:"/privacy",replace:!0})})]})]})}function Rz(){return m.jsx(KN,{children:m.jsx(zU,{children:m.jsx(kz,{})})})}ep.createRoot(document.getElementById("root")).render(m.jsx(Ad.StrictMode,{children:m.jsx(Rz,{})}));export{$t as C,Ny as W};
